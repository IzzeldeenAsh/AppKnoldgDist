"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[4417],{2016:(F,P,u)=>{u.d(P,{C:()=>M});var l=u(1626),s=u(4412),g=u(8810),f=u(6354),t=u(9437),h=u(980),b=u(4438),y=u(779);let M=(()=>{class _{http;translationService;apiUrl="https://api.foresighta.co/api/common/setting/country/list";createApi="https://api.foresighta.co/api/admin/setting/country";updateDeleteApi="https://api.foresighta.co/api/admin/setting/country";isLoadingSubject=new s.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";authLocalStorageKey="foresighta-creds";constructor(c,p){this.http=c,this.translationService=p,this.translationService.onLanguageChange().subscribe(d=>{this.currentLang=d||"en"})}setLoading(c){this.isLoadingSubject.next(c)}handleError(c){return(0,g.$)(c)}getAuthToken(){try{const c=localStorage.getItem(this.authLocalStorageKey);if(c)return JSON.parse(c).authToken||null}catch(c){console.error("Error parsing auth data from localStorage:",c)}return null}getCountries(){const c=this.getAuthToken(),p=new l.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...c?{Authorization:`Bearer ${c}`}:{}});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:p}).pipe((0,f.T)(d=>d.data),(0,t.W)(d=>this.handleError(d)),(0,h.j)(()=>this.setLoading(!1)))}createCountry(c){const p=this.getAuthToken(),d=new l.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...p?{Authorization:`Bearer ${p}`}:{}});return this.setLoading(!0),this.http.post(this.createApi,c,{headers:d}).pipe((0,f.T)(m=>m),(0,t.W)(m=>this.handleError(m)),(0,h.j)(()=>this.setLoading(!1)))}updateCountry(c,p){const d=this.getAuthToken(),m=new l.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...d?{Authorization:`Bearer ${d}`}:{}});return this.setLoading(!0),this.http.put(`${this.updateDeleteApi}/${c}`,p,{headers:m}).pipe((0,f.T)(C=>C),(0,t.W)(C=>this.handleError(C)),(0,h.j)(()=>this.setLoading(!1)))}deleteCountry(c){const p=this.getAuthToken(),d=new l.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...p?{Authorization:`Bearer ${p}`}:{}});return this.setLoading(!0),this.http.delete(`${this.updateDeleteApi}/${c}`,{headers:d}).pipe((0,f.T)(m=>m),(0,t.W)(m=>this.handleError(m)),(0,h.j)(()=>this.setLoading(!1)))}static \u0275fac=function(p){return new(p||_)(b.KVO(l.Qq),b.KVO(y.L))};static \u0275prov=b.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},4417:(F,P,u)=>{u.r(P),u.d(P,{SetupPaymentInfoModule:()=>tt});var l=u(177),s=u(9417),g=u(2791),f=u(5098),t=u(4438),h=u(288),b=u(2016);let y=(()=>{class o extends f.${title="";subtitle="";static \u0275fac=(()=>{let e;return function(n){return(e||(e=t.xGo(o)))(n||o)}})();static \u0275cmp=t.VBU({type:o,selectors:[["app-payment-header"]],inputs:{title:"title",subtitle:"subtitle"},features:[t.Vt3],decls:11,vars:2,consts:[[1,"section-header","px-4","sm:px-6","lg:px-8","py-8","relative","overflow-hidden","rounded-lg"],["alt","Section background","src","https://res.cloudinary.com/dsiku9ipv/image/upload/v1737266454/breadcrumb-bg-2_anwto8.png",1,"object-cover","z-0","position-absolute","top-0","left-0","w-100","h-100",2,"object-fit","cover"],[1,"position-absolute","z-10","d-none","d-md-block",2,"left","28%","transform","translateX(-50%)","top","0","pointer-events","none"],["src","assets/media/misc/stripes-dark.svg","width","768","height","768","alt","Stripes",1,"opacity-50",2,"width","auto","height","auto","max-width","none"],[2,"padding-top","50px"],[1,"position-relative","z-10","max-w-6xl","mx-auto","mt-5","w-100"],[1,"text-center","mb-4"],[1,"display-4","fw-bolder","mb-3","text-info"],[1,"lead","mb-4","text-info"]],template:function(r,n){1&r&&(t.j41(0,"div",0),t.nrm(1,"img",1),t.j41(2,"div",2),t.nrm(3,"img",3),t.k0s(),t.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),t.EFF(8),t.k0s(),t.j41(9,"p",8),t.EFF(10),t.k0s()()()()()),2&r&&(t.R7$(8),t.SpI(" ",n.title," "),t.R7$(2),t.SpI(" ",n.subtitle," "))},styles:[".section-header[_ngcontent-%COMP%]{position:relative;min-height:175px}.section-header[_ngcontent-%COMP%]   .text-gradient-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#e0f2fe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent}.section-header[_ngcontent-%COMP%]   .backdrop-blur[_ngcontent-%COMP%]{backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{min-height:200px;padding:2rem 1rem!important}.section-header[_ngcontent-%COMP%]   .display-4[_ngcontent-%COMP%]{font-size:2rem}.section-header[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}return o})();function M(o,i){if(1&o&&(t.j41(0,"div",8)(1,"div",9)(2,"span",10),t.EFF(3,"Loading..."),t.k0s()(),t.j41(4,"div",11)(5,"h5",12),t.EFF(6),t.k0s(),t.j41(7,"p",13),t.EFF(8),t.k0s()()()),2&o){const e=t.XpG();t.R7$(6),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062f\u0641\u0639...":"Loading payment information..."," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631":"Please wait"," ")}}function _(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",26)(1,"button",27),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.onEditManual())}),t.nrm(2,"i",28),t.EFF(3),t.k0s(),t.j41(4,"button",29),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.onChangeToStripe())}),t.nrm(5,"i",30),t.EFF(6),t.k0s()()}if(2&o){const e=t.XpG(3);t.R7$(3),t.SpI(" ","ar"===e.lang?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062d\u0633\u0627\u0628":"Edit Account"," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u062a\u063a\u064a\u064a\u0631 \u0625\u0644\u0649 Stripe":"Switch to Stripe"," ")}}function I(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",26)(1,"button",27),t.bIt("click",function(){t.eBV(e);const n=t.XpG(4);return t.Njj(n.onCompleteStripe())}),t.nrm(2,"i",28),t.EFF(3),t.k0s(),t.j41(4,"button",29),t.bIt("click",function(){t.eBV(e);const n=t.XpG(4);return t.Njj(n.onChangeToManual())}),t.nrm(5,"i",30),t.EFF(6),t.k0s()()}if(2&o){const e=t.XpG(4);t.R7$(3),t.SpI(" ","ar"===e.lang?"\u062a\u0639\u062f\u064a\u0644 Stripe":"Edit Stripe"," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u062a\u063a\u064a\u064a\u0631 \u0625\u0644\u0649 \u064a\u062f\u0648\u064a":"Switch to Manual"," ")}}function c(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",26)(1,"button",31),t.bIt("click",function(){t.eBV(e);const n=t.XpG(4);return t.Njj(n.onCompleteStripe())}),t.nrm(2,"i",32),t.EFF(3),t.k0s(),t.j41(4,"button",29),t.bIt("click",function(){t.eBV(e);const n=t.XpG(4);return t.Njj(n.onChangeToManual())}),t.nrm(5,"i",30),t.EFF(6),t.k0s()()}if(2&o){const e=t.XpG(4);t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0625\u0643\u0645\u0627\u0644 Stripe":"Complete Stripe Setup"," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u062a\u063a\u064a\u064a\u0631 \u0625\u0644\u0649 \u064a\u062f\u0648\u064a":"Switch to Manual"," ")}}function p(o,i){if(1&o&&(t.j41(0,"div"),t.DNE(1,I,7,2,"div",25)(2,c,7,2,"div",25),t.k0s()),2&o){const e=t.XpG(3);t.R7$(),t.Y8G("ngIf","active"===e.paymentInfo.status),t.R7$(),t.Y8G("ngIf","inactive"===e.paymentInfo.status)}}function d(o,i){if(1&o&&(t.j41(0,"div",15)(1,"div",16)(2,"div",17),t.nrm(3,"i",18),t.j41(4,"h4",19),t.EFF(5),t.k0s(),t.j41(6,"p",20),t.EFF(7),t.k0s(),t.j41(8,"div",21)(9,"span",22),t.EFF(10),t.nrm(11,"span",23),t.k0s()()(),t.j41(12,"div",24),t.DNE(13,_,7,2,"div",25)(14,p,3,2,"div",6),t.k0s()()()),2&o){const e=t.XpG(2);t.R7$(5),t.SpI(" ","ar"===e.lang?"\u0644\u062f\u064a\u0643 \u062d\u0633\u0627\u0628 \u062f\u0641\u0639 \u0646\u0634\u0637 \u0628\u0627\u0644\u0641\u0639\u0644":"You have an active payment account"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0623\u064a \u062a\u063a\u064a\u064a\u0631 \u0633\u064a\u0624\u062b\u0631 \u0639\u0644\u0649 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062d\u0627\u0644\u064a\u0629":"Any changes will override your current settings"," "),t.R7$(3),t.SpI(" ","manual"===e.paymentInfo.type?"ar"===e.lang?"\u062d\u0633\u0627\u0628 \u064a\u062f\u0648\u064a":"Manual Account":"Stripe Account"," "),t.R7$(),t.HbH("active"===e.paymentInfo.status?"active":"inactive"),t.R7$(2),t.Y8G("ngIf","manual"===e.paymentInfo.type),t.R7$(),t.Y8G("ngIf","stripe"===e.paymentInfo.type)}}function m(o,i){1&o&&(t.j41(0,"div",47),t.nrm(1,"i",48),t.k0s())}function C(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",40)(1,"div",41),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(3);return t.Njj(a.selectPaymentType(n.id))}),t.j41(2,"div",42)(3,"div",43),t.nrm(4,"img",44),t.k0s(),t.j41(5,"div",45),t.EFF(6),t.k0s()(),t.DNE(7,m,2,0,"div",46),t.k0s()()}if(2&o){const e=i.$implicit,r=t.XpG(3);t.R7$(),t.AVh("selected",r.selectedPaymentType===e.id),t.R7$(3),t.Y8G("src",e.imageUrl,t.B4B),t.R7$(2),t.SpI(" ","ar"===r.lang?e.name.ar:e.name.en," "),t.R7$(),t.Y8G("ngIf",r.selectedPaymentType===e.id)}}function A(o,i){if(1&o&&(t.j41(0,"div",49),t.nrm(1,"i",50),t.EFF(2),t.k0s()),2&o){const e=t.XpG(3);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639":"Please select a payment type"," ")}}function E(o,i){if(1&o&&(t.j41(0,"div",15)(1,"div",33)(2,"span",34),t.EFF(3,"1"),t.k0s(),t.j41(4,"h4",35),t.EFF(5),t.k0s()(),t.j41(6,"p",36),t.EFF(7),t.k0s(),t.j41(8,"div",37),t.DNE(9,C,8,5,"div",38),t.k0s(),t.DNE(10,A,3,1,"div",39),t.k0s()),2&o){const e=t.XpG(2);t.R7$(5),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639":"Select Payment Type"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u0645\u0641\u0636\u0644\u0629 \u0644\u062f\u064a\u0643":"Choose your preferred payment method"," "),t.R7$(2),t.Y8G("ngForOf",e.paymentTypes),t.R7$(),t.Y8G("ngIf",e.showValidationErrors&&!e.selectedPaymentType)}}function j(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",52)(1,"div",53)(2,"div",54),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.unselectCountry())}),t.j41(3,"div",55)(4,"div",56),t.nrm(5,"img",57),t.k0s(),t.j41(6,"div",58),t.EFF(7),t.k0s()(),t.j41(8,"div",59),t.nrm(9,"i",48),t.k0s()(),t.j41(10,"button",60),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.unselectCountry())}),t.nrm(11,"i",61),t.EFF(12),t.k0s()()()}if(2&o){const e=t.XpG(3);t.R7$(5),t.Y8G("src",e.getFlagUrl(e.selectedCountry.flag),t.B4B)("alt",e.getCountryName(e.selectedCountry)),t.R7$(2),t.SpI(" ",e.getCountryName(e.selectedCountry)," "),t.R7$(5),t.SpI(" ","ar"===e.lang?"\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u062f\u0648\u0644\u0629":"Change Country"," ")}}function w(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",69),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(4);return t.Njj(a.selectCountry(n))}),t.j41(1,"div",55)(2,"div",56),t.nrm(3,"img",57),t.k0s(),t.j41(4,"div",58),t.EFF(5),t.k0s()()()}if(2&o){const e=i.$implicit,r=t.XpG(4);t.R7$(3),t.Y8G("src",r.getFlagUrl(e.flag),t.B4B)("alt",r.getCountryName(e)),t.R7$(2),t.SpI(" ",r.getCountryName(e)," ")}}function T(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",70),t.nrm(1,"i",71),t.j41(2,"p"),t.EFF(3),t.k0s(),t.j41(4,"button",60),t.bIt("click",function(){t.eBV(e);const n=t.XpG(4);return n.searchTerm="",t.Njj(n.filterCountries())}),t.nrm(5,"i",72),t.EFF(6),t.k0s()()}if(2&o){const e=t.XpG(4);t.R7$(3),t.JRh("ar"===e.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0646\u062a\u0627\u0626\u062c":"No countries found"),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0645\u0633\u062d \u0627\u0644\u0628\u062d\u062b":"Clear search"," ")}}function $(o,i){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",62),t.nrm(2,"i",63),t.j41(3,"input",64),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG(3);return t.DH7(a.searchTerm,n)||(a.searchTerm=n),t.Njj(n)}),t.bIt("input",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.filterCountries())}),t.k0s(),t.j41(4,"span",65)(5,"small",13),t.EFF(6),t.k0s()()(),t.j41(7,"div",66),t.DNE(8,w,6,3,"div",67),t.k0s(),t.DNE(9,T,7,2,"div",68),t.k0s()}if(2&o){const e=t.XpG(3);t.R7$(3),t.R50("ngModel",e.searchTerm),t.Y8G("placeholder","ar"===e.lang?"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u062f\u0648\u0644\u0629...":"Search for a country..."),t.R7$(3),t.Lme("",e.filteredCountries.length," ","ar"===e.lang?"\u062f\u0648\u0644\u0629":"countries",""),t.R7$(2),t.Y8G("ngForOf",e.filteredCountries),t.R7$(),t.Y8G("ngIf",0===e.filteredCountries.length&&e.searchTerm)}}function R(o,i){if(1&o&&(t.j41(0,"div",49),t.nrm(1,"i",50),t.EFF(2),t.k0s()),2&o){const e=t.XpG(3);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u062f\u0648\u0644\u0629":"Please select a country"," ")}}function D(o,i){if(1&o&&(t.j41(0,"div",15)(1,"div",33)(2,"span",34),t.EFF(3,"2"),t.k0s(),t.j41(4,"h4",35),t.EFF(5),t.k0s()(),t.j41(6,"p",36),t.EFF(7),t.k0s(),t.DNE(8,j,13,4,"div",51)(9,$,10,6,"div",6)(10,R,3,1,"div",39),t.k0s()),2&o){const e=t.XpG(2);t.R7$(5),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u062f\u0648\u0644\u0629":"Select Country"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u062f\u0648\u0644\u0629 \u0627\u0644\u062a\u064a \u062a\u0631\u064a\u062f \u0625\u062c\u0631\u0627\u0621 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0645\u0646\u0647\u0627":"Select the country you want to transact from"," "),t.R7$(),t.Y8G("ngIf",e.selectedCountry),t.R7$(),t.Y8G("ngIf",!e.selectedCountry),t.R7$(),t.Y8G("ngIf",e.showValidationErrors&&!e.selectedCountry)}}function G(o,i){if(1&o&&(t.j41(0,"div"),t.DNE(1,d,15,7,"div",14)(2,E,11,4,"div",14)(3,D,11,5,"div",14),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.hasExistingPayment&&e.paymentInfo&&!e.isEditing),t.R7$(),t.Y8G("ngIf",!e.hasExistingPayment||e.isEditing),t.R7$(),t.Y8G("ngIf",e.selectedPaymentType&&(!e.hasExistingPayment||e.isEditing))}}function L(o,i){1&o&&t.nrm(0,"span",79)}function V(o,i){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.nrm(2,"i",80),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u062a\u0627\u0644\u064a":"Next"," ")}}function Y(o,i){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 Stripe...":"Creating Stripe account..."," ")}}function X(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",73)(1,"div",74)(2,"div",75),t.nrm(3,"i",76),t.EFF(4),t.k0s(),t.j41(5,"button",77),t.nI1(6,"async"),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onNext())}),t.DNE(7,L,1,0,"span",78),t.nI1(8,"async"),t.DNE(9,V,3,1,"span",6)(10,Y,2,1,"span",6),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(4),t.SpI(" ","ar"===e.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u0643 \u0622\u0645\u0646\u0629 \u0648\u0645\u0634\u0641\u0631\u0629":"Your information is secure and encrypted"," "),t.R7$(),t.Y8G("disabled",t.bMT(6,5,e.paymentService.isLoading$)||e.isCreatingStripeAccount),t.R7$(2),t.Y8G("ngIf",t.bMT(8,7,e.paymentService.isLoading$)||e.isCreatingStripeAccount),t.R7$(2),t.Y8G("ngIf",!e.isCreatingStripeAccount),t.R7$(),t.Y8G("ngIf",e.isCreatingStripeAccount)}}let N=(()=>{class o extends f.${fb;router;paymentService;countriesService;paymentForm;paymentTypes=[{id:"manual",name:{en:"Manual",ar:"\u064a\u062f\u0648\u064a"},imageUrl:"https://res.cloudinary.com/dsiku9ipv/image/upload/v1754912766/payment-method_4689897_zrev9z.png"},{id:"stripe",name:{en:"Stripe",ar:"Stripe"},imageUrl:"https://res.cloudinary.com/dsiku9ipv/image/upload/v1754902439/New_Project_12_jmtvd6.png"}];selectedPaymentType=null;allCountries=[];stripeCountries=[];filteredCountries=[];searchTerm="";selectedCountry=null;showValidationErrors=!1;paymentInfo=null;hasExistingPayment=!1;isEditing=!1;isLoadingPaymentInfo=!0;isCreatingStripeAccount=!1;constructor(e,r,n,a,et){super(e),this.fb=r,this.router=n,this.paymentService=a,this.countriesService=et,this.paymentForm=this.fb.group({paymentType:["",s.k0.required],countryId:["",s.k0.required]})}ngOnInit(){this.loadAllCountries(),this.loadExistingPaymentInfo()}loadAllCountries(){this.countriesService.getCountries().subscribe({next:e=>{this.allCountries=e},error:e=>{this.handleServerErrors(e)}})}loadStripeCountries(){this.paymentService.getStripeCountries().subscribe({next:e=>{this.stripeCountries=e,this.filteredCountries=[...this.stripeCountries]},error:e=>{this.handleServerErrors(e)}})}selectPaymentType(e){this.selectedPaymentType=e,this.paymentForm.patchValue({paymentType:e}),this.selectedCountry=null,this.paymentForm.patchValue({countryId:""}),"stripe"===e?this.loadStripeCountries():this.filteredCountries=[...this.allCountries],this.filterCountries()}selectCountry(e){this.selectedCountry=e,this.paymentForm.patchValue({countryId:e.id})}unselectCountry(){this.selectedCountry=null,this.paymentForm.patchValue({countryId:""}),this.searchTerm="",this.filterCountries()}filterCountries(){this.filteredCountries=this.searchTerm?("stripe"===this.selectedPaymentType?this.stripeCountries:this.allCountries).filter(r=>this.getCountryName(r).toLowerCase().includes(this.searchTerm.toLowerCase())):"stripe"===this.selectedPaymentType?[...this.stripeCountries]:[...this.allCountries]}getCountryName(e){return"stripe"===this.selectedPaymentType?e.name:"ar"===this.lang?e.names?.ar:e.names?.en}getFlagUrl(e){return`assets/media/flags/${e}.svg`}onNext(){this.paymentForm.valid?this.paymentService.setPaymentType({type:this.selectedPaymentType,country_id:this.selectedCountry.id}).subscribe({next:()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0641\u0638":"Success","ar"===this.lang?"\u062a\u0645 \u062d\u0641\u0638 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639 \u0628\u0646\u062c\u0627\u062d":"Payment type saved successfully"),"manual"===this.selectedPaymentType?this.router.navigate(["/app/setup-payment-info/manual-account"]):"stripe"===this.selectedPaymentType&&this.initiateStripeOnboarding()},error:r=>{this.handleServerErrors(r)}}):(this.showValidationErrors=!0,this.selectedPaymentType?this.selectedCountry||this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Validation Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u062f\u0648\u0644\u0629":"Please select a country"):this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Validation Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639":"Please select a payment type"))}initiateStripeOnboarding(){this.isCreatingStripeAccount=!0,this.paymentService.createStripeAccount().subscribe({next:e=>{this.isCreatingStripeAccount=!1,e.data.stripe_account_link.url?window.location.href=e.data.stripe_account_link.url:this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 Stripe":"Stripe link not found")},error:e=>{this.isCreatingStripeAccount=!1,422===e.status&&e.error&&"Stripe account exists"===e.error.message?this.router.navigate(["/app/setup-payment-info/stripe-callback/refresh"]):this.handleServerErrors(e)}})}loadExistingPaymentInfo(){this.isLoadingPaymentInfo=!0,this.paymentService.getStripeAccountDetails().subscribe({next:e=>{e&&e.data?(this.paymentInfo=e.data,this.hasExistingPayment=!0,this.preSelectExistingInfo()):this.hasExistingPayment=!1,this.isLoadingPaymentInfo=!1},error:e=>{if(201===e.status)return this.hasExistingPayment=!1,void(this.isLoadingPaymentInfo=!1);this.paymentService.getManualAccountDetails().subscribe({next:r=>{r&&r.data?(this.paymentInfo=r.data,this.hasExistingPayment=!0,this.preSelectExistingInfo()):this.hasExistingPayment=!1,this.isLoadingPaymentInfo=!1},error:r=>{this.hasExistingPayment=!1,this.isLoadingPaymentInfo=!1}})}})}preSelectExistingInfo(){this.paymentInfo&&(this.selectedPaymentType=this.paymentInfo.type,this.paymentForm.patchValue({paymentType:this.paymentInfo.type}),this.paymentInfo.country&&(this.selectedCountry=this.paymentInfo.country,this.paymentForm.patchValue({countryId:this.paymentInfo.country.id})),"stripe"===this.paymentInfo.type?this.loadStripeCountries():this.filteredCountries=[...this.allCountries])}onEditManual(){this.isEditing=!0}onChangeToStripe(){this.selectedPaymentType="stripe",this.paymentForm.patchValue({paymentType:"stripe"}),this.selectedCountry=null,this.paymentForm.patchValue({countryId:""}),this.loadStripeCountries(),this.isEditing=!0}onChangeToManual(){this.selectedPaymentType="manual",this.paymentForm.patchValue({paymentType:"manual"}),this.selectedCountry=null,this.paymentForm.patchValue({countryId:""}),this.filteredCountries=[...this.allCountries],this.isEditing=!0}onCompleteStripe(){this.router.navigate(["/app/setup-payment-info/stripe-callback/refresh"])}handleServerErrors(e){if(e.error&&e.error.errors){const r=e.error.errors;for(const n in r)r.hasOwnProperty(n)&&this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",r[n].join(", "))}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An unexpected error occurred.")}static \u0275fac=function(r){return new(r||o)(t.rXU(t.zZn),t.rXU(s.ok),t.rXU(g.Ix),t.rXU(h.W),t.rXU(b.C))};static \u0275cmp=t.VBU({type:o,selectors:[["app-setup-payment-info"]],features:[t.Vt3],decls:8,vars:5,consts:[[3,"title","subtitle"],[1,"gradient-background",2,"padding-top","50px"],[1,"container-fluid"],[1,"row"],[1,"col-12","mx-auto","col-md-6"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-info",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-3"],[1,"text-gray-700"],[1,"text-muted"],["class","mb-8",4,"ngIf"],[1,"mb-8"],[1,"payment-warning-card"],[1,"text-center","mb-4"],[1,"fas","fa-info-circle","text-primary","fs-1","mb-3"],[1,"mb-2"],[1,"text-muted","mb-3"],[1,"payment-type-info"],[1,"badge","bg-light","text-dark"],[1,"status-dot","ms-2"],[1,"text-center"],["class","d-flex justify-content-center gap-3 flex-wrap",4,"ngIf"],[1,"d-flex","justify-content-center","gap-3","flex-wrap"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit","me-2"],[1,"btn","btn-outline-info",3,"click"],[1,"fas","fa-exchange-alt","me-2"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-check","me-2"],[1,"d-flex","align-items-center","mb-4"],[1,"badge","badge-circle","badge-info","me-3"],[1,"mb-0","text-gray-800","fw-bold"],[1,"text-muted","mb-4"],[1,"row","g-4"],["class","col-md-6",4,"ngFor","ngForOf"],["class","text-danger mt-3 fs-7 d-flex align-items-center",4,"ngIf"],[1,"col-md-6"],[1,"payment-type-card",3,"click"],[1,"payment-type-content"],[1,"payment-type-icon"],["alt","Payment method icon",1,"payment-icon",3,"src"],[1,"payment-type-name"],["class","payment-type-check",4,"ngIf"],[1,"payment-type-check"],[1,"fas","fa-check"],[1,"text-danger","mt-3","fs-7","d-flex","align-items-center"],[1,"fas","fa-exclamation-circle","me-2"],["class","mb-4",4,"ngIf"],[1,"mb-4"],[1,"selected-country-display"],[1,"country-card","selected",2,"cursor","pointer",3,"click"],[1,"country-card-content"],[1,"country-flag-option"],["onerror","this.src='assets/media/flags/default.svg'",1,"flag-image",3,"src","alt"],[1,"country-name"],[1,"country-check"],[1,"btn","btn-sm","btn-light-info","mt-2",3,"click"],[1,"fas","fa-edit","me-1"],[1,"search-container","position-relative","mb-4"],[1,"fas","fa-search","position-absolute",2,"left","16px","top","50%","transform","translateY(-50%)","color","#a1a5b7","z-index","2"],["type","text",1,"form-control","ps-10",2,"padding-left","45px",3,"ngModelChange","input","ngModel","placeholder"],[1,"position-absolute",2,"right","16px","top","50%","transform","translateY(-50%)","color","#a1a5b7"],[1,"countries-grid"],["class","country-card",3,"click",4,"ngFor","ngForOf"],["class","text-center py-5 text-muted",4,"ngIf"],[1,"country-card",3,"click"],[1,"text-center","py-5","text-muted"],[1,"fas","fa-search","fs-2x","mb-3","text-gray-400"],[1,"fas","fa-times","me-1"],[1,"card-footer"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted","small"],[1,"fas","fa-shield-alt","text-info","me-1"],["type","button",1,"btn","btn-info",3,"click","disabled"],["class","spinner-border spinner-border-sm text-white me-2","role","status","aria-hidden","true","style","width: 1rem; height: 1rem;",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","text-white","me-2",2,"width","1rem","height","1rem"],[1,"fas","fa-arrow-right","ms-2"]],template:function(r,n){1&r&&(t.nrm(0,"app-payment-header",0),t.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.DNE(5,M,9,2,"div",5)(6,G,4,3,"div",6)(7,X,11,9,"div",7),t.k0s()()()()),2&r&&(t.Y8G("title","ar"===n.lang?"\u0625\u0639\u062f\u0627\u062f \u0645\u062d\u0641\u0638\u0629 \u0627\u0644\u062f\u0641\u0639":"Setup Payment Wallet")("subtitle","ar"===n.lang?"\u0627\u062e\u062a\u0631 \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 \u0644\u0643 \u0648\u0642\u0645 \u0628\u0625\u0639\u062f\u0627\u062f \u0645\u062d\u0641\u0638\u062a\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a\u0629 \u0628\u0633\u0647\u0648\u0644\u0629 \u0648\u0623\u0645\u0627\u0646":"Choose your preferred payment method and setup your digital wallet easily and securely"),t.R7$(5),t.Y8G("ngIf",n.isLoadingPaymentInfo),t.R7$(),t.Y8G("ngIf",!n.isLoadingPaymentInfo),t.R7$(),t.Y8G("ngIf",!n.hasExistingPayment||n.isEditing))},dependencies:[l.Sq,l.bT,s.me,s.BC,s.vS,y,l.Jj],styles:['.payment-warning-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4e6ef;border-radius:8px;padding:2rem}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem 1rem;border-radius:20px}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .status-dot.active[_ngcontent-%COMP%]{background-color:#28a745}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .status-dot.inactive[_ngcontent-%COMP%]{background-color:#dc3545}.payment-type-card[_ngcontent-%COMP%]{border:2px solid #e4e6ef;border-radius:1rem;padding:1.5rem;cursor:pointer;transition:all .3s ease;background-color:#fff;position:relative;height:200px;display:flex;align-items:center;justify-content:center;overflow:hidden}.payment-type-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#0978b908,#fff0 60%);opacity:0;transition:opacity .3s ease}.payment-type-card[_ngcontent-%COMP%]:hover{border-color:#0978b9;transform:translateY(-3px);box-shadow:0 .5rem 1.5rem #0978b926}.payment-type-card[_ngcontent-%COMP%]:hover:before{opacity:1}.payment-type-card.selected[_ngcontent-%COMP%]{border-color:#0978b9;background-color:#0978b90d;box-shadow:0 .5rem 1.5rem #0978b933}.payment-type-card.selected[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{color:#0978b9}.payment-type-card.selected[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{filter:grayscale(0%);opacity:1;transform:scale(1.05)}.payment-type-card.selected[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{color:#0978b9;font-weight:600}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]{text-align:center}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{margin-bottom:1.25rem;transition:all .3s ease;height:100px;display:flex;align-items:center;justify-content:center}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{max-height:100px;max-width:120px;object-fit:contain;filter:grayscale(80%);opacity:.8;transition:all .3s ease}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;color:#181c32;transition:color .3s ease;letter-spacing:.01em}.payment-type-card[_ngcontent-%COMP%]   .payment-type-check[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;font-size:1.4rem;background:#0978b9;color:#fff!important;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 6px #0978b933;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.payment-type-card[_ngcontent-%COMP%]   .payment-type-check[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.search-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.search-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:.75rem;border:1px solid #e4e6ef;padding:.85rem 1.25rem;font-size:1rem;transition:all .25s ease;background-color:#f9f9f9}.search-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#0978b9;box-shadow:0 0 0 .25rem #0978b926;background-color:#fff}.search-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#a1a5b7;font-style:italic}.countries-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;max-height:400px;overflow-y:auto;padding:.75rem;border:1px solid #e4e6ef;border-radius:.75rem;background-color:#f9f9f9;box-shadow:inset 0 2px 6px #00000008}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0978b9;border-radius:10px;opacity:.7}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0866a0}.country-card[_ngcontent-%COMP%]{border:1px solid #e4e6ef;border-radius:.75rem;padding:1rem 1.25rem;cursor:pointer;transition:all .3s ease;background-color:#fff;position:relative}.country-card[_ngcontent-%COMP%]:hover{border-color:#0978b9;transform:translateY(-2px);box-shadow:0 .3rem .8rem #0978b926}.country-card.selected[_ngcontent-%COMP%]{border-color:#0978b9;background-color:#0978b90d;box-shadow:0 .3rem .8rem #0978b933}.country-card.selected[_ngcontent-%COMP%]   .country-name[_ngcontent-%COMP%]{color:#0978b9;font-weight:600}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]   .country-flag-option[_ngcontent-%COMP%]{flex-shrink:0}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]   .country-flag-option[_ngcontent-%COMP%]   .flag-image[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:4px;object-fit:cover;border:1px solid #e4e6ef;box-shadow:0 2px 4px #0000000d;transition:all .3s ease}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]   .country-name[_ngcontent-%COMP%]{font-size:1.05rem;color:#181c32;font-weight:500;transition:color .3s ease;flex:1;min-width:0;word-wrap:break-word;letter-spacing:.01em}.country-card[_ngcontent-%COMP%]   .country-check[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:1rem;background:#0978b9;color:#fff!important;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0978b933;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.country-card[_ngcontent-%COMP%]   .country-check[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .5rem 2rem #00000014;border-radius:1rem;overflow:hidden}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e4e6ef;padding:1.75rem 2rem;position:relative}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:2rem;width:50px;height:3px;background:#0978b9;border-radius:3px}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:0;font-weight:700;color:#181c32;font-size:1.4rem;letter-spacing:.01em}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2.5rem 2rem}.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background-color:#fff;border-top:1px solid #e4e6ef;padding:1.5rem 2rem}.btn-info[_ngcontent-%COMP%]{background-color:#0978b9;border-color:#0978b9;border-radius:.75rem;padding:.75rem 2rem;font-weight:500;letter-spacing:.03em;transition:all .3s ease;position:relative;overflow:hidden;box-shadow:0 4px 10px #0978b933}.btn-info[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,#fff0,#fff3,#fff0);transition:all .6s ease}.btn-info[_ngcontent-%COMP%]:hover{background-color:#0866a0;border-color:#0866a0;transform:translateY(-2px);box-shadow:0 6px 15px #0978b94d}.btn-info[_ngcontent-%COMP%]:hover:before{left:100%}.btn-info[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #0978b94d}.btn-info[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed;box-shadow:none}@media (max-width: 768px){.countries-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}.payment-type-card[_ngcontent-%COMP%]{height:150px;padding:1.5rem 1rem}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{margin-bottom:.75rem}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{max-height:80px}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{font-size:1.1rem}.card-body[_ngcontent-%COMP%]{padding:1.75rem 1.5rem}.card-header[_ngcontent-%COMP%]{padding:1.5rem 1.75rem}.card-header[_ngcontent-%COMP%]:after{left:1.75rem;width:40px}.card-footer[_ngcontent-%COMP%]{padding:1.25rem 1.75rem}}@media (max-width: 576px){.countries-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.payment-type-card[_ngcontent-%COMP%]{height:120px;padding:1rem}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{margin-bottom:.5rem;height:70px}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{max-height:70px;max-width:100px}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{font-size:1rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem 1.25rem}.card-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.25rem}.card-header[_ngcontent-%COMP%]:after{left:1.5rem;width:35px}.card-footer[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.btn-info[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem}}.border-gray-200[_ngcontent-%COMP%]{border:2px solid #e4e6ef!important}']})}return o})();function B(o,i){if(1&o&&(t.j41(0,"div",21),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("accountName")," ")}}function U(o,i){if(1&o&&(t.j41(0,"div",21),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("iban")," ")}}function z(o,i){1&o&&t.nrm(0,"span",22)}let W=(()=>{class o extends f.${fb;router;paymentService;manualAccountForm;showValidationErrors=!1;isEditing=!1;existingData=null;constructor(e,r,n,a){super(e),this.fb=r,this.router=n,this.paymentService=a,this.manualAccountForm=this.fb.group({accountName:["",[s.k0.required,s.k0.minLength(2)]],iban:["",[s.k0.required,s.k0.minLength(10)]]})}ngOnInit(){this.loadExistingData()}loadExistingData(){this.paymentService.getManualAccountDetails().subscribe({next:e=>{this.existingData=e.data,this.isEditing=!0,this.manualAccountForm.patchValue({accountName:this.existingData.account_name||"",iban:this.existingData.iban||""})},error:()=>{this.isEditing=!1}})}onSubmit(){if(this.manualAccountForm.valid){const e={account_name:this.manualAccountForm.value.accountName,iban:this.manualAccountForm.value.iban.replace(/\s+/g,"")};this.paymentService.createManualAccount(e).subscribe({next:()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0641\u0638":"Success",this.isEditing?"ar"===this.lang?"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u064a\u062f\u0648\u064a \u0628\u0646\u062c\u0627\u062d":"Manual account updated successfully":"ar"===this.lang?"\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u064a\u062f\u0648\u064a \u0628\u0646\u062c\u0627\u062d":"Manual account created successfully"),this.router.navigate(["/app/setup-payment-info/success"],{queryParams:{type:"manual"}})},error:r=>{this.handleServerErrors(r)}})}else this.showValidationErrors=!0,this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.manualAccountForm.controls).forEach(e=>{this.manualAccountForm.get(e)?.markAsTouched()})}goBack(){this.router.navigate(["/setup-payment-info"])}getFieldError(e){const r=this.manualAccountForm.get(e);if(r?.errors&&(r.dirty||r.touched||this.showValidationErrors)){if(r.errors.required)return"ar"===this.lang?`${this.getFieldLabel(e)} \u0645\u0637\u0644\u0648\u0628`:`${this.getFieldLabel(e)} is required`;if(r.errors.minlength){const n=r.errors.minlength.requiredLength;return"ar"===this.lang?`${this.getFieldLabel(e)} \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 ${n} \u0623\u062d\u0631\u0641`:`${this.getFieldLabel(e)} must be at least ${n} characters`}}return""}getFieldLabel(e){const r={accountName:{en:"Account Name",ar:"\u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628"},iban:{en:"IBAN",ar:"\u0631\u0642\u0645 \u0627\u0644\u0622\u064a\u0628\u0627\u0646"}};return"ar"===this.lang?r[e].ar:r[e].en}handleServerErrors(e){if(e.error&&e.error.errors){const r=e.error.errors;for(const n in r)r.hasOwnProperty(n)&&this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",r[n].join(", "))}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.")}static \u0275fac=function(r){return new(r||o)(t.rXU(t.zZn),t.rXU(s.ok),t.rXU(g.Ix),t.rXU(h.W))};static \u0275cmp=t.VBU({type:o,selectors:[["app-manual-account"]],features:[t.Vt3],decls:34,vars:24,consts:[[3,"title","subtitle"],[1,"container-fluid","gradient-background",2,"padding-top","50px"],[1,"row","justify-content-center"],[1,"col-lg-6","col-xl-5"],[3,"ngSubmit","formGroup"],[1,"mb-6"],[1,"form-label","required"],["type","text","formControlName","accountName",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","iban",1,"form-control",3,"placeholder"],[1,"form-text","text-muted"],[1,"alert","alert-light-info","mb-0"],[1,"d-flex","align-items-center"],[1,"fas","fa-info-circle","text-info","fs-2","me-3"],[1,"mb-1","fw-bold"],[1,"mb-0","text-muted"],[1,"d-flex","justify-content-between","pt-5"],["type","button",1,"btn","btn-light",3,"click"],[1,"fas","fa-arrow-left","me-2"],["type","submit",1,"btn","btn-info",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"invalid-feedback"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(r,n){1&r&&(t.nrm(0,"app-payment-header",0),t.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),t.bIt("ngSubmit",function(){return n.onSubmit()}),t.j41(5,"div",5)(6,"label",6),t.EFF(7),t.k0s(),t.nrm(8,"input",7),t.DNE(9,B,2,1,"div",8),t.k0s(),t.j41(10,"div",5)(11,"label",6),t.EFF(12),t.k0s(),t.nrm(13,"input",9),t.DNE(14,U,2,1,"div",8),t.j41(15,"div",10),t.EFF(16),t.k0s()(),t.j41(17,"div",11)(18,"div",12),t.nrm(19,"i",13),t.j41(20,"div")(21,"p",14),t.EFF(22),t.k0s(),t.j41(23,"p",15),t.EFF(24),t.k0s()()()(),t.j41(25,"div",16)(26,"button",17),t.bIt("click",function(){return n.goBack()}),t.nrm(27,"i",18),t.EFF(28),t.k0s(),t.j41(29,"button",19),t.nI1(30,"async"),t.DNE(31,z,1,0,"span",20),t.nI1(32,"async"),t.EFF(33),t.k0s()()()()()()),2&r&&(t.Y8G("title","ar"===n.lang?"\u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u064a\u062f\u0648\u064a":"Manual Account Setup")("subtitle","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0644\u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a":"Enter your bank account details to receive payments"),t.R7$(4),t.Y8G("formGroup",n.manualAccountForm),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628":"Account Name"," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("accountName")),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628":"Enter account name"),t.R7$(),t.Y8G("ngIf",n.getFieldError("accountName")),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0631\u0642\u0645 \u0627\u0644\u0622\u064a\u0628\u0627\u0646 (IBAN)":"IBAN Number"," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("iban")),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0631\u0642\u0645 \u0627\u0644\u0622\u064a\u0628\u0627\u0646":"Enter IBAN number"),t.R7$(),t.Y8G("ngIf",n.getFieldError("iban")),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0645\u062b\u0627\u0644: SA03 8000 0000 6080 1016 7519":"Example: SA03 8000 0000 6080 1016 7519"," "),t.R7$(6),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0647\u0627\u0645\u0629":"Important Information"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u062a\u0623\u0643\u062f \u0645\u0646 \u0635\u062d\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u062f\u062e\u0644\u0629. \u0633\u064a\u062a\u0645 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0644\u062a\u062d\u0648\u064a\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0625\u0644\u064a\u0643.":"Please ensure the information is correct. These details will be used to transfer payments to you."," "),t.R7$(4),t.SpI(" ","ar"===n.lang?"\u0627\u0644\u0633\u0627\u0628\u0642":"Back"," "),t.R7$(),t.Y8G("disabled",t.bMT(30,20,n.paymentService.isLoading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(32,22,n.paymentService.isLoading$)),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062d\u0633\u0627\u0628":"Create Account"," "))},dependencies:[l.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,y,l.Jj],styles:['.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .1rem 1rem #00000012}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e4e6ef;padding:1.5rem}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:0;font-weight:600;color:#181c32}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #e4e6ef;padding:1.5rem}.form-control[_ngcontent-%COMP%]{border-radius:.475rem;border:1px solid #e4e6ef;padding:.75rem 1rem;font-size:1rem;transition:border-color .15s ease,box-shadow .15s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#0978b9;box-shadow:0 0 0 .2rem #0978b940}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#f1416c}.form-control[_ngcontent-%COMP%]::placeholder{color:#a1a5b7}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#181c32;margin-bottom:.5rem}.form-label.required[_ngcontent-%COMP%]:after{content:"*";color:#f1416c;margin-left:.25rem}.invalid-feedback[_ngcontent-%COMP%]{font-size:.875rem;color:#f1416c}.form-text[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.25rem}.btn-info[_ngcontent-%COMP%]{background-color:#0978b9;border-color:#0978b9}.btn-info[_ngcontent-%COMP%]:hover{background-color:#085a8a;border-color:#085a8a}.btn-info[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-light[_ngcontent-%COMP%]{background-color:#f5f8fa;border-color:#e4e6ef;color:#7e8299}.btn-light[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#d3d6db;color:#5e6278}.alert-light-info[_ngcontent-%COMP%]{background-color:#0978b90d;border:1px solid rgba(9,120,185,.2);color:#0978b9}.alert-light-info[_ngcontent-%COMP%]   .text-info[_ngcontent-%COMP%]{color:#0978b9!important}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1.5rem}.card-footer[_ngcontent-%COMP%]{padding:1.25rem}.d-flex.justify-content-between[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.d-flex.justify-content-between[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.d-flex.justify-content-between[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{order:2}.d-flex.justify-content-between[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{order:1}}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}']})}return o})();function K(o,i){if(1&o&&(t.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"span",10),t.EFF(4,"Loading..."),t.k0s()(),t.j41(5,"h4",11),t.EFF(6),t.k0s(),t.j41(7,"p",12),t.EFF(8),t.k0s()()()),2&o){const e=t.XpG();t.R7$(6),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0633\u0627\u0628...":"Checking account status..."," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631 \u0642\u0644\u064a\u0644\u0627\u064b":"Please wait a moment"," ")}}function H(o,i){if(1&o&&(t.j41(0,"div",7)(1,"div",13)(2,"div",14),t.nrm(3,"i",15),t.k0s(),t.j41(4,"h4",16),t.EFF(5),t.k0s(),t.j41(6,"p",17),t.EFF(7),t.k0s(),t.j41(8,"div",18)(9,"span",10),t.EFF(10,"Loading..."),t.k0s()()()()),2&o){const e=t.XpG();t.R7$(5),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628 \u0628\u0646\u062c\u0627\u062d!":"Account Setup Complete!"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 \u0627\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629.":"Your Stripe account has been successfully set up. You will be redirected shortly."," ")}}function J(o,i){1&o&&t.nrm(0,"span",29)}function Z(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",19)(1,"div",20)(2,"div",21),t.nrm(3,"i",22),t.k0s(),t.j41(4,"h4",23),t.EFF(5),t.k0s(),t.j41(6,"p",24),t.EFF(7),t.k0s(),t.j41(8,"div",25)(9,"button",26),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goToSetup())}),t.EFF(10),t.k0s(),t.j41(11,"button",27),t.nI1(12,"async"),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.completeAccount())}),t.DNE(13,J,1,0,"span",28),t.nI1(14,"async"),t.EFF(15),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(5),t.SpI(" ","ar"===e.lang?"\u064a\u062d\u062a\u0627\u062c \u0627\u0644\u062d\u0633\u0627\u0628 \u0625\u0644\u0649 \u0627\u0644\u0625\u0643\u0645\u0627\u0644":"Account Needs Completion"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0625\u0643\u0645\u0627\u0644 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0627\u0644\u0643\u0627\u0645\u0644. \u064a\u0631\u062c\u0649 \u0627\u0644\u0646\u0642\u0631 \u0639\u0644\u0649 \u0627\u0644\u0632\u0631 \u0623\u062f\u0646\u0627\u0647 \u0644\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0639\u0645\u0644\u064a\u0629.":"Your Stripe account setup is not fully complete. Please click the button below to complete the process."," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a":"Back to Setup"," "),t.R7$(),t.Y8G("disabled",t.bMT(12,6,e.paymentService.isLoading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(14,8,e.paymentService.isLoading$)),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u062d\u0633\u0627\u0628":"Complete Account"," ")}}function Q(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",19)(1,"div",30)(2,"div",31),t.nrm(3,"i",32),t.k0s(),t.j41(4,"h4",33),t.EFF(5),t.k0s(),t.j41(6,"p",24),t.EFF(7),t.k0s(),t.j41(8,"div",25)(9,"button",26),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goToSetup())}),t.EFF(10),t.k0s(),t.j41(11,"button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.checkStripeStatus())}),t.EFF(12),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(5),t.SpI(" ","ar"===e.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error Occurred"," "),t.R7$(2),t.SpI(" ",e.error," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a":"Back to Setup"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629":"Try Again"," ")}}let O=(()=>{class o extends f.${router;route;paymentService;isLoading=!0;isCompleted=!1;needsCompletion=!1;error="";action="";constructor(e,r,n,a){super(e),this.router=r,this.route=n,this.paymentService=a}ngOnInit(){this.action=this.route.snapshot.data.action||"","return"===this.action?this.performReturn():"refresh"===this.action?this.performRefresh():this.performStripeStatusCheck()}checkStripeStatus(){this.isLoading=!0,this.error="",this.performStripeStatusCheck()}performStripeStatusCheck(){this.paymentService.getStripeAccountDetails().subscribe({next:e=>{this.isLoading=!1,e?.data?.details_submitted_at?this.completeStripeOnboarding():this.needsCompletion=!0},error:e=>{this.isLoading=!1,this.error="ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0633\u0627\u0628":"Error checking account status",this.handleServerErrors(e)}})}completeStripeOnboarding(){this.isLoading=!0,this.paymentService.completeStripeOnboarding().subscribe({next:e=>{this.isLoading=!1,this.isCompleted=!0,this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0643\u0645\u0627\u0644":"Success","ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0628\u0646\u062c\u0627\u062d":"Stripe account setup completed successfully"),setTimeout(()=>{this.router.navigate(["/app/setup-payment-info/success"],{queryParams:{type:"stripe"}})},2e3)},error:e=>{this.isLoading=!1,this.needsCompletion=!0,this.error="ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0643\u0645\u0627\u0644 \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628":"Error completing account setup",this.handleServerErrors(e)}})}completeAccount(){this.paymentService.getStripeLink().subscribe({next:e=>{e?.data?.stripe_account_link?.url?window.location.href=e.data.stripe_account_link.url:this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 \u0627\u0644\u062d\u0633\u0627\u0628":"Account link not found")},error:e=>{this.handleServerErrors(e)}})}performReturn(){this.isLoading=!0,this.error="",this.completeStripeOnboarding()}performRefresh(){this.isLoading=!0,this.error="",this.performStripeStatusCheck()}goToSetup(){this.router.navigate(["/setup-payment-info"])}handleServerErrors(e){if(e.error&&e.error.errors){const r=e.error.errors;for(const n in r)r.hasOwnProperty(n)&&this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",r[n].join(", "))}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.")}static \u0275fac=function(r){return new(r||o)(t.rXU(t.zZn),t.rXU(g.Ix),t.rXU(g.nX),t.rXU(h.W))};static \u0275cmp=t.VBU({type:o,selectors:[["app-stripe-callback"]],features:[t.Vt3],decls:9,vars:6,consts:[[3,"title","subtitle"],[1,"container-fluid","gradient-background",2,"padding-top","50px"],[1,"row","justify-content-center"],[1,"col-lg-6","col-xl-5"],[1,"card"],["class","card-body text-center py-10",4,"ngIf"],["class","card-body text-center py-8",4,"ngIf"],[1,"card-body","text-center","py-10"],[1,"loading-container"],["role","status",1,"spinner-border","text-info","mb-4"],[1,"visually-hidden"],[1,"mb-3"],[1,"text-muted"],[1,"success-container"],[1,"success-icon","mb-4"],[1,"fas","fa-check-circle","text-success"],[1,"text-success","mb-3"],[1,"text-muted","mb-4"],["role","status",1,"spinner-border","spinner-border-sm","text-info"],[1,"card-body","text-center","py-8"],[1,"completion-container"],[1,"warning-icon","mb-4"],[1,"fas","fa-exclamation-triangle","text-warning"],[1,"text-warning","mb-3"],[1,"text-muted","mb-6"],[1,"d-flex","justify-content-center","gap-3"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-info",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"error-container"],[1,"error-icon","mb-4"],[1,"fas","fa-times-circle","text-danger"],[1,"text-danger","mb-3"],["type","button",1,"btn","btn-info",3,"click"]],template:function(r,n){1&r&&(t.nrm(0,"app-payment-header",0),t.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.DNE(5,K,9,2,"div",5)(6,H,11,2,"div",5)(7,Z,16,10,"div",6)(8,Q,13,4,"div",6),t.k0s()()()()),2&r&&(t.Y8G("title","ar"===n.lang?"\u0645\u0639\u0627\u0644\u062c Stripe":"Stripe Processing")("subtitle","ar"===n.lang?"\u062c\u0627\u0631\u064a \u0645\u0639\u0627\u0644\u062c\u0629 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643":"Processing your Stripe account setup"),t.R7$(5),t.Y8G("ngIf",n.isLoading),t.R7$(),t.Y8G("ngIf",n.isCompleted&&!n.isLoading),t.R7$(),t.Y8G("ngIf",n.needsCompletion&&!n.isLoading),t.R7$(),t.Y8G("ngIf",n.error&&!n.isLoading))},dependencies:[l.bT,y,l.Jj],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .1rem 1rem #00000012}.loading-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.loading-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#181c32;font-weight:600}.success-container[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#50cd89!important}.success-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#50cd89!important;font-weight:600}.completion-container[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ffc700!important}.completion-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#ffc700!important;font-weight:600}.error-container[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#f1416c!important}.error-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#f1416c!important;font-weight:600}.btn-info[_ngcontent-%COMP%]{background-color:#0978b9;border-color:#0978b9}.btn-info[_ngcontent-%COMP%]:hover{background-color:#085a8a;border-color:#085a8a}.btn-info[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-light[_ngcontent-%COMP%]{background-color:#f5f8fa;border-color:#e4e6ef;color:#7e8299}.btn-light[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#d3d6db;color:#5e6278}@media (max-width: 768px){.d-flex.justify-content-center.gap-3[_ngcontent-%COMP%]{flex-direction:column;gap:1rem!important}.d-flex.justify-content-center.gap-3[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.loading-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%], .success-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%], .completion-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}.loading-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .success-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .completion-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem!important}.loading-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .success-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .completion-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem}}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.visually-hidden[_ngcontent-%COMP%]{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}.text-muted[_ngcontent-%COMP%]{color:#a1a5b7!important}.text-success[_ngcontent-%COMP%]{color:#50cd89!important}.text-warning[_ngcontent-%COMP%]{color:#ffc700!important}.text-danger[_ngcontent-%COMP%]{color:#f1416c!important}.text-info[_ngcontent-%COMP%]{color:#0978b9!important}"]})}return o})(),q=(()=>{class o extends f.${route;router;paymentType="";countdown=5;countdownInterval;constructor(e,r,n){super(e),this.route=r,this.router=n}ngOnInit(){this.route.queryParams.subscribe(e=>{this.paymentType=e.type||"manual"})}ngOnDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval),super.ngOnDestroy()}navigateToAddKnowledge(){this.countdownInterval&&clearInterval(this.countdownInterval),this.router.navigate(["/app/add-knowledge/stepper"])}getSuccessMessage(){return"stripe"===this.paymentType?{title:"ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0628\u0646\u062c\u0627\u062d!":"Stripe Account Setup Complete!",subtitle:"ar"===this.lang?"\u0645\u0628\u0631\u0648\u0643! \u062a\u0645 \u0631\u0628\u0637 \u062d\u0633\u0627\u0628\u0643 \u0628\u0646\u062c\u0627\u062d":"Congratulations! Your account has been successfully linked",description:"ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0622\u0646 \u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0645\u0646 \u0627\u0644\u0639\u0645\u0644\u0627\u0621 \u0628\u0637\u0631\u064a\u0642\u0629 \u0622\u0645\u0646\u0629 \u0648\u0645\u0636\u0645\u0648\u0646\u0629.":"Your Stripe account has been successfully set up. You can now receive payments from clients securely and reliably."}:{title:"ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u064a\u062f\u0648\u064a \u0628\u0646\u062c\u0627\u062d!":"Manual Account Setup Complete!",subtitle:"ar"===this.lang?"\u0645\u0628\u0631\u0648\u0643! \u062a\u0645 \u062d\u0641\u0638 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u062d\u0633\u0627\u0628\u0643":"Congratulations! Your account information has been saved",description:"ar"===this.lang?"\u062a\u0645 \u062d\u0641\u0638 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u064a\u062f\u0648\u064a \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u0633\u064a\u062a\u0645 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0644\u062a\u062d\u0648\u064a\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0625\u0644\u064a\u0643.":"Your manual account information has been successfully saved. This information will be used to transfer payments to you."}}getPaymentTypeIcon(){return"stripe"===this.paymentType?"fab fa-stripe-s":"fas fa-university"}getPaymentTypeColor(){return"stripe"===this.paymentType?"text-primary":"text-info"}getCountdownText(){return"ar"===this.lang?`\u0633\u064a\u062a\u0645 \u0627\u0644\u062a\u0648\u062c\u064a\u0647 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u062e\u0644\u0627\u0644 ${this.countdown} \u062b\u0648\u0627\u0646`:`Auto redirecting in ${this.countdown} seconds`}static \u0275fac=function(r){return new(r||o)(t.rXU(t.zZn),t.rXU(g.nX),t.rXU(g.Ix))};static \u0275cmp=t.VBU({type:o,selectors:[["app-payment-success"]],features:[t.Vt3],decls:49,vars:13,consts:[[3,"title","subtitle"],[1,"container-fluid","gradient-background",2,"padding-top","50px"],[1,"row","justify-content-center"],[1,"col-lg-7","col-xl-6"],[1,"card","success-card"],[1,"card-body","text-center","py-10"],[1,"success-animation","mb-6"],["src","https://lottie.host/fe2c060d-6387-4674-a21f-55d6e9a8f0c0/9Aun5jI4fu.json","background","transparent","speed","1","autoplay","","direction","1","mode","normal",2,"width","160px","height","160px"],[1,"payment-type-badge","mb-4"],[1,"badge","badge-light-success","fs-6","px-4","py-2"],[1,"mx-2"],[1,"success-content","mb-8"],[1,"text-success","mb-3","fw-bold"],[1,"text-gray-600","mb-4"],[1,"text-muted","fs-6","mb-0","px-4"],[1,"features-list","mb-8"],[1,"row","g-4"],[1,"col-md-4"],[1,"feature-item"],[1,"feature-icon","mb-3"],[1,"fas","fa-shield-alt","text-success"],[1,"mb-2"],[1,"text-muted","fs-7","mb-0"],[1,"fas","fa-bolt","text-warning"],[1,"fas","fa-headset","text-info"],[1,"action-buttons"],["type","button",1,"btn","btn-success","btn-lg","me-3","mb-3",3,"click"],[1,"fas","fa-plus","me-2"]],template:function(r,n){1&r&&(t.nrm(0,"app-payment-header",0),t.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.nrm(7,"lottie-player",7),t.k0s(),t.j41(8,"div",8)(9,"span",9)(10,"span",10),t.EFF(11),t.k0s()()(),t.j41(12,"div",11)(13,"h2",12),t.EFF(14),t.k0s(),t.j41(15,"h5",13),t.EFF(16),t.k0s(),t.j41(17,"p",14),t.EFF(18),t.k0s()(),t.j41(19,"div",15)(20,"div",16)(21,"div",17)(22,"div",18)(23,"div",19),t.nrm(24,"i",20),t.k0s(),t.j41(25,"h6",21),t.EFF(26),t.k0s(),t.j41(27,"p",22),t.EFF(28),t.k0s()()(),t.j41(29,"div",17)(30,"div",18)(31,"div",19),t.nrm(32,"i",23),t.k0s(),t.j41(33,"h6",21),t.EFF(34),t.k0s(),t.j41(35,"p",22),t.EFF(36),t.k0s()()(),t.j41(37,"div",17)(38,"div",18)(39,"div",19),t.nrm(40,"i",24),t.k0s(),t.j41(41,"h6",21),t.EFF(42),t.k0s(),t.j41(43,"p",22),t.EFF(44),t.k0s()()()()(),t.j41(45,"div",25)(46,"button",26),t.bIt("click",function(){return n.navigateToAddKnowledge()}),t.nrm(47,"i",27),t.EFF(48),t.k0s()()()()()()()),2&r&&(t.Y8G("title","ar"===n.lang?"\u062a\u0645 \u0627\u0644\u0625\u0639\u062f\u0627\u062f \u0628\u0646\u062c\u0627\u062d!":"Setup Complete!")("subtitle","ar"===n.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u0645\u062d\u0641\u0638\u0629 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d":"Your payment wallet has been successfully set up"),t.R7$(11),t.SpI(" ","stripe"===n.paymentType?"Stripe":"ar"===n.lang?"\u062d\u0633\u0627\u0628 \u064a\u062f\u0648\u064a":"Manual Account"," "),t.R7$(3),t.SpI(" ",n.getSuccessMessage().title," "),t.R7$(2),t.SpI(" ",n.getSuccessMessage().subtitle," "),t.R7$(2),t.SpI(" ",n.getSuccessMessage().description," "),t.R7$(8),t.SpI(" ","ar"===n.lang?"\u0622\u0645\u0646 \u0648\u0645\u0636\u0645\u0648\u0646":"Secure & Safe"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u0643 \u0645\u062d\u0645\u064a\u0629":"Your information is protected"," "),t.R7$(6),t.SpI(" ","ar"===n.lang?"\u0633\u0631\u064a\u0639 \u0648\u0641\u0639\u0627\u0644":"Fast & Efficient"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0627\u0644\u062c\u0629 \u0633\u0631\u064a\u0639\u0629":"Quick processing"," "),t.R7$(6),t.SpI(" ","ar"===n.lang?"\u062f\u0639\u0645 \u0639\u0644\u0649 \u0645\u062f\u0627\u0631 \u0627\u0644\u0633\u0627\u0639\u0629":"24/7 Support"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0646\u062d\u0646 \u0647\u0646\u0627 \u0644\u0645\u0633\u0627\u0639\u062f\u062a\u0643":"We are here to help"," "),t.R7$(4),t.SpI(" ","ar"===n.lang?"\u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0631\u0641\u0629 \u062c\u062f\u064a\u062f\u0629":"Add Knowledge"," "))},dependencies:[y],styles:[".success-card[_ngcontent-%COMP%]{border:none;box-shadow:0 .2rem 2rem #50cd8926;border-top:4px solid #50cd89}.success-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:3rem 2rem}@keyframes _ngcontent-%COMP%_fadeUp{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}.success-animation[_ngcontent-%COMP%]{position:relative;display:inline-block;animation:_ngcontent-%COMP%_fadeUp .6s ease-out both}.success-animation[_ngcontent-%COMP%]   lottie-player[_ngcontent-%COMP%]{margin:0 auto;display:block}.payment-type-badge[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{border:1px solid rgba(80,205,137,.3)}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.success-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:500}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{padding:1rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:600;color:#181c32}.action-buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background-color:#50cd89;border-color:#50cd89;padding:.75rem 2rem}.action-buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover{background-color:#47b881;border-color:#47b881}.action-buttons[_ngcontent-%COMP%]   .countdown-text[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 768px){.success-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem 1.5rem}.success-animation[_ngcontent-%COMP%]   lottie-player[_ngcontent-%COMP%]{width:120px!important;height:120px!important}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{margin-bottom:1rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.action-buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{width:100%;margin-right:0!important}}.text-success[_ngcontent-%COMP%]{color:#50cd89!important}.text-gray-600[_ngcontent-%COMP%]{color:#7e8299!important}.text-muted[_ngcontent-%COMP%]{color:#a1a5b7!important}.text-primary[_ngcontent-%COMP%]{color:#635bff!important}.text-info[_ngcontent-%COMP%]{color:#0978b9!important}.text-warning[_ngcontent-%COMP%]{color:#ffc700!important}"]})}return o})();var x=u(7673),k=u(6354),S=u(9437);let v=(()=>{class o{paymentService;router;constructor(e,r){this.paymentService=e,this.router=r}canActivate(e,r){const n=this.getExpectedTypeFromRoute(r.url);return n?this.paymentService.getStripeAccountDetails().pipe((0,k.T)(a=>a.data.type===n||(this.router.navigate(["/setup-payment-info"]),!1)),(0,S.W)(()=>this.paymentService.getManualAccountDetails().pipe((0,k.T)(a=>a.data.type===n||(this.router.navigate(["/setup-payment-info"]),!1)),(0,S.W)(()=>(this.router.navigate(["/setup-payment-info"]),(0,x.of)(!1)))))):(0,x.of)(!0)}getExpectedTypeFromRoute(e){return e.includes("manual-account")?"manual":e.includes("stripe-callback")?"stripe":null}static \u0275fac=function(r){return new(r||o)(t.KVO(h.W),t.KVO(g.Ix))};static \u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),tt=(()=>{class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=t.$C({type:o});static \u0275inj=t.G2t({imports:[l.MD,s.YN,s.X1,g.iI.forChild([{path:"",component:N},{path:"manual-account",component:W,canActivate:[v]},{path:"stripe-callback",component:O,canActivate:[v]},{path:"stripe-callback/return",component:O,canActivate:[v],data:{action:"return"}},{path:"stripe-callback/refresh",component:O,canActivate:[v],data:{action:"refresh"}},{path:"success",component:q}])]})}return o})()}}]);