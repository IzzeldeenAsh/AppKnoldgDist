"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[1004],{8011:(C,u,o)=>{o.r(u),o.d(u,{WebsiteSettingsModule:()=>L});var n=o(177),g=o(4582),m=o(1141),c=o(2242),h=o(9998),r=o(9417),d=o(491),s=o(5779),p=o(2791),t=o(4438),v=o(1626),S=o(8810),b=o(9437);let y=(()=>{class i{http;baseUrl="https://api.knoldg.com/api/admin/setting";authLocalStorageKey="foresighta-creds";currentLang="en";constructor(e){this.http=e}getAuthToken(){try{const e=localStorage.getItem(this.authLocalStorageKey);if(e)return JSON.parse(e).authToken||null}catch(e){console.error("Error parsing auth data from localStorage:",e)}return null}handleError(e){return(0,S.$)(e)}getConfiguration(){const e=this.getAuthToken(),a=new v.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...e?{Authorization:`Bearer ${e}`}:{}});return this.http.get(`${this.baseUrl}/configuration`,{headers:a}).pipe((0,b.W)(l=>this.handleError(l)))}updateConfiguration(e,a){const l=this.getAuthToken(),_=new v.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...l?{Authorization:`Bearer ${l}`}:{}});return this.http.put(`${this.baseUrl}/configuration/${e}`,a,{headers:_}).pipe((0,b.W)(x=>this.handleError(x)))}static \u0275fac=function(a){return new(a||i)(t.KVO(v.Qq))};static \u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function I(i,f){1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"Name"),t.k0s(),t.j41(3,"th"),t.EFF(4,"URL/Value"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Actions"),t.k0s()())}function E(i,f){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.value)}}function k(i,f){if(1&i){const e=t.RV6();t.j41(0,"form",10),t.bIt("ngSubmit",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.saveSocial())}),t.j41(1,"div",11),t.nrm(2,"input",12),t.k0s()()}if(2&i){const e=t.XpG(2);t.Y8G("formGroup",e.editForm)}}function M(i,f){if(1&i){const e=t.RV6();t.j41(0,"div",13)(1,"button",14),t.bIt("click",function(){t.eBV(e);const l=t.XpG().$implicit,_=t.XpG();return t.Njj(_.editSocial(l))}),t.k0s()()}}function T(i,f){if(1&i){const e=t.RV6();t.j41(0,"div",13)(1,"button",15),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.saveSocial())}),t.k0s(),t.j41(2,"button",16),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.cancelEdit())}),t.k0s()()}}function j(i,f){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"titlecase"),t.k0s(),t.j41(4,"td"),t.DNE(5,E,2,1,"span",7)(6,k,3,1,"form",8),t.k0s(),t.j41(7,"td"),t.DNE(8,M,2,0,"div",9)(9,T,3,0,"div",9),t.k0s()()),2&i){const e=f.$implicit,a=t.XpG();t.R7$(2),t.JRh(t.bMT(3,5,e.key)),t.R7$(3),t.Y8G("ngIf",a.editingId!==e.id),t.R7$(),t.Y8G("ngIf",a.editingId===e.id),t.R7$(2),t.Y8G("ngIf",a.editingId!==e.id),t.R7$(),t.Y8G("ngIf",a.editingId===e.id)}}function D(i,f){1&i&&(t.j41(0,"tr")(1,"td",17),t.EFF(2,"No social media links found"),t.k0s()())}const F=[{path:"",redirectTo:"socials",pathMatch:"full"},{path:"socials",component:(()=>{class i{websiteSettingsService;fb;messageService;socials=[];loading=!1;editForm;editingId=null;constructor(e,a,l){this.websiteSettingsService=e,this.fb=a,this.messageService=l,this.editForm=this.fb.group({value:["",r.k0.required],type:["social"]})}ngOnInit(){this.loadSocials()}loadSocials(){this.loading=!0,this.websiteSettingsService.getConfiguration().subscribe({next:e=>{e&&e.data&&(this.socials=e.data.filter(a=>"facebook"===a.key||"x"===a.key||"instagram"===a.key||"phone"===a.key||"email"===a.key||"postal"===a.key)),this.loading=!1},error:e=>{console.error("Error loading socials:",e),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load social media links"}),this.loading=!1}})}editSocial(e){this.editingId=e.id,this.editForm.patchValue({value:e.value,type:"social"})}saveSocial(){this.editForm.valid&&this.editingId&&(this.loading=!0,this.websiteSettingsService.updateConfiguration(this.editingId,this.editForm.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Social media link updated successfully"}),this.loadSocials(),this.cancelEdit()},error:e=>{console.error("Error updating social:",e),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update social media link"}),this.loading=!1}}))}cancelEdit(){this.editingId=null,this.editForm.reset({type:"social"})}static \u0275fac=function(a){return new(a||i)(t.rXU(y),t.rXU(r.ok),t.rXU(s.bg))};static \u0275cmp=t.VBU({type:i,selectors:[["app-socials"]],decls:7,vars:2,consts:[[1,"container","mt-4"],["header","Website Social Media Links","styleClass","p-shadow-5"],[1,"card-body"],["styleClass","p-datatable-striped",3,"value","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","btn-group",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"p-inputgroup"],["type","text","pInputText","","formControlName","value","placeholder","Enter URL or value"],[1,"btn-group"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-primary","mr-2",3,"click"],["pButton","","type","button","icon","pi pi-check",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","3",1,"text-center"]],template:function(a,l){1&a&&(t.j41(0,"div",0)(1,"p-card",1)(2,"div",2)(3,"p-table",3),t.DNE(4,I,7,0,"ng-template",4)(5,j,10,7,"ng-template",5)(6,D,3,0,"ng-template",6),t.k0s()()()()),2&a&&(t.R7$(3),t.Y8G("value",l.socials)("loading",l.loading))},dependencies:[n.bT,g.XI,s.Ei,m._f,c.S,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,d.Z,n.PV],styles:[".mr-2[_ngcontent-%COMP%]{margin-right:.5rem}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem}.p-button-rounded[_ngcontent-%COMP%]{margin-right:.25rem}[_nghost-%COMP%]     .p-card{box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px}"]})}return i})()}];let B=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[p.iI.forChild(F),p.iI]})}return i})(),L=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({providers:[s.bg],imports:[n.MD,B,g.bG,m.tm,c.u,h.MB,r.YN,r.X1,d.D]})}return i})()},8439:(C,u,o)=>{o.d(u,{R:()=>m});var n=o(4438),g=o(461);let m=(()=>{class c extends g.h{static \u0275fac=(()=>{let r;return function(s){return(r||(r=n.xGo(c)))(s||c)}})();static \u0275cmp=n.VBU({type:c,selectors:[["AngleDownIcon"]],standalone:!0,features:[n.Vt3,n.aNF],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z","fill","currentColor"]],template:function(d,s){1&d&&(n.qSk(),n.j41(0,"svg",0),n.nrm(1,"path",1),n.k0s()),2&d&&(n.HbH(s.getClassNames()),n.BMQ("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role))},encapsulation:2})}return c})()},8263:(C,u,o)=>{o.d(u,{D:()=>m});var n=o(4438),g=o(461);let m=(()=>{class c extends g.h{static \u0275fac=(()=>{let r;return function(s){return(r||(r=n.xGo(c)))(s||c)}})();static \u0275cmp=n.VBU({type:c,selectors:[["AngleRightIcon"]],standalone:!0,features:[n.Vt3,n.aNF],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z","fill","currentColor"]],template:function(d,s){1&d&&(n.qSk(),n.j41(0,"svg",0),n.nrm(1,"path",1),n.k0s()),2&d&&(n.HbH(s.getClassNames()),n.BMQ("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role))},encapsulation:2})}return c})()},6018:(C,u,o)=>{o.d(u,{c:()=>c});var n=o(4438),g=o(461),m=o(4420);let c=(()=>{class h extends g.h{pathId;ngOnInit(){this.pathId="url(#"+(0,m._Y)()+")"}static \u0275fac=(()=>{let d;return function(p){return(d||(d=n.xGo(h)))(p||h)}})();static \u0275cmp=n.VBU({type:h,selectors:[["PlusIcon"]],standalone:!0,features:[n.Vt3,n.aNF],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(s,p){1&s&&(n.qSk(),n.j41(0,"svg",0)(1,"g"),n.nrm(2,"path",1),n.k0s(),n.j41(3,"defs")(4,"clipPath",2),n.nrm(5,"rect",3),n.k0s()()()),2&s&&(n.HbH(p.getClassNames()),n.BMQ("aria-label",p.ariaLabel)("aria-hidden",p.ariaHidden)("role",p.role),n.R7$(),n.BMQ("clip-path",p.pathId),n.R7$(3),n.Y8G("id",p.pathId))},encapsulation:2})}return h})()}}]);