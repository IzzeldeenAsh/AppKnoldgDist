"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[1168],{1235:(U,O,p)=>{p.r(O),p.d(O,{AccountsModule:()=>nt});var m=p(177),a=p(2791),e=p(4438),F=p(9998);let D=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275cmp=e.VBU({type:i,selectors:[["app-accounts"]],decls:2,vars:0,template:function(s,n){1&s&&e.nrm(0,"p-toast")(1,"router-outlet")},dependencies:[a.n3,F.y8]})}return i})();var M=p(5779),$=p(8032),S=p.n($),f=p(1626),B=p(4412),N=p(8810),b=p(6354),_=p(9437),v=p(980),u=p(779);let G=(()=>{class i{http;translationService;apiUrl="https://api.foresighta.co/api/admin/account/staff/list";createApi="https://api.foresighta.co/api/admin/account/staff";updateDeleteApi="https://api.foresighta.co/api/admin/account/staff";isLoadingSubject=new B.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(t,s){this.http=t,this.translationService=s,this.translationService.onLanguageChange().subscribe(n=>{this.currentLang=n||"en"})}setLoading(t){this.isLoadingSubject.next(t)}handleError(t){let s=[];if(t.error.errors){const n=t.error.errors;for(const r in n)n.hasOwnProperty(r)&&n[r].forEach(P=>{s.push({severity:"error",summary:"Validation Error",detail:P})})}return(0,N.$)(()=>({validationMessages:s}))}getStaffList(){const t=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:t}).pipe((0,b.T)(s=>s.data),(0,_.W)(s=>this.handleError(s)),(0,v.j)(()=>this.setLoading(!1)))}createStaff(t){const s=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(this.createApi,t,{headers:s}).pipe((0,b.T)(n=>n),(0,_.W)(n=>this.handleError(n)),(0,v.j)(()=>this.setLoading(!1)))}updateStaff(t,s){const n=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.put(`${this.updateDeleteApi}/${t}`,s,{headers:n}).pipe((0,b.T)(r=>r),(0,_.W)(r=>this.handleError(r)),(0,v.j)(()=>this.setLoading(!1)))}deleteStaff(t){const s=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.delete(`${this.updateDeleteApi}/${t}`,{headers:s}).pipe((0,b.T)(n=>n),(0,_.W)(n=>this.handleError(n)),(0,v.j)(()=>this.setLoading(!1)))}static \u0275fac=function(s){return new(s||i)(e.KVO(f.Qq),e.KVO(u.L))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var C=p(4127),w=p(7684);let k=(()=>{class i{http;translationService;apiUrl="https://api.foresighta.co/api/admin/account/role/list";userRoleUrl="https://api.foresighta.co/api/admin/account/role/user";rolePermissionsApi="https://api.foresighta.co/api/admin/account/permission/role";syncRolePermissionsApi="https://api.foresighta.co/api/admin/account/permission/role/sync";isLoadingSubject=new B.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(t,s){this.http=t,this.translationService=s,this.translationService.onLanguageChange().subscribe(n=>{this.currentLang=n||"en"})}setLoading(t){this.isLoadingSubject.next(t)}handleError(t){return console.error("Error from service",t),(0,N.$)(()=>t)}getRoles(){const t=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:t}).pipe((0,b.T)(s=>s.data),(0,_.W)(s=>this.handleError(s)),(0,v.j)(()=>this.setLoading(!1)))}getRolePermissions(t){const s=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.get(`${this.rolePermissionsApi}/${t}`,{headers:s}).pipe((0,b.T)(n=>n.data),(0,_.W)(n=>this.handleError(n)),(0,v.j)(()=>this.setLoading(!1)))}updateRolePermissions(t,s){const n=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.put(`${this.syncRolePermissionsApi}/${t}`,s,{headers:n}).pipe((0,b.T)(r=>r),(0,_.W)(r=>this.handleError(r)),(0,v.j)(()=>this.setLoading(!1)))}getRolesByUserId(t){const s=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.get(`${this.userRoleUrl}/${t}`,{headers:s}).pipe((0,b.T)(n=>n.data),(0,_.W)(n=>this.handleError(n)),(0,v.j)(()=>this.setLoading(!1)))}syncRolesForUser(t,s){const n=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.put(`https://api.foresighta.co/api/admin/account/role/user/sync/${t}`,{roles:s},{headers:n}).pipe((0,_.W)(h=>this.handleError(h)),(0,v.j)(()=>this.setLoading(!1)))}static \u0275fac=function(s){return new(s||i)(e.KVO(f.Qq),e.KVO(u.L))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var g=p(5430),L=p(2609),c=p(9417),I=p(4582),T=p(6781),x=p(1579),A=p(2242),V=p(8833),X=p(8542);const K=["dt"],J=()=>({width:"50%"}),H=()=>({height:"4px"}),z=()=>({width:"40rem"}),l=()=>["name","email"];function E(i,d){1&i&&e.nrm(0,"p-progressBar",8),2&i&&e.Aen(e.lJ4(2,H))}function o(i,d){if(1&i){const t=e.RV6();e.j41(0,"p-messages",4),e.mxI("valueChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.messages,n)||(r.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function y(i,d){if(1&i){const t=e.RV6();e.j41(0,"p-messages",4),e.mxI("valueChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.messages,n)||(r.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function j(i,d){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Name"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Email"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Roles"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Action"),e.k0s()())}function R(i,d){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"a",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.editRoles(n))}),e.EFF(9,"Edit Role"),e.k0s(),e.j41(10,"a",50),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.editStaff(n))}),e.j41(11,"i",51),e.nrm(12,"span",52)(13,"span",53),e.k0s()(),e.j41(14,"a",54),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.deleteStaff(n.id))}),e.j41(15,"i",55),e.nrm(16,"span",52)(17,"span",53)(18,"span",56)(19,"span",57)(20,"span",58),e.k0s()()()()}if(2&i){const t=d.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.email),e.R7$(2),e.JRh(t.roles.join(", "))}}function W(i,d){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h1",13),e.EFF(6," Staff "),e.k0s(),e.j41(7,"div",14),e.EFF(8),e.k0s()(),e.j41(9,"div",15)(10,"a",16),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showDialog())}),e.nrm(11,"i",17),e.EFF(12," Create "),e.k0s(),e.j41(13,"p-dialog",18),e.mxI("visibleChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.visible,n)||(r.visible=n),e.Njj(n)}),e.DNE(14,o,1,2,"p-messages",19),e.j41(15,"span",20),e.EFF(16),e.k0s(),e.j41(17,"div",21)(18,"label",22),e.EFF(19,"Name"),e.k0s(),e.j41(20,"div",23)(21,"input",24),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newStaffName,n)||(r.newStaffName=n),e.Njj(n)}),e.k0s()()(),e.j41(22,"div",21)(23,"label",25),e.EFF(24,"Email"),e.k0s(),e.j41(25,"div",23)(26,"input",26),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newStaffEmail,n)||(r.newStaffEmail=n),e.Njj(n)}),e.k0s()()(),e.j41(27,"div",21)(28,"label",27),e.EFF(29,"Department"),e.k0s(),e.j41(30,"div",23)(31,"p-dropdown",28),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newDepartmentId,n)||(r.newDepartmentId=n),e.Njj(n)}),e.k0s()()(),e.j41(32,"div",21)(33,"label",29),e.EFF(34,"Position"),e.k0s(),e.j41(35,"div",23)(36,"p-dropdown",30),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newPositionId,n)||(r.newPositionId=n),e.Njj(n)}),e.k0s()()(),e.j41(37,"div",31)(38,"button",6),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submit())}),e.EFF(39," Save "),e.k0s(),e.j41(40,"button",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.visible=!1)}),e.EFF(41," Cancel "),e.k0s()()()()()()(),e.j41(42,"div",32)(43,"div",33)(44,"div",34)(45,"div",35)(46,"div",36)(47,"div",37),e.nrm(48,"i",38),e.j41(49,"input",39),e.bIt("input",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.applyFilter(n))}),e.k0s()()(),e.j41(50,"div",40)(51,"div",41)(52,"div",42),e.nrm(53,"span",43),e.EFF(54," Selected "),e.k0s(),e.j41(55,"button",44),e.EFF(56," Delete Selected "),e.k0s()()()(),e.j41(57,"div",45),e.DNE(58,y,1,2,"p-messages",19),e.j41(59,"p-table",46,0),e.DNE(61,j,9,0,"ng-template",47)(62,R,21,3,"ng-template",48),e.k0s()()()()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(8),e.SpI("",t.listOfStaff.length," Staff Members"),e.R7$(5),e.Aen(e.lJ4(20,z)),e.Y8G("header",t.isEditMode?"Edit Staff":"Add Staff")("modal",!0),e.R50("visible",t.visible),e.R7$(),e.Y8G("ngIf",t.hasErrorMessage),e.R7$(2),e.SpI("",t.isEditMode?"Edit Staff Details":"Add Staff Details","."),e.R7$(5),e.R50("ngModel",t.newStaffName),e.R7$(5),e.R50("ngModel",t.newStaffEmail),e.R7$(5),e.Y8G("options",t.listOfDepartments),e.R50("ngModel",t.newDepartmentId),e.R7$(5),e.Y8G("options",t.listOfPositions),e.R50("ngModel",t.newPositionId),e.R7$(2),e.Y8G("disabled",!t.newPositionId||!t.newStaffEmail||!t.newStaffName),e.R7$(20),e.Y8G("ngIf",t.hasSuccessMessage),e.R7$(),e.Y8G("value",t.listOfStaff)("paginator",!1)("rows",10)("globalFilterFields",e.lJ4(21,l))}}function ie(i,d){1&i&&e.nrm(0,"p-progressBar",8),2&i&&e.Aen(e.lJ4(2,H))}function ae(i,d){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"p-checkbox",61),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.userRoles,n)||(r.userRoles=n),e.Njj(n)}),e.k0s()(),e.j41(3,"td",62),e.EFF(4),e.k0s()()}if(2&i){const t=d.$implicit,s=e.XpG(2);e.R7$(2),e.Mz_("name","role",t.id,""),e.FS9("label",t.display_name),e.FS9("inputId","role"+t.id),e.Y8G("value",t.id),e.R50("ngModel",s.userRoles),e.R7$(2),e.JRh(t.description)}}function re(i,d){if(1&i&&(e.j41(0,"div")(1,"table",59)(2,"thead")(3,"tr")(4,"th"),e.EFF(5,"Role"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Description"),e.k0s()()(),e.j41(8,"tbody"),e.DNE(9,ae,5,7,"tr",60),e.k0s()()()),2&i){const t=e.XpG();e.R7$(9),e.Y8G("ngForOf",t.listOfRoles)}}function oe(i,d){1&i&&(e.qex(0),e.j41(1,"span",63),e.EFF(2,"Save"),e.k0s(),e.bVm())}function le(i,d){1&i&&(e.qex(0),e.j41(1,"span",64),e.EFF(2," Please wait "),e.nrm(3,"span",65),e.k0s(),e.bVm())}let ce=(()=>{class i{staffService;departmentsService;positionsService;rolesService;messageService;cdr;messages=[];unsubscribe=[];listOfStaff=[];listOfDepartments=[];listOfPositions=[];isEditMode=!1;isLoading$;selectedStaffId=null;visible=!1;newStaffName="";newStaffEmail="";newDepartmentId=null;newPositionId=null;rolesDialogVisible=!1;listOfRoles=[];userRoles=[];table;paginator={page:1,pageSize:10,pageSizes:[10,20,30,50,100],total:0};constructor(t,s,n,r,h,P){this.staffService=t,this.departmentsService=s,this.positionsService=n,this.rolesService=r,this.messageService=h,this.cdr=P,this.isLoading$=this.staffService.isLoading$}ngOnInit(){this.getStaffList(),this.getDepartmentsList(),this.getPositionsList()}showDialog(){this.visible=!0,this.newStaffName="",this.newStaffEmail="",this.newDepartmentId=null,this.newPositionId=null,this.selectedStaffId=null,this.isEditMode=!1}editStaff(t){this.visible=!0,this.newStaffName=t.name,this.newStaffEmail=t.email,this.newDepartmentId=t.department?.id||null,this.newPositionId=t.position?.id||null,this.selectedStaffId=t.id,this.isEditMode=!0}editRoles(t){this.selectedStaffId=t.id,this.rolesDialogVisible=!0,this.userRoles=[],this.getAllRoles(),this.getUserRoles(t.id)}handleServerErrors(t){if(this.messages=[],t.error&&t.error.errors){const s=t.error.errors;for(const n in s)s.hasOwnProperty(n)&&this.messages.push({severity:"error",summary:"",detail:s[n].join(", ")})}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}getStaffList(){const t=this.staffService.getStaffList().subscribe({next:s=>{this.listOfStaff=s,this.cdr.detectChanges()},error:s=>{this.handleServerErrors(s)}});this.unsubscribe.push(t)}getDepartmentsList(){const t=this.departmentsService.getDepartments().subscribe({next:s=>{this.listOfDepartments=s,this.cdr.detectChanges()},error:s=>{console.error("Failed to fetch departments",s)}});this.unsubscribe.push(t)}getPositionsList(){const t=this.positionsService.getPositions(this.paginator.page,this.paginator.pageSize).subscribe({next:s=>{this.listOfPositions=s.data,this.paginator.total=s.meta.total,this.cdr.detectChanges()},error:s=>{console.error("Failed to fetch positions",s)}});this.unsubscribe.push(t)}applyFilter(t){const s=t.target.value.trim().toLowerCase();this.table.filterGlobal(s,"contains")}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}submit(){this.messages=[];const t={name:this.newStaffName,email:this.newStaffEmail,department_id:this.newDepartmentId?.toString(),position_id:this.newPositionId?.toString()},n=(this.selectedStaffId?this.staffService.updateStaff(this.selectedStaffId,t):this.staffService.createStaff(t)).subscribe({next:r=>{this.messages.push({severity:"success",summary:"Success",detail:`Staff ${this.selectedStaffId?"updated":"created"} successfully.`}),this.getStaffList(),this.visible=!1},error:r=>{this.handleServerErrors(r)}});this.unsubscribe.push(n)}deleteStaff(t){this.messages=[],S().fire({title:"Are you sure?",text:"Do you want to delete this staff? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{if(s.isConfirmed){const n=this.staffService.deleteStaff(t).subscribe({next:r=>{this.messages.push({severity:"success",summary:"Success",detail:"Staff deleted successfully."}),this.getStaffList()},error:r=>{this.handleServerErrors(r)}});this.unsubscribe.push(n)}})}getAllRoles(){const t=this.rolesService.getRoles().subscribe({next:s=>{this.listOfRoles=s,this.cdr.detectChanges()},error:s=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to fetch roles."}),console.error("Error fetching roles",s)}});this.unsubscribe.push(t)}getUserRoles(t){const s=this.rolesService.getRolesByUserId(t).subscribe({next:n=>{this.userRoles=n.map(r=>r.id),this.cdr.detectChanges()},error:n=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to fetch user roles."}),console.error("Error fetching user roles",n)}});this.unsubscribe.push(s)}submitRoles(){if(null!==this.selectedStaffId){this.messageService.clear();const t=this.rolesService.syncRolesForUser(this.selectedStaffId,this.userRoles).subscribe({next:s=>{this.messages.push({severity:"success",summary:"Success",detail:"Roles updated successfully."}),this.rolesDialogVisible=!1,this.getStaffList()},error:s=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update roles."}),console.error("Error updating roles",s)}});this.unsubscribe.push(t)}}pageChange(t){this.paginator.page=t,this.getPositionsList()}pageSizeChange(t){const s=t.target;if(s){const n=parseInt(s.value,10);this.paginator.pageSize=n,this.paginator.page=1,this.getPositionsList()}}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}static \u0275fac=function(s){return new(s||i)(e.rXU(G),e.rXU(C.f),e.rXU(w.c),e.rXU(k),e.rXU(M.bg),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:i,selectors:[["app-staff"]],viewQuery:function(s,n){if(1&s&&e.GBs(K,5),2&s){let r;e.mGM(r=e.lsd())&&(n.table=r.first)}},features:[e.Jv_([M.bg])],decls:18,vars:26,consts:[["dt",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["header","Edit Roles",3,"visibleChange","visible","modal"],[3,"valueChange","value","enableService"],[1,"d-flex","justify-content-end","gap-2","mt-3"],[1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["mode","indeterminate"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"d-flex","align-items-center","gap-2","gap-lg-3"],[1,"btn","btn-sm","btn-flex","btn-primary",3,"click"],[1,"ki-outline","ki-plus","text-white","fs-4"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[1,"mb-3","row"],["for","staffName",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","staffName","name","staffName","autocomplete","off",1,"w-100",3,"ngModelChange","ngModel"],["for","staffEmail",1,"col-sm-3","col-form-label"],["pInputText","","id","staffEmail","name","staffEmail","autocomplete","off",1,"w-100",3,"ngModelChange","ngModel"],["for","department",1,"col-sm-3","col-form-label"],["appendTo","body","id","department","optionLabel","name","optionValue","id","placeholder","Select Department",1,"w-100","overflow-visible",3,"ngModelChange","options","ngModel"],["for","position",1,"col-sm-3","col-form-label"],["appendTo","body","id","position","optionLabel","name","optionValue","id","placeholder","Select Position",1,"w-100","overflow-visible",3,"ngModelChange","options","ngModel"],[1,"d-flex","justify-content-end","gap-2"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"pi","pi-search","fs-3","position-absolute","ms-5"],["type","text","pInputText","","placeholder","Search Staff",1,"form-control","form-control-solid","w-250px","ps-12",3,"input"],[1,"card-toolbar"],["data-kt-customer-table-toolbar","selected",1,"d-flex","justify-content-end","align-items-center","d-none"],[1,"fw-bold","me-5"],["data-kt-customer-table-select","selected_count",1,"me-2"],["type","button","data-kt-customer-table-select","delete_selected",1,"btn","btn-danger"],[1,"card-body","pt-0"],[1,"table-p",3,"value","paginator","rows","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pTooltip","Edit Roles",1,"mx-1","btn","btn-sm","btn-light","bg-hover-primary",3,"click"],["pTooltip","Edit Staff","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],[1,"path1"],[1,"path2"],["pTooltip","Delete Staff","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],[1,"table"],[4,"ngFor","ngForOf"],[3,"ngModelChange","name","value","label","ngModel","inputId"],[1,"text-muted"],[1,"indicator-label"],[1,"indicator-progress",2,"display","block"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(s,n){1&s&&(e.DNE(0,E,1,3,"p-progressBar",1),e.nI1(1,"async"),e.DNE(2,W,63,22,"ng-container",2),e.nI1(3,"async"),e.j41(4,"p-dialog",3),e.mxI("visibleChange",function(h){return e.DH7(n.rolesDialogVisible,h)||(n.rolesDialogVisible=h),h}),e.DNE(5,ie,1,3,"p-progressBar",1),e.nI1(6,"async"),e.j41(7,"p-messages",4),e.mxI("valueChange",function(h){return e.DH7(n.messages,h)||(n.messages=h),h}),e.k0s(),e.DNE(8,re,10,1,"div",2),e.j41(9,"div",5)(10,"button",6),e.nI1(11,"async"),e.bIt("click",function(){return n.submitRoles()}),e.DNE(12,oe,3,0,"ng-container",2),e.nI1(13,"async"),e.DNE(14,le,4,0,"ng-container",2),e.nI1(15,"async"),e.k0s(),e.j41(16,"button",7),e.bIt("click",function(){return n.rolesDialogVisible=!1}),e.EFF(17," Cancel "),e.k0s()()()),2&s&&(e.Y8G("ngIf",e.bMT(1,13,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(3,15,n.isLoading$)),e.R7$(2),e.Aen(e.lJ4(25,J)),e.R50("visible",n.rolesDialogVisible),e.Y8G("modal",!0),e.R7$(),e.Y8G("ngIf",e.bMT(6,17,n.isLoading$)),e.R7$(2),e.R50("value",n.messages),e.Y8G("enableService",!1),e.R7$(),e.Y8G("ngIf",n.listOfRoles&&n.userRoles),e.R7$(2),e.Y8G("disabled",e.bMT(11,19,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(13,21,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(15,23,n.isLoading$)))},dependencies:[m.Sq,m.bT,g.Sc,M.Ei,L.B,c.me,c.BC,I.XI,T.l,x.z,A.S,c.vS,V.ms,X.m,m.Jj]})}return i})(),te=(()=>{class i{http;translationService;apiUrl="https://api.foresighta.co/api/admin/account/permission/list";isLoadingSubject=new B.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(t,s){this.http=t,this.translationService=s,this.translationService.onLanguageChange().subscribe(n=>{this.currentLang=n||"en"})}setLoading(t){this.isLoadingSubject.next(t)}handleError(t){return console.error("Error from service",t),(0,N.$)(()=>t)}getPermissions(){const t=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:t}).pipe((0,b.T)(s=>s.data),(0,_.W)(s=>this.handleError(s)),(0,v.j)(()=>this.setLoading(!1)))}static \u0275fac=function(s){return new(s||i)(e.KVO(f.Qq),e.KVO(u.L))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Q=p(2100);const pe=()=>({height:"4px"});function de(i,d){1&i&&e.nrm(0,"p-progressBar",2),2&i&&e.Aen(e.lJ4(2,pe))}function me(i,d){if(1&i){const t=e.RV6();e.j41(0,"p-checkbox",8),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.selectedPermissions,n)||(r.selectedPermissions=n),e.Njj(n)}),e.k0s()}if(2&i){const t=d.$implicit,s=e.XpG(2);e.FS9("label",t.display_name),e.Y8G("name","permission"+t.id)("value",t.id),e.R50("ngModel",s.selectedPermissions)}}function ge(i,d){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"p"),e.EFF(4,"Select permissions for this role:"),e.k0s(),e.j41(5,"div",3),e.DNE(6,me,1,4,"p-checkbox",4),e.k0s(),e.j41(7,"div",5)(8,"button",6),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.save())}),e.EFF(9," Save "),e.k0s(),e.j41(10,"button",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancel())}),e.EFF(11," Cancel "),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.JRh(t.roleName),e.R7$(4),e.Y8G("ngForOf",t.permissions),e.R7$(2),e.Y8G("disabled",t.isLoading)}}let he=(()=>{class i{permissionsService;rolesService;config;ref;messageService;roleId;roleName;permissions=[];selectedPermissions=[];isLoading=!1;constructor(t,s,n,r,h){this.permissionsService=t,this.rolesService=s,this.config=n,this.ref=r,this.messageService=h,this.roleId=this.config.data.roleId,this.roleName=this.config.data.roleName}ngOnInit(){this.loadPermissions()}loadPermissions(){this.isLoading=!0,this.permissionsService.getPermissions().subscribe({next:t=>{this.permissions=t,this.rolesService.getRolePermissions(this.roleId).subscribe({next:s=>{this.selectedPermissions=s.map(n=>n.id),this.isLoading=!1},error:()=>{this.isLoading=!1}})},error:()=>{this.isLoading=!1}})}save(){this.isLoading=!0,this.rolesService.updateRolePermissions(this.roleId,{permissions:this.selectedPermissions}).subscribe({next:()=>{this.isLoading=!1,this.ref.close(!0)},error:()=>{this.isLoading=!1}})}cancel(){this.ref.close()}static \u0275fac=function(s){return new(s||i)(e.rXU(te),e.rXU(k),e.rXU(Q.sb),e.rXU(Q.Pw),e.rXU(M.bg))};static \u0275cmp=e.VBU({type:i,selectors:[["app-edit-permissions-dialog"]],decls:2,vars:2,consts:[["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],[1,"permissions-list"],["class","pt-2",3,"name","value","label","ngModel","ngModelChange",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","gap-2","mt-3"],[1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"pt-2",3,"ngModelChange","name","value","label","ngModel"]],template:function(s,n){1&s&&e.DNE(0,de,1,3,"p-progressBar",0)(1,ge,12,3,"div",1),2&s&&(e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading))},dependencies:[m.Sq,m.bT,g.Sc,c.BC,x.z,c.vS],styles:[".permissions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:400px;overflow-y:auto}"]})}return i})(),ue=(()=>{class i{http;translationService;apiUrl="https://api.foresighta.co/api/admin/account/role/list";createApi="https://api.foresighta.co/api/admin/account/role";updateDeleteApi="https://api.foresighta.co/api/admin/account/role";isLoadingSubject=new B.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(t,s){this.http=t,this.translationService=s,this.translationService.onLanguageChange().subscribe(n=>{this.currentLang=n||"en"})}setLoading(t){this.isLoadingSubject.next(t)}handleError(t){return(0,N.$)(t)}getRoles(){const t=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:t}).pipe((0,b.T)(s=>s.data),(0,_.W)(s=>this.handleError(s)),(0,v.j)(()=>this.setLoading(!1)))}createRole(t){const s=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(this.createApi,t,{headers:s}).pipe((0,b.T)(n=>n),(0,_.W)(n=>this.handleError(n)),(0,v.j)(()=>this.setLoading(!1)))}updateRole(t,s){const n=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.put(`${this.updateDeleteApi}/${t}`,s,{headers:n}).pipe((0,b.T)(r=>r),(0,_.W)(r=>this.handleError(r)),(0,v.j)(()=>this.setLoading(!1)))}deleteRole(t){const s=new f.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.delete(`${this.updateDeleteApi}/${t}`,{headers:s}).pipe((0,b.T)(n=>n),(0,_.W)(n=>this.handleError(n)),(0,v.j)(()=>this.setLoading(!1)))}static \u0275fac=function(s){return new(s||i)(e.KVO(f.Qq),e.KVO(u.L))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var se=p(4827);const fe=()=>({height:"4px"});function _e(i,d){1&i&&e.nrm(0,"p-progressBar",10),2&i&&e.Aen(e.lJ4(2,fe))}function ve(i,d){1&i&&e.nrm(0,"p-chip",34),2&i&&e.Y8G("label",d.$implicit.name)}function be(i,d){if(1&i&&(e.j41(0,"div",30)(1,"div",31),e.EFF(2,"Permissions"),e.k0s(),e.j41(3,"div",32),e.DNE(4,ve,1,1,"p-chip",33),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.Y8G("ngForOf",t.permissions)}}function ye(i,d){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17)(6,"div",18)(7,"div",19)(8,"span",20),e.nrm(9,"img",21),e.k0s()(),e.j41(10,"div",22)(11,"div",23),e.EFF(12),e.k0s(),e.j41(13,"span",24),e.EFF(14),e.k0s()()()()(),e.DNE(15,be,5,1,"div",25),e.k0s(),e.j41(16,"div",26),e.nrm(17,"hr",27),e.j41(18,"div",28)(19,"a",29),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.openEditPermissionsDialog(n))}),e.EFF(20,"Sync"),e.k0s()()()()(),e.bVm()}if(2&i){const t=d.$implicit;e.R7$(12),e.SpI(" ",t.display_name," "),e.R7$(2),e.JRh(t.description),e.R7$(),e.Y8G("ngIf",t.permissions&&t.permissions.length>0)}}function Ie(i,d){if(1&i&&(e.qex(0),e.j41(1,"div",11),e.DNE(2,ye,21,3,"ng-container",12),e.k0s(),e.bVm()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.roles)}}let Ce=(()=>{class i{rolesService;fb;messageService;dialogService;roles=[];isLoading$;unsubscribe=[];roleForm;messages=[];isEditMode=!1;selectedRoleId=null;visible=!1;constructor(t,s,n,r){this.rolesService=t,this.fb=s,this.messageService=n,this.dialogService=r,this.isLoading$=this.rolesService.isLoading$}ngOnInit(){this.initializeForm(),this.getRolesList()}initializeForm(){this.roleForm=this.fb.group({displayName:["",c.k0.required],description:["",c.k0.required]})}openEditPermissionsDialog(t){this.dialogService.open(he,{header:"Edit Permissions",width:"50%",data:{roleId:t.id,roleName:t.display_name}}).onClose.subscribe(n=>{n&&(this.messageService.add({severity:"success",summary:"Success",detail:"Permissions updated successfully."}),this.getRolesList())})}getRolesList(){const t=this.rolesService.getRoles().subscribe({next:s=>{this.roles=s},error:s=>{this.handleServerErrors(s)}});this.unsubscribe.push(t)}showDialog(){this.visible=!0,this.selectedRoleId=null,this.isEditMode=!1,this.roleForm.reset()}editRole(t){this.visible=!0,this.selectedRoleId=t.id,this.isEditMode=!0,this.roleForm.patchValue({displayName:t.display_name,description:t.description})}submit(){if(this.messages=[],this.roleForm.invalid)return void this.roleForm.markAllAsTouched();const t=this.roleForm.value;if(this.selectedRoleId){const s=this.rolesService.updateRole(this.selectedRoleId,{display_name:t.displayName,description:t.description}).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"Success",detail:"Role updated successfully."}),this.getRolesList(),this.visible=!1,this.roleForm.reset()},error:n=>{this.handleServerErrors(n)}});this.unsubscribe.push(s)}else{const s=this.rolesService.createRole({display_name:t.displayName,description:t.description}).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"Success",detail:"Role created successfully."}),this.getRolesList(),this.visible=!1,this.roleForm.reset()},error:n=>{this.handleServerErrors(n)}});this.unsubscribe.push(s)}}deleteRole(t){S().fire({title:"Are you sure?",text:"Do you want to delete this role? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{if(s.isConfirmed){const n=this.rolesService.deleteRole(t).subscribe({next:r=>{this.messageService.add({severity:"success",summary:"Success",detail:"Role deleted successfully."}),this.getRolesList()},error:r=>{this.handleServerErrors(r)}});this.unsubscribe.push(n)}})}handleServerErrors(t){if(t.error&&t.error.errors){const s=t.error.errors,n={display_name:"displayName",description:"description"};for(const r in s)if(s.hasOwnProperty(r)){const h=s[r],P=n[r];if(P){const Y=this.roleForm.get(P);Y&&(Y.setErrors({serverError:h[0]}),Y.markAsTouched())}else this.messages.push({severity:"error",summary:"",detail:h.join(", ")})}}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}onCancel(){this.visible=!1,this.roleForm.reset()}get displayName(){return this.roleForm.get("displayName")}get description(){return this.roleForm.get("description")}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}static \u0275fac=function(s){return new(s||i)(e.rXU(ue),e.rXU(c.ok),e.rXU(M.bg),e.rXU(Q.o3))};static \u0275cmp=e.VBU({type:i,selectors:[["app-roles"]],decls:14,vars:7,consts:[["mode","indeterminate",3,"style",4,"ngIf"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[4,"ngIf"],["mode","indeterminate"],[1,"row","g-5","g-xl-8"],[4,"ngFor","ngForOf"],[1,"col-lg-6","col-xl-4"],[1,"card","h-100","d-flex","flex-column"],[1,"card-body","d-flex","flex-column","flex-grow-1"],[1,"d-flex","flex-stack"],[1,"d-flex","align-items-center","justify-content-between","w-100"],[1,"d-flex","align-items-center"],[1,"symbol","symbol-60px","me-5"],[1,"symbol-label","bg-danger-light"],["src","./assets/media/icons/duotune/general/role.png","alt","",1,"h-50","align-self-center"],[1,"d-flex","flex-column","flex-grow-1","my-lg-0","my-2","pr-3"],[1,"text-gray-900","fw-bold","text-hover-primary","fs-5"],[1,"text-muted","fw-bold"],["class","d-flex flex-column mt-10 flex-grow-1",4,"ngIf"],[1,"bottom","mt-auto","pb-4"],[1,"text-gray-400"],[1,"text-center"],[1,"btn","btn-sm","btn-light","bg-hover-primary",3,"click"],[1,"d-flex","flex-column","mt-10","flex-grow-1"],[1,"text-gray-900","me-2","fw-bold","pb-4"],[1,"d-flex","flex-wrap","gap-2"],[3,"label",4,"ngFor","ngForOf"],[3,"label"]],template:function(s,n){1&s&&(e.DNE(0,_e,1,3,"p-progressBar",0),e.nI1(1,"async"),e.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h1",5),e.EFF(7," Roles List "),e.k0s(),e.j41(8,"div",6),e.EFF(9),e.k0s()()()()(),e.j41(10,"div",7)(11,"div",8),e.DNE(12,Ie,3,1,"ng-container",9),e.nI1(13,"async"),e.k0s()()),2&s&&(e.Y8G("ngIf",e.bMT(1,3,n.isLoading$)),e.R7$(9),e.SpI(" ",n.roles.length," Roles "),e.R7$(3),e.Y8G("ngIf",!1===e.bMT(13,5,n.isLoading$)))},dependencies:[m.Sq,m.bT,se.v,x.z,m.Jj],styles:[".p-30px[_ngcontent-%COMP%]{padding:30px}.element[_ngcontent-%COMP%]{width:200px;max-width:200px}"]})}return i})();const xe=()=>({height:"4px"});function Se(i,d){1&i&&e.nrm(0,"p-progressBar",2),2&i&&e.Aen(e.lJ4(2,xe))}function Te(i,d){if(1&i&&(e.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"span",15),e.EFF(4),e.k0s()()(),e.j41(5,"div")(6,"span",16),e.EFF(7),e.k0s()()()),2&i){const t=d.$implicit;e.R7$(4),e.JRh(t.display_name),e.R7$(3),e.JRh(t.description)}}function Ee(i,d){if(1&i&&(e.qex(0),e.j41(1,"div",3)(2,"div",4)(3,"div",5)(4,"h3",6)(5,"span",7),e.EFF(6,"Permissions List"),e.k0s(),e.j41(7,"span",8),e.EFF(8),e.k0s()()(),e.j41(9,"div",9)(10,"div",10),e.DNE(11,Te,8,2,"div",11),e.k0s()()()(),e.bVm()),2&i){const t=e.XpG();e.R7$(8),e.SpI("",t.permissions.length," Permissions"),e.R7$(3),e.Y8G("ngForOf",t.permissions)}}let je=(()=>{class i{permissionsService;permissions=[];isLoading$;unsubscribe=[];constructor(t){this.permissionsService=t,this.isLoading$=this.permissionsService.isLoading$}ngOnInit(){this.getPermissionsList()}getPermissionsList(){const t=this.permissionsService.getPermissions().subscribe({next:s=>{this.permissions=s},error:s=>{console.error("Failed to fetch permissions",s)}});this.unsubscribe.push(t)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}static \u0275fac=function(s){return new(s||i)(e.rXU(te))};static \u0275cmp=e.VBU({type:i,selectors:[["app-permissions"]],decls:4,vars:6,consts:[["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],[1,"p-30px"],[1,"card","card-flush","h-xl-100"],[1,"card-header","pt-7"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bold","text-gray-900"],[1,"text-gray-500","mt-1","fw-semibold","fs-6"],[1,"card-body"],[1,"hover-scroll-overlay-y","pe-6","me-n6","d-flex","flex-wrap","gap-5"],["class","border element border-dashed border-gray-300 rounded px-7 py-3 mb-6",4,"ngFor","ngForOf"],[1,"border","element","border-dashed","border-gray-300","rounded","px-7","py-3","mb-6"],[1,"d-flex","flex-stack","mb-3"],[1,"me-3"],[1,"text-gray-800","text-hover-primary","fw-bold"],[1,"text-gray-500"]],template:function(s,n){1&s&&(e.DNE(0,Se,1,3,"p-progressBar",0),e.nI1(1,"async"),e.DNE(2,Ee,12,2,"ng-container",1),e.nI1(3,"async")),2&s&&(e.Y8G("ngIf",e.bMT(1,2,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(3,4,n.isLoading$)))},dependencies:[m.Sq,m.bT,x.z,m.Jj],styles:[".p-30px[_ngcontent-%COMP%]{padding:30px}.element[_ngcontent-%COMP%]{width:200px;max-width:200px}"]})}return i})();var Le=p(5098);let ke=(()=>{class i{http;apiUrl="https://api.foresighta.co/api/admin/account";isLoadingSubject=new B.t(!1);isLoading$=this.isLoadingSubject.asObservable();constructor(t){this.http=t}setLoading(t){this.isLoadingSubject.next(t)}handleError(t){return console.error("An error occurred:",t),(0,N.$)(t)}getHeaders(){return new f.Lr({"Content-Type":"application/json","Accept-Language":"en"})}getClients(){return this.setLoading(!0),this.http.get(`${this.apiUrl}/client/list`,{headers:this.getHeaders()}).pipe((0,b.T)(s=>s.data),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}deleteClient(t){return this.setLoading(!0),this.http.delete(`${this.apiUrl}/client/${t}`,{headers:this.getHeaders()}).pipe((0,b.T)(n=>n),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}deactivateAndDeleteClient(t,s){return this.setLoading(!0),this.http.post(`${this.apiUrl}/client/deactivate-delete/${t}`,{staff_notes:s},{headers:this.getHeaders()}).pipe((0,b.T)(h=>h),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}getInsighters(){return this.setLoading(!0),this.http.get(`${this.apiUrl}/insighter/list`,{headers:this.getHeaders()}).pipe((0,b.T)(s=>s.data),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}deleteInsighter(t){return this.setLoading(!0),this.http.delete(`${this.apiUrl}/insighter/${t}`,{headers:this.getHeaders()}).pipe((0,b.T)(n=>n),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}activateInsighter(t,s){return this.setLoading(!0),this.http.post(`${this.apiUrl}/insighter/activate/${t}`,{staff_notes:s},{headers:this.getHeaders()}).pipe((0,b.T)(h=>h),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}deactivateInsighter(t,s){return this.setLoading(!0),this.http.post(`${this.apiUrl}/insighter/deactivate/${t}`,{staff_notes:s},{headers:this.getHeaders()}).pipe((0,b.T)(h=>h),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}deactivateInsighterWithDataDelete(t,s){return this.setLoading(!0),this.http.post(`${this.apiUrl}/insighter/deactivate-delete/${t}`,{staff_notes:s},{headers:this.getHeaders()}).pipe((0,b.T)(h=>h),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}getCompanyInsighters(){return this.setLoading(!0),this.http.get(`${this.apiUrl}/company/list`,{headers:this.getHeaders()}).pipe((0,b.T)(s=>s.data),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}deleteCompanyInsighter(t){return this.setLoading(!0),this.http.delete(`${this.apiUrl}/insighter/${t}`,{headers:this.getHeaders()}).pipe((0,b.T)(n=>n),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}activateCompanyInsighter(t,s){return this.setLoading(!0),this.http.post(`${this.apiUrl}/company/activate/${t}`,{staff_notes:s},{headers:this.getHeaders()}).pipe((0,b.T)(h=>h),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}deactivateCompanyInsighter(t,s){return this.setLoading(!0),this.http.post(`${this.apiUrl}/company/deactivate/${t}`,{staff_notes:s},{headers:this.getHeaders()}).pipe((0,b.T)(h=>h),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}deactivateCompanyWithDataDelete(t,s){return this.setLoading(!0),this.http.post(`${this.apiUrl}/company/deactivate-delete/${t}`,{staff_notes:s},{headers:this.getHeaders()}).pipe((0,b.T)(h=>h),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}verifyCompany(t,s){return this.setLoading(!0),this.http.put(`${this.apiUrl}/company/verify/${t}`,{status:s},{headers:this.getHeaders()}).pipe((0,b.T)(h=>h),(0,_.W)(this.handleError),(0,v.j)(()=>this.setLoading(!1)))}static \u0275fac=function(s){return new(s||i)(e.KVO(f.Qq))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Z=p(1141),q=p(4945),ne=p(5144);const Re=()=>({height:"4px"}),ee=(i,d)=>({"active-status":i,"inactive-status":d});function Fe(i,d){1&i&&e.nrm(0,"p-progressBar",5),2&i&&e.Aen(e.lJ4(2,Re))}function Me(i,d){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Profile"),e.k0s(),e.j41(3,"th"),e.EFF(4,"First Name"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Last Name"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Email"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Country"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Status"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Actions"),e.k0s()())}function we(i,d){if(1&i&&(e.qex(0),e.nrm(1,"img",39),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("src",t.profile_photo_url,e.B4B)}}function De(i,d){if(1&i&&(e.j41(0,"div",40),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.first_name[0]+t.last_name[0]," ")}}function Ge(i,d){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.DNE(2,we,2,1,"ng-container",30)(3,De,2,1,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td")(14,"span",31),e.EFF(15),e.k0s()(),e.j41(16,"td")(17,"a",32),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.deleteClient(n.id))}),e.j41(18,"i",33),e.nrm(19,"span",34)(20,"span",35)(21,"span",36)(22,"span",37)(23,"span",38),e.k0s()()()()}if(2&i){const t=d.$implicit,s=e.sdS(4);e.R7$(2),e.Y8G("ngIf",t.profile_photo_url)("ngIfElse",s),e.R7$(4),e.JRh(t.first_name),e.R7$(2),e.JRh(t.last_name),e.R7$(2),e.JRh(t.email),e.R7$(2),e.JRh(t.country),e.R7$(2),e.Y8G("ngClass",e.l_i(8,ee,"active"===t.status,"active"!==t.status)),e.R7$(),e.SpI(" ",t.status," ")}}function $e(i,d){if(1&i&&(e.j41(0,"p-table",27),e.DNE(1,Me,15,0,"ng-template",28)(2,Ge,24,11,"ng-template",29),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("value",t.clients)("paginator",!0)("rows",10)("loading",t.isLoading)}}function Be(i,d){1&i&&(e.j41(0,"div",41),e.EFF(1," No clients found "),e.k0s())}function Pe(i,d){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Profile"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Name"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Email"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Country"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Status"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Actions"),e.k0s()())}function Ne(i,d){if(1&i&&(e.qex(0),e.nrm(1,"img",39),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("src",t.profile_photo_url,e.B4B)}}function Oe(i,d){if(1&i&&(e.j41(0,"div",40),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.first_name[0]+t.last_name[0]," ")}}function Ae(i,d){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.DNE(2,Ne,2,1,"ng-container",30)(3,Oe,2,1,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"span",31),e.EFF(13),e.k0s()(),e.j41(14,"td"),e.nrm(15,"p-menu",42,1),e.j41(17,"button",43),e.bIt("click",function(n){const r=e.eBV(t).$implicit,h=e.sdS(16);return e.XpG(3).setCurrentInsighter(r.id,r.insighter_status),e.Njj(h.toggle(n))}),e.k0s()()()}if(2&i){const t=d.$implicit,s=e.sdS(4),n=e.XpG(3);e.R7$(2),e.Y8G("ngIf",t.profile_photo_url)("ngIfElse",s),e.R7$(4),e.JRh(t.name),e.R7$(2),e.JRh(t.email),e.R7$(2),e.JRh(t.country),e.R7$(2),e.Y8G("ngClass",e.l_i(9,ee,"active"===t.insighter_status,"active"!==t.insighter_status)),e.R7$(),e.SpI(" ",t.insighter_status," "),e.R7$(2),e.Y8G("model",n.insighterItems)("popup",!0)}}function Ye(i,d){if(1&i&&(e.j41(0,"p-table",27),e.DNE(1,Pe,13,0,"ng-template",28)(2,Ae,18,12,"ng-template",29),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("value",t.individualInsighters)("paginator",!0)("rows",10)("loading",t.isLoading)}}function Ue(i,d){1&i&&(e.j41(0,"div",41),e.EFF(1," No Insighters found "),e.k0s())}function Ve(i,d){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Company Logo"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Name"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Email"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Company"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Status"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Actions"),e.k0s()())}function Xe(i,d){if(1&i&&(e.qex(0),e.nrm(1,"img",44),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("src",t.company.logo,e.B4B)}}function He(i,d){if(1&i&&(e.j41(0,"div",45),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",(null==t.company?null:t.company.legal_name[0])+(null==t.company?null:t.company.legal_name[0])," ")}}function We(i,d){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.DNE(2,Xe,2,1,"ng-container",30)(3,He,2,1,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"span",31),e.EFF(13),e.k0s()(),e.j41(14,"td"),e.nrm(15,"p-menu",42,2),e.j41(17,"button",43),e.bIt("click",function(n){const r=e.eBV(t).$implicit,h=e.sdS(16);return e.XpG(3).setCurrentCompanyInsighter(r.id),e.Njj(h.toggle(n))}),e.k0s()()()}if(2&i){const t=d.$implicit,s=e.sdS(4),n=e.XpG(3);e.R7$(2),e.Y8G("ngIf",null==t.company?null:t.company.logo)("ngIfElse",s),e.R7$(4),e.JRh(t.name),e.R7$(2),e.JRh(t.email),e.R7$(2),e.JRh(null==t.company?null:t.company.legal_name),e.R7$(2),e.Y8G("ngClass",e.l_i(9,ee,"active"===t.company.status,"active"!==t.company.status)),e.R7$(),e.SpI(" ",t.company.status," "),e.R7$(2),e.Y8G("model",n.items)("popup",!0)}}function Qe(i,d){if(1&i&&(e.j41(0,"p-table",27),e.DNE(1,Ve,13,0,"ng-template",28)(2,We,18,12,"ng-template",29),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("value",t.companyInsighters)("paginator",!0)("rows",10)("loading",t.isLoading)}}function Ke(i,d){1&i&&(e.j41(0,"div",41),e.EFF(1," No Company Insighters found "),e.k0s())}function Je(i,d){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"p-tabView",6)(2,"p-tabPanel",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"div",11)(7,"h1",12),e.EFF(8," Clients List "),e.k0s(),e.nrm(9,"div",13),e.k0s()()()(),e.j41(10,"div",14)(11,"div",15)(12,"div",16)(13,"div",17),e.nrm(14,"i",18),e.j41(15,"input",19),e.bIt("input",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.applyClientFilter(n))}),e.k0s()()()(),e.j41(16,"div",20),e.DNE(17,$e,3,4,"p-table",21)(18,Be,2,0,"div",22),e.k0s()()(),e.j41(19,"p-tabPanel",23)(20,"div",8)(21,"div",9)(22,"div",10)(23,"div",11)(24,"h1",12),e.EFF(25," Individuals List "),e.k0s(),e.nrm(26,"div",13),e.k0s()()()(),e.j41(27,"div",14)(28,"div",15)(29,"div",16)(30,"div",17),e.nrm(31,"i",18),e.j41(32,"input",24),e.bIt("input",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.applyInsighterFilter(n))}),e.k0s()()()(),e.j41(33,"div",20),e.DNE(34,Ye,3,4,"p-table",21)(35,Ue,2,0,"div",22),e.k0s()()(),e.j41(36,"p-tabPanel",25)(37,"div",8)(38,"div",9)(39,"div",10)(40,"div",11)(41,"h1",12),e.EFF(42," Corporate List "),e.k0s(),e.nrm(43,"div",13),e.k0s()()()(),e.j41(44,"div",14)(45,"div",15)(46,"div",16)(47,"div",17),e.nrm(48,"i",18),e.j41(49,"input",26),e.bIt("input",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.applyCompanyInsighterFilter(n))}),e.k0s()()()(),e.j41(50,"div",20),e.DNE(51,Qe,3,4,"p-table",21)(52,Ke,2,0,"div",22),e.k0s()()()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(17),e.Y8G("ngIf",t.clients.length>0),e.R7$(),e.Y8G("ngIf",0===t.clients.length),e.R7$(16),e.Y8G("ngIf",t.individualInsighters.length>0),e.R7$(),e.Y8G("ngIf",0===t.individualInsighters.length),e.R7$(16),e.Y8G("ngIf",t.companyInsighters.length>0),e.R7$(),e.Y8G("ngIf",0===t.companyInsighters.length)}}const ze=[{path:"",redirectTo:"main-accounts",pathMatch:"full"},{path:"main-accounts",component:D,children:[{path:"",redirectTo:"staff",pathMatch:"full"},{path:"staff",component:ce},{path:"roles",component:Ce},{path:"permissions",component:je},{path:"users",component:(()=>{class i extends Le.${usersListService;bgClasses=["bg-light-success","bg-light-danger","bg-light-warning","bg-light-info","bg-light-primary"];clients=[];individualInsighters=[];companyInsighters=[];originalClients=[];originalIndividualInsighters=[];originalCompanyInsighters=[];isLoading=!1;clientDialog=!1;selectedClient={};insighterDialog=!1;selectedInsighter={};currentInsighterId=null;currentInsighterStatus="";insighterItems=[];companyInsighterDialog=!1;selectedCompanyInsighter={};currentCompanyInsighterId=null;currentCompanyStatus="";items=[];constructor(t,s){super(t),this.usersListService=s}ngOnInit(){this.loadClients(),this.loadIndividualInsighters(),this.loadCompanyInsighters(),this.initializeMenuItems(),this.initializeInsighterMenuItems()}getInitials(t){return t?t.split(" ").map(r=>r.charAt(0).toUpperCase()).slice(0,2).join(""):""}getRandomBgClass(){const t=Math.floor(Math.random()*this.bgClasses.length);return this.bgClasses[t]}hideDialog(){this.clientDialog=!1,this.insighterDialog=!1,this.companyInsighterDialog=!1}loadClients(){this.usersListService.getClients().subscribe({next:t=>{this.clients=t,this.originalClients=t},error:t=>this.handleServerErrors(t)})}openNewClient(){this.selectedClient={},this.clientDialog=!0}editClient(t){this.selectedClient={...t},this.clientDialog=!0}saveClient(){this.clientDialog=!1,this.loadClients()}deleteClient(t){S().fire({title:"Enter note for client deletion",input:"textarea",inputPlaceholder:"Enter your staff notes here...",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:s=>s?null:"You need to enter a note!"}).then(s=>{s.isConfirmed&&this.usersListService.deactivateAndDeleteClient(t,s.value).subscribe({next:()=>{this.loadClients(),this.showSuccess("","Client deactivated and deleted successfully")},error:r=>{this.handleServerErrors(r)}})})}applyClientFilter(t){const s=(t.target.value||"").toLowerCase();this.clients=this.originalClients.filter(n=>n.name&&n.name.toLowerCase().includes(s)||n.email&&n.email.toLowerCase().includes(s)||n.first_name&&n.first_name.toLowerCase().includes(s)||n.last_name&&n.last_name.toLowerCase().includes(s))}loadIndividualInsighters(){this.usersListService.getInsighters().subscribe({next:t=>{this.individualInsighters=t,this.originalIndividualInsighters=t},error:t=>this.handleServerErrors(t)})}initializeInsighterMenuItems(){this.insighterItems=[{label:"Activate",icon:"pi pi-check",command:()=>{null!==this.currentInsighterId&&this.activateInsighter(this.currentInsighterId,"active")},disabled:"active"===this.currentInsighterStatus},{label:"Deactivate",icon:"pi pi-times",command:()=>{null!==this.currentInsighterId&&this.deactivateInsighter(this.currentInsighterId)},disabled:"inactive"===this.currentInsighterStatus},{label:"Deactivate & delete",icon:"pi pi-trash",command:()=>{null!==this.currentInsighterId&&this.deactivateInsighterWithDateDelete(this.currentInsighterId)}}]}updateInsighterMenuItems(){this.insighterItems=[{label:"Activate",icon:"pi pi-check",command:()=>{null!==this.currentInsighterId&&this.activateInsighter(this.currentInsighterId,"active")},disabled:"active"===this.currentInsighterStatus},{label:"Deactivate",icon:"pi pi-times",command:()=>{null!==this.currentInsighterId&&this.deactivateInsighter(this.currentInsighterId)},disabled:"inactive"===this.currentInsighterStatus},{label:"Deactivate & delete",icon:"pi pi-trash",command:()=>{null!==this.currentInsighterId&&this.deactivateInsighterWithDateDelete(this.currentInsighterId)}}]}setCurrentInsighter(t,s){this.currentInsighterId=t,this.currentInsighterStatus=s.toLowerCase(),this.updateInsighterMenuItems()}openNewInsighter(){this.selectedInsighter={},this.insighterDialog=!0}editInsighter(t){this.selectedInsighter={...t},this.insighterDialog=!0}saveInsighter(){this.insighterDialog=!1,this.loadIndividualInsighters()}activateInsighter(t,s){const n="active"===s?"activated":"deactivated";S().fire({title:`Enter note for ${n} insighter`,input:"textarea",inputPlaceholder:"Enter your staff notes here...",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:r=>r?null:"You need to enter a note!"}).then(r=>{if(r.isConfirmed){const P=this.usersListService.activateInsighter(t,r.value).subscribe({next:()=>{this.loadIndividualInsighters(),this.currentInsighterStatus=s.toLowerCase(),this.updateInsighterMenuItems(),this.showSuccess("",`Insighter ${n} successfully.`)},error:Y=>{this.handleServerErrors(Y)}});this.unsubscribe.push(P)}})}deactivateInsighter(t){S().fire({title:"Enter note for deactivated insighter",input:"textarea",inputPlaceholder:"Enter your staff notes here...",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:s=>s?null:"You need to enter a note!"}).then(s=>{if(s.isConfirmed){const r=this.usersListService.deactivateInsighter(t,s.value).subscribe({next:()=>{this.loadIndividualInsighters(),this.currentInsighterStatus="inactive",this.updateInsighterMenuItems(),this.showSuccess("","Insighter deactivated successfully.")},error:h=>{this.handleServerErrors(h)}});this.unsubscribe.push(r)}})}deactivateInsighterWithDateDelete(t){S().fire({title:"Enter note for deactivated insighter with date delete",input:"textarea",inputPlaceholder:"Enter your staff notes here...",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:s=>s?null:"You need to enter a note!"}).then(s=>{if(s.isConfirmed){const r=this.usersListService.deactivateInsighterWithDataDelete(t,s.value).subscribe({next:()=>{this.loadIndividualInsighters(),this.currentInsighterStatus="inactive",this.updateInsighterMenuItems(),this.showSuccess("","Insighter deactivated with date delete successfully.")},error:h=>{this.handleServerErrors(h)}});this.unsubscribe.push(r)}})}confirmDeleteInsighter(t){S().fire({title:"Are you sure you want to delete this insighter?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel"}).then(s=>{s.isConfirmed&&this.deleteInsighter(t)})}deleteInsighter(t){const s=this.usersListService.deleteInsighter(t).subscribe({next:()=>{this.loadIndividualInsighters(),this.loadClients(),this.showSuccess("","Insighter deleted successfully.")},error:n=>{this.handleServerErrors(n)}});this.unsubscribe.push(s)}applyInsighterFilter(t){const s=(t.target.value||"").toLowerCase();this.individualInsighters=this.originalIndividualInsighters.filter(n=>n.name&&n.name.toLowerCase().includes(s)||n.email&&n.email.toLowerCase().includes(s)||n.country&&n.country.toLowerCase().includes(s))}loadCompanyInsighters(){this.usersListService.getCompanyInsighters().subscribe({next:t=>{this.companyInsighters=t,this.originalCompanyInsighters=t},error:t=>this.handleServerErrors(t)})}initializeMenuItems(){this.items=[{label:"Activate",icon:"pi pi-check",command:()=>{null!==this.currentCompanyInsighterId&&this.activateCompanyInsighter(this.currentCompanyInsighterId,"active")},disabled:"active"===this.currentCompanyStatus},{label:"Deactivate",icon:"pi pi-times",command:()=>{null!==this.currentCompanyInsighterId&&this.deactivateCompanyInsighter(this.currentCompanyInsighterId)},disabled:"inactive"===this.currentCompanyStatus},{label:"Deactivate with date delete",icon:"pi pi-trash",command:()=>{null!==this.currentCompanyInsighterId&&this.deactivateCompanyWithDateDelete(this.currentCompanyInsighterId)},disabled:"inactive"===this.currentCompanyStatus}]}updateMenuItems(){this.items=[{label:"Activate",icon:"pi pi-check",command:()=>{null!==this.currentCompanyInsighterId&&this.activateCompanyInsighter(this.currentCompanyInsighterId,"active")},disabled:"active"===this.currentCompanyStatus},{label:"Deactivate",icon:"pi pi-times",command:()=>{null!==this.currentCompanyInsighterId&&this.deactivateCompanyInsighter(this.currentCompanyInsighterId)},disabled:"inactive"===this.currentCompanyStatus},{label:"Deactivate & delete",icon:"pi pi-trash",command:()=>{null!==this.currentCompanyInsighterId&&this.deactivateCompanyWithDateDelete(this.currentCompanyInsighterId)}}]}deactivateCompanyWithDateDelete(t){S().fire({title:"Enter note for deactivated company insighter with date delete",input:"textarea",inputPlaceholder:"Enter your staff notes here...",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:s=>s?null:"You need to enter a note!"}).then(s=>{if(s.isConfirmed){const r=this.usersListService.deactivateCompanyWithDataDelete(t,s.value).subscribe({next:()=>{this.loadCompanyInsighters(),this.currentCompanyStatus="inactive",this.updateMenuItems(),this.showSuccess("","Company insighter deactivated with date delete successfully.")},error:h=>{this.handleServerErrors(h)}});this.unsubscribe.push(r)}})}setCurrentCompanyInsighter(t){this.currentCompanyInsighterId=t;const s=this.companyInsighters.find(n=>n.id===t);this.currentCompanyStatus=s&&s.company?s.company.status.toLowerCase():"",this.updateMenuItems()}openNewCompanyInsighter(){this.selectedCompanyInsighter={},this.companyInsighterDialog=!0}editCompanyInsighter(t){this.selectedCompanyInsighter={...t},this.companyInsighterDialog=!0,this.setCurrentCompanyInsighter(t.id)}saveCompanyInsighter(){this.companyInsighterDialog=!1,this.loadCompanyInsighters()}activateCompanyInsighter(t,s){const n="active"===s?"activated":"deactivated";S().fire({title:`Enter note for ${n} company insighter`,input:"textarea",inputPlaceholder:"Enter your staff notes here...",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:r=>r?null:"You need to enter a note!"}).then(r=>{if(r.isConfirmed){const P=this.usersListService.activateCompanyInsighter(t,r.value).subscribe({next:()=>{this.loadCompanyInsighters(),this.currentCompanyStatus=s.toLowerCase(),this.updateMenuItems(),this.showSuccess("",`Company insighter ${n} successfully.`)},error:Y=>{this.handleServerErrors(Y)}});this.unsubscribe.push(P)}})}deactivateCompanyInsighter(t){S().fire({title:"Enter note for deactivated company insighter",input:"textarea",inputPlaceholder:"Enter your staff notes here...",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:s=>s?null:"You need to enter a note!"}).then(s=>{if(s.isConfirmed){const r=this.usersListService.deactivateCompanyInsighter(t,s.value).subscribe({next:()=>{this.loadCompanyInsighters(),this.currentCompanyStatus="inactive",this.updateMenuItems(),this.showSuccess("","Company insighter deactivated successfully.")},error:h=>{this.handleServerErrors(h)}});this.unsubscribe.push(r)}})}confirmDeleteCompanyInsighter(t){S().fire({title:"Are you sure?",text:"Are you sure you want to delete this company insighter?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel"}).then(s=>{s.isConfirmed&&this.deleteCompanyInsighter(t)})}deleteCompanyInsighter(t){const s=this.usersListService.deleteCompanyInsighter(t).subscribe({next:()=>{this.loadCompanyInsighters(),this.loadClients(),this.showSuccess("","Insighter deleted successfully."),this.currentCompanyInsighterId===t&&(this.currentCompanyInsighterId=null,this.currentCompanyStatus="",this.updateMenuItems())},error:n=>{this.handleServerErrors(n)}});this.unsubscribe.push(s)}handleServerErrors(t){if(t.error&&t.error.errors){const s=t.error.errors;for(const n in s)s.hasOwnProperty(n)&&this.showError("",s[n].join(", "))}else this.showError("","An unexpected error occurred.")}applyCompanyInsighterFilter(t){const s=(t.target.value||"").toLowerCase();this.companyInsighters=this.originalCompanyInsighters.filter(n=>n.name&&n.name.toLowerCase().includes(s)||n.email&&n.email.toLowerCase().includes(s)||n.company?.legal_name&&n.company.legal_name.toLowerCase().includes(s))}static \u0275fac=function(s){return new(s||i)(e.rXU(e.zZn),e.rXU(ke))};static \u0275cmp=e.VBU({type:i,selectors:[["app-users"]],features:[e.Vt3],decls:2,vars:2,consts:[["initials",""],["insighterMenu",""],["menu",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],[1,"custom-tabview","p-6"],["header","Clients"],["id","kt_app_toolbar",1,"app-toolbar","mb-2"],["id","kt_app_toolbar_container",1,"d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"card"],[1,"card-header","border-0","pt-6","d-flex","justify-content-between","align-items-center"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"pi","pi-search","fs-3","position-absolute","ms-5"],["type","text","pInputText","","placeholder","Search Clients",1,"form-control","w-250px","ps-12",3,"input"],[1,"card-body","pt-0"],["class","table-p",3,"value","paginator","rows","loading",4,"ngIf"],["class","text-center",4,"ngIf"],["header","Individual Insighters"],["type","text","pInputText","","placeholder","Search Insighters",1,"form-control","w-250px","ps-12",3,"input"],["header","Company Insighters"],["type","text","pInputText","","placeholder","Search Company Insighters",1,"form-control","w-250px","ps-12",3,"input"],[1,"table-p",3,"value","paginator","rows","loading"],["pTemplate","header"],["pTemplate","body"],[4,"ngIf","ngIfElse"],[3,"ngClass"],["pTooltip","Delete Client",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","text-danger","fs-2"],[1,"path1"],[1,"path2"],[1,"path3"],[1,"path4"],[1,"path5"],["alt","Profile Photo","width","40","height","40",1,"rounded-circle","object-fit",3,"src"],[1,"symbol-label","fw-semibold","bg-light-success"],[1,"text-center"],["appendTo","body",1,"custom-admin-menu",3,"model","popup"],["pButton","","type","button","icon","pi pi-ellipsis-v",1,"p-button-text",3,"click"],["alt","Company Logo","width","40","height","40",1,"rounded-circle","object-fit",3,"src"],[1,"symbol-label","fw-semibold","bg-light-primary"]],template:function(s,n){1&s&&e.DNE(0,Fe,1,3,"p-progressBar",3)(1,Je,53,6,"ng-container",4),2&s&&(e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading))},dependencies:[m.YU,m.bT,M.Ei,I.XI,Z._f,x.z,A.S,q.JQ,q.Kp,ne.W1,X.m],styles:[".symbol-label[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;justify-content:center;align-items:center;border-radius:40px}.object-fit[_ngcontent-%COMP%]{object-fit:cover}"]})}return i})()}]}];let Ze=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[a.iI.forChild(ze),a.iI]})}return i})(),st=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[m.MD,M.Gg,M.Gg]})}return i})(),nt=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({providers:[Q.o3],imports:[m.MD,Ze,g.q4,se.P,L.h,F.MB,c.X1,I.bG,T.P,Z.tm,x.d,A.u,c.YN,V.kr,q.fd,Z.tm,st,ne.Mk]})}return i})()},4827:(U,O,p)=>{p.d(O,{P:()=>k,v:()=>w});var m=p(177),a=p(4438),e=p(5779),F=p(2816);const D=["*"];function M(g,L){if(1&g){const c=a.RV6();a.j41(0,"img",6),a.bIt("error",function(T){a.eBV(c);const x=a.XpG(2);return a.Njj(x.imageError(T))}),a.k0s()}if(2&g){const c=a.XpG(2);a.Y8G("src",c.image,a.B4B)("alt",c.alt)}}function $(g,L){if(1&g&&a.nrm(0,"span",8),2&g){const c=a.XpG(3);a.HbH(c.icon),a.Y8G("ngClass","p-chip-icon"),a.BMQ("data-pc-section","icon")}}function S(g,L){if(1&g&&a.DNE(0,$,1,4,"span",7),2&g){const c=a.XpG(2);a.Y8G("ngIf",c.icon)}}function f(g,L){if(1&g&&(a.j41(0,"div",9),a.EFF(1),a.k0s()),2&g){const c=a.XpG(2);a.BMQ("data-pc-section","label"),a.R7$(),a.JRh(c.label)}}function B(g,L){if(1&g){const c=a.RV6();a.j41(0,"span",13),a.bIt("click",function(T){a.eBV(c);const x=a.XpG(4);return a.Njj(x.close(T))})("keydown",function(T){a.eBV(c);const x=a.XpG(4);return a.Njj(x.onKeydown(T))}),a.k0s()}if(2&g){const c=a.XpG(4);a.HbH(c.removeIcon),a.Y8G("ngClass","pi-chip-remove-icon"),a.BMQ("data-pc-section","removeicon")("aria-label",c.removeAriaLabel)}}function N(g,L){if(1&g){const c=a.RV6();a.j41(0,"TimesCircleIcon",14),a.bIt("click",function(T){a.eBV(c);const x=a.XpG(4);return a.Njj(x.close(T))})("keydown",function(T){a.eBV(c);const x=a.XpG(4);return a.Njj(x.onKeydown(T))}),a.k0s()}if(2&g){const c=a.XpG(4);a.HbH("pi-chip-remove-icon"),a.BMQ("data-pc-section","removeicon")("aria-label",c.removeAriaLabel)}}function b(g,L){if(1&g&&(a.qex(0),a.DNE(1,B,1,5,"span",11)(2,N,1,4,"TimesCircleIcon",12),a.bVm()),2&g){const c=a.XpG(3);a.R7$(),a.Y8G("ngIf",c.removeIcon),a.R7$(),a.Y8G("ngIf",!c.removeIcon)}}function _(g,L){}function v(g,L){1&g&&a.DNE(0,_,0,0,"ng-template")}function u(g,L){if(1&g){const c=a.RV6();a.j41(0,"span",15),a.bIt("click",function(T){a.eBV(c);const x=a.XpG(3);return a.Njj(x.close(T))})("keydown",function(T){a.eBV(c);const x=a.XpG(3);return a.Njj(x.onKeydown(T))}),a.DNE(1,v,1,0,null,16),a.k0s()}if(2&g){const c=a.XpG(3);a.BMQ("data-pc-section","removeicon")("aria-label",c.removeAriaLabel),a.R7$(),a.Y8G("ngTemplateOutlet",c.removeIconTemplate)}}function G(g,L){if(1&g&&(a.qex(0),a.DNE(1,b,3,2,"ng-container",5)(2,u,2,3,"span",10),a.bVm()),2&g){const c=a.XpG(2);a.R7$(),a.Y8G("ngIf",!c.removeIconTemplate),a.R7$(),a.Y8G("ngIf",c.removeIconTemplate)}}function C(g,L){if(1&g&&(a.j41(0,"div",2),a.SdG(1),a.DNE(2,M,1,2,"img",3)(3,S,1,1,"ng-template",null,0,a.C5r)(5,f,2,2,"div",4)(6,G,3,2,"ng-container",5),a.k0s()),2&g){const c=a.sdS(4),I=a.XpG();a.HbH(I.styleClass),a.Y8G("ngClass",I.containerClass())("ngStyle",I.style),a.BMQ("data-pc-name","chip")("aria-label",I.label)("data-pc-section","root"),a.R7$(2),a.Y8G("ngIf",I.image)("ngIfElse",c),a.R7$(3),a.Y8G("ngIf",I.label),a.R7$(),a.Y8G("ngIf",I.removable)}}let w=(()=>{class g{label;icon;image;alt;style;styleClass;removable=!1;removeIcon;onRemove=new a.bkB;onImageError=new a.bkB;config=(0,a.WQX)(e.r1);visible=!0;removeIconTemplate;get removeAriaLabel(){return this.config.getTranslation(e.Yj.ARIA).removeLabel}templates;ngAfterContentInit(){this.templates.forEach(c=>{c.getType(),this.removeIconTemplate=c.template})}containerClass(){return{"p-chip p-component":!0,"p-chip-image":null!=this.image}}close(c){this.visible=!1,this.onRemove.emit(c)}onKeydown(c){("Enter"===c.key||"Backspace"===c.key)&&this.close(c)}imageError(c){this.onImageError.emit(c)}static \u0275fac=function(I){return new(I||g)};static \u0275cmp=a.VBU({type:g,selectors:[["p-chip"]],contentQueries:function(I,T,x){if(1&I&&a.wni(x,e.Ei,4),2&I){let A;a.mGM(A=a.lsd())&&(T.templates=A)}},hostAttrs:[1,"p-element"],inputs:{label:"label",icon:"icon",image:"image",alt:"alt",style:"style",styleClass:"styleClass",removable:[a.Mj6.HasDecoratorInputTransform,"removable","removable",a.L39],removeIcon:"removeIcon"},outputs:{onRemove:"onRemove",onImageError:"onImageError"},features:[a.GFd],ngContentSelectors:D,decls:1,vars:1,consts:[["iconTemplate",""],[3,"ngClass","class","ngStyle",4,"ngIf"],[3,"ngClass","ngStyle"],[3,"src","alt","error",4,"ngIf","ngIfElse"],["class","p-chip-text",4,"ngIf"],[4,"ngIf"],[3,"error","src","alt"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[1,"p-chip-text"],["tabindex","0","class","pi-chip-remove-icon","role","button",3,"click","keydown",4,"ngIf"],["tabindex","0","role","button",3,"class","ngClass","click","keydown",4,"ngIf"],["tabindex","0","role","button",3,"class","click","keydown",4,"ngIf"],["tabindex","0","role","button",3,"click","keydown","ngClass"],["tabindex","0","role","button",3,"click","keydown"],["tabindex","0","role","button",1,"pi-chip-remove-icon",3,"click","keydown"],[4,"ngTemplateOutlet"]],template:function(I,T){1&I&&(a.NAR(),a.DNE(0,C,7,11,"div",1)),2&I&&a.Y8G("ngIf",T.visible)},dependencies:()=>[m.YU,m.bT,m.T3,m.B3,F.I],styles:["@layer primeng{.p-chip{display:inline-flex;align-items:center}.p-chip-text,.p-chip-icon.pi,.pi-chip-remove-icon.pi{line-height:1.5}.pi-chip-remove-icon{cursor:pointer}.p-chip img{border-radius:50%}}\n"],encapsulation:2,changeDetection:0})}return g})(),k=(()=>{class g{static \u0275fac=function(I){return new(I||g)};static \u0275mod=a.$C({type:g});static \u0275inj=a.G2t({imports:[m.MD,F.I,e.Gg,e.Gg]})}return g})()},6018:(U,O,p)=>{p.d(O,{c:()=>F});var m=p(4438),a=p(461),e=p(4420);let F=(()=>{class D extends a.h{pathId;ngOnInit(){this.pathId="url(#"+(0,e._Y)()+")"}static \u0275fac=(()=>{let $;return function(f){return($||($=m.xGo(D)))(f||D)}})();static \u0275cmp=m.VBU({type:D,selectors:[["PlusIcon"]],standalone:!0,features:[m.Vt3,m.aNF],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(S,f){1&S&&(m.qSk(),m.j41(0,"svg",0)(1,"g"),m.nrm(2,"path",1),m.k0s(),m.j41(3,"defs")(4,"clipPath",2),m.nrm(5,"rect",3),m.k0s()()()),2&S&&(m.HbH(f.getClassNames()),m.BMQ("aria-label",f.ariaLabel)("aria-hidden",f.ariaHidden)("role",f.role),m.R7$(),m.BMQ("clip-path",f.pathId),m.R7$(3),m.Y8G("id",f.pathId))},encapsulation:2})}return D})()},2609:(U,O,p)=>{p.d(O,{B:()=>H,h:()=>z});var m=p(9969),a=p(177),e=p(4438),F=p(5779),D=p(3306),M=p(9329),$=p(1962),S=p(1512),f=p(2816),B=p(563),N=p(1584);const b=(l,E)=>({showTransitionParams:l,hideTransitionParams:E}),_=l=>({value:"visible",params:l});function v(l,E){if(1&l&&e.nrm(0,"span"),2&l){const o=e.XpG().$implicit;e.HbH("p-message-icon pi "+o.icon),e.BMQ("data-pc-section","icon")}}function u(l,E){1&l&&e.nrm(0,"CheckIcon"),2&l&&e.BMQ("data-pc-section","icon")}function G(l,E){1&l&&e.nrm(0,"InfoCircleIcon"),2&l&&e.BMQ("data-pc-section","icon")}function C(l,E){1&l&&e.nrm(0,"TimesCircleIcon"),2&l&&e.BMQ("data-pc-section","icon")}function w(l,E){1&l&&e.nrm(0,"ExclamationTriangleIcon"),2&l&&e.BMQ("data-pc-section","icon")}function k(l,E){if(1&l&&(e.j41(0,"span",10),e.qex(1),e.DNE(2,u,1,1,"CheckIcon",11)(3,G,1,1,"InfoCircleIcon",11)(4,C,1,1,"TimesCircleIcon",11)(5,w,1,1,"ExclamationTriangleIcon",11),e.bVm(),e.k0s()),2&l){const o=e.XpG().$implicit;e.R7$(2),e.Y8G("ngIf","success"===o.severity),e.R7$(),e.Y8G("ngIf","info"===o.severity),e.R7$(),e.Y8G("ngIf","error"===o.severity),e.R7$(),e.Y8G("ngIf","warn"===o.severity)}}function g(l,E){if(1&l&&e.nrm(0,"span",14),2&l){const o=e.XpG(2).$implicit;e.Y8G("innerHTML",o.summary,e.npT),e.BMQ("data-pc-section","summary")}}function L(l,E){if(1&l&&e.nrm(0,"span",15),2&l){const o=e.XpG(2).$implicit;e.Y8G("innerHTML",o.detail,e.npT),e.BMQ("data-pc-section","detail")}}function c(l,E){if(1&l&&(e.qex(0),e.DNE(1,g,1,2,"span",12)(2,L,1,2,"span",13),e.bVm()),2&l){const o=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",o.summary),e.R7$(),e.Y8G("ngIf",o.detail)}}function I(l,E){if(1&l&&(e.j41(0,"span",18),e.EFF(1),e.k0s()),2&l){const o=e.XpG(2).$implicit;e.BMQ("data-pc-section","summary"),e.R7$(),e.JRh(o.summary)}}function T(l,E){if(1&l&&(e.j41(0,"span",19),e.EFF(1),e.k0s()),2&l){const o=e.XpG(2).$implicit;e.BMQ("data-pc-section","detail"),e.R7$(),e.JRh(o.detail)}}function x(l,E){if(1&l&&e.DNE(0,I,2,2,"span",16)(1,T,2,2,"span",17),2&l){const o=e.XpG().$implicit;e.Y8G("ngIf",o.summary),e.R7$(),e.Y8G("ngIf",o.detail)}}function A(l,E){if(1&l){const o=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(o);const j=e.XpG().index,R=e.XpG(2);return e.Njj(R.removeMessage(j))}),e.nrm(1,"TimesIcon",21),e.k0s()}if(2&l){const o=e.XpG(3);e.BMQ("aria-label",o.closeAriaLabel)("data-pc-section","closebutton"),e.R7$(),e.Y8G("styleClass","p-message-close-icon"),e.BMQ("data-pc-section","closeicon")}}function V(l,E){if(1&l&&(e.j41(0,"div",5)(1,"div",6),e.DNE(2,v,1,3,"span",7)(3,k,6,4,"span",8)(4,c,3,2,"ng-container",3)(5,x,2,2,"ng-template",null,1,e.C5r)(7,A,2,4,"button",9),e.k0s()()),2&l){let o;const y=E.$implicit,j=e.sdS(6),R=e.XpG(2);e.HbH("p-message p-message-"+y.severity),e.Y8G("@messageAnimation",e.eq3(13,_,e.l_i(10,b,R.showTransitionOptions,R.hideTransitionOptions))),e.R7$(),e.BMQ("data-pc-section","wrapper")("id",y.id||null),e.R7$(),e.Y8G("ngIf",y.icon),e.R7$(),e.Y8G("ngIf",!y.icon),e.R7$(),e.Y8G("ngIf",!R.escape)("ngIfElse",j),e.R7$(3),e.Y8G("ngIf",R.closable&&(null===(o=y.closable)||void 0===o||o))}}function X(l,E){if(1&l&&(e.qex(0),e.DNE(1,V,8,15,"div",4),e.bVm()),2&l){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.messages)}}function K(l,E){1&l&&e.eu8(0)}function J(l,E){if(1&l&&(e.j41(0,"div",22)(1,"div",6),e.DNE(2,K,1,0,"ng-container",23),e.k0s()()),2&l){const o=e.XpG();e.Y8G("ngClass","p-message p-message-"+o.severity),e.R7$(2),e.Y8G("ngTemplateOutlet",o.contentTemplate)}}let H=(()=>{class l{messageService;el;cd;config;set value(o){this.messages=o,this.startMessageLifes(this.messages)}closable=!0;style;styleClass;enableService=!0;key;escape=!0;severity;showTransitionOptions="300ms ease-out";hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)";valueChange=new e.bkB;onClose=new e.bkB;templates;messages;messageSubscription;clearSubscription;timerSubscriptions=[];contentTemplate;constructor(o,y,j,R){this.messageService=o,this.el=y,this.cd=j,this.config=R}ngAfterContentInit(){this.templates?.forEach(o=>{o.getType(),this.contentTemplate=o.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(o=>{if(o){Array.isArray(o)||(o=[o]);const y=o.filter(j=>this.key===j.key);this.messages=this.messages?[...this.messages,...y]:[...y],this.startMessageLifes(y),this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(o=>{o?this.key===o&&(this.messages=null):this.messages=null,this.cd.markForCheck()}))}hasMessages(){let o=this.el.nativeElement.parentElement;return!(!o||!o.offsetParent)&&(null!=this.contentTemplate||this.messages&&this.messages.length>0)}clear(){this.messages=[],this.valueChange.emit(this.messages)}removeMessage(o){const y=this.messages[o];this.messages=this.messages?.filter((j,R)=>R!==o),y&&this.onClose.emit(y),this.valueChange.emit(this.messages)}get icon(){const o=this.severity||(this.hasMessages()?this.messages[0].severity:null);if(this.hasMessages())switch(o){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.timerSubscriptions?.forEach(o=>o.unsubscribe())}startMessageLifes(o){o?.forEach(y=>y.life&&this.startMessageLife(y))}startMessageLife(o){const y=(0,N.O)(o.life).subscribe(()=>{this.messages=this.messages?.filter(j=>j!==o),this.timerSubscriptions=this.timerSubscriptions?.filter(j=>j!==y),this.valueChange.emit(this.messages),this.cd.markForCheck()});this.timerSubscriptions.push(y)}static \u0275fac=function(y){return new(y||l)(e.rXU(F.bg,8),e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(F.r1))};static \u0275cmp=e.VBU({type:l,selectors:[["p-messages"]],contentQueries:function(y,j,R){if(1&y&&e.wni(R,F.Ei,4),2&y){let W;e.mGM(W=e.lsd())&&(j.templates=W)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:[e.Mj6.HasDecoratorInputTransform,"closable","closable",e.L39],style:"style",styleClass:"styleClass",enableService:[e.Mj6.HasDecoratorInputTransform,"enableService","enableService",e.L39],key:"key",escape:[e.Mj6.HasDecoratorInputTransform,"escape","escape",e.L39],severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange",onClose:"onClose"},features:[e.GFd],decls:4,vars:8,consts:[["staticMessage",""],["escapeOut",""],["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"class",4,"ngIf"],["class","p-message-icon",4,"ngIf"],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-message-icon"],[4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[3,"styleClass"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(y,j){if(1&y&&(e.j41(0,"div",2),e.DNE(1,X,2,1,"ng-container",3)(2,J,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&y){const R=e.sdS(3);e.HbH(j.styleClass),e.Y8G("ngStyle",j.style),e.BMQ("aria-atomic",!0)("aria-live","assertive")("data-pc-name","message"),e.R7$(),e.Y8G("ngIf",!j.contentTemplate)("ngIfElse",R)}},dependencies:()=>[a.YU,a.Sq,a.bT,a.T3,a.B3,B.n,D.S,$.e,f.I,M.P,S.A],styles:["@layer primeng{.p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center;flex:none}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}}\n"],encapsulation:2,data:{animation:[(0,m.hZ)("messageAnimation",[(0,m.kY)(":enter",[(0,m.iF)({opacity:0,transform:"translateY(-25%)"}),(0,m.i0)("{{showTransitionParams}}")]),(0,m.kY)(":leave",[(0,m.i0)("{{hideTransitionParams}}",(0,m.iF)({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0})}return l})(),z=(()=>{class l{static \u0275fac=function(y){return new(y||l)};static \u0275mod=e.$C({type:l});static \u0275inj=e.G2t({imports:[a.MD,B.Z,D.S,$.e,f.I,M.P,S.A,F.Gg,F.Gg]})}return l})()},1579:(U,O,p)=>{p.d(O,{d:()=>v,z:()=>_});var m=p(177),a=p(4438),e=p(5779);const F=(u,G)=>({"p-progressbar p-component":!0,"p-progressbar-determinate":u,"p-progressbar-indeterminate":G}),D=(u,G)=>({width:u,display:"flex",background:G}),M=u=>({$implicit:u}),$=u=>({display:u}),S=u=>({background:u});function f(u,G){if(1&u&&(a.j41(0,"div",7),a.EFF(1),a.k0s()),2&u){const C=a.XpG(2);a.Y8G("ngStyle",a.eq3(4,$,null!=C.value&&0!==C.value?"flex":"none")),a.BMQ("data-pc-section","label"),a.R7$(),a.Lme(" ",C.value,"",C.unit," ")}}function B(u,G){1&u&&a.eu8(0)}function N(u,G){if(1&u&&(a.j41(0,"div",3)(1,"div",4),a.DNE(2,f,2,6,"div",5)(3,B,1,0,"ng-container",6),a.k0s()()),2&u){const C=a.XpG();a.Y8G("ngStyle",a.l_i(5,D,C.value+"%",C.color)),a.BMQ("data-pc-section","value"),a.R7$(2),a.Y8G("ngIf",C.showValue&&!C.contentTemplate),a.R7$(),a.Y8G("ngTemplateOutlet",C.contentTemplate)("ngTemplateOutletContext",a.eq3(8,M,C.value))}}function b(u,G){if(1&u&&(a.j41(0,"div",8),a.nrm(1,"div",3),a.k0s()),2&u){const C=a.XpG();a.BMQ("data-pc-section","container"),a.R7$(),a.Y8G("ngStyle",a.eq3(3,S,C.color)),a.BMQ("data-pc-section","value")}}let _=(()=>{class u{value;showValue=!0;styleClass;style;unit="%";mode="determinate";color;templates;contentTemplate;ngAfterContentInit(){this.templates?.forEach(C=>{C.getType(),this.contentTemplate=C.template})}static \u0275fac=function(w){return new(w||u)};static \u0275cmp=a.VBU({type:u,selectors:[["p-progressBar"]],contentQueries:function(w,k,g){if(1&w&&a.wni(g,e.Ei,4),2&w){let L;a.mGM(L=a.lsd())&&(k.templates=L)}},hostAttrs:[1,"p-element"],inputs:{value:[a.Mj6.HasDecoratorInputTransform,"value","value",a.Udg],showValue:[a.Mj6.HasDecoratorInputTransform,"showValue","showValue",a.L39],styleClass:"styleClass",style:"style",unit:"unit",mode:"mode",color:"color"},features:[a.GFd],decls:3,vars:14,consts:[["role","progressbar",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate",3,"ngStyle",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",3,"ngStyle"],[1,"p-progressbar-label"],[3,"ngStyle",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngStyle"],[1,"p-progressbar-indeterminate-container"]],template:function(w,k){1&w&&(a.j41(0,"div",0),a.DNE(1,N,4,10,"div",1)(2,b,2,5,"div",2),a.k0s()),2&w&&(a.HbH(k.styleClass),a.Y8G("ngStyle",k.style)("ngClass",a.l_i(11,F,"determinate"===k.mode,"indeterminate"===k.mode)),a.BMQ("aria-valuemin",0)("aria-valuenow",k.value)("aria-valuemax",100)("data-pc-name","progressbar")("data-pc-section","root"),a.R7$(),a.Y8G("ngIf","determinate"===k.mode),a.R7$(),a.Y8G("ngIf","indeterminate"===k.mode))},dependencies:[m.YU,m.bT,m.T3,m.B3],styles:['@layer primeng{.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;-webkit-animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;-webkit-animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;-webkit-animation-delay:1.15s;animation-delay:1.15s}}@-webkit-keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@-webkit-keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0})}return u})(),v=(()=>{class u{static \u0275fac=function(w){return new(w||u)};static \u0275mod=a.$C({type:u});static \u0275inj=a.G2t({imports:[m.MD]})}return u})()}}]);