"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[1732],{2016:(w,x,l)=>{l.d(x,{C:()=>F});var g=l(1626),s=l(4412),f=l(8810),b=l(6354),C=l(9437),_=l(980),t=l(4438),v=l(779);let F=(()=>{class y{http;translationService;apiUrl="https://api.foresighta.co/api/common/setting/country/list";createApi="https://api.foresighta.co/api/admin/setting/country";updateDeleteApi="https://api.foresighta.co/api/admin/setting/country";isLoadingSubject=new s.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";authLocalStorageKey="foresighta-creds";constructor(d,p){this.http=d,this.translationService=p,this.translationService.onLanguageChange().subscribe(m=>{this.currentLang=m||"en"})}setLoading(d){this.isLoadingSubject.next(d)}handleError(d){return(0,f.$)(d)}getAuthToken(){try{const d=localStorage.getItem(this.authLocalStorageKey);if(d)return JSON.parse(d).authToken||null}catch(d){console.error("Error parsing auth data from localStorage:",d)}return null}getCountries(){const d=this.getAuthToken(),p=new g.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...d?{Authorization:`Bearer ${d}`}:{}});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:p}).pipe((0,b.T)(m=>m.data),(0,C.W)(m=>this.handleError(m)),(0,_.j)(()=>this.setLoading(!1)))}createCountry(d){const p=this.getAuthToken(),m=new g.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...p?{Authorization:`Bearer ${p}`}:{}});return this.setLoading(!0),this.http.post(this.createApi,d,{headers:m}).pipe((0,b.T)(h=>h),(0,C.W)(h=>this.handleError(h)),(0,_.j)(()=>this.setLoading(!1)))}updateCountry(d,p){const m=this.getAuthToken(),h=new g.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...m?{Authorization:`Bearer ${m}`}:{}});return this.setLoading(!0),this.http.put(`${this.updateDeleteApi}/${d}`,p,{headers:h}).pipe((0,b.T)(A=>A),(0,C.W)(A=>this.handleError(A)),(0,_.j)(()=>this.setLoading(!1)))}deleteCountry(d){const p=this.getAuthToken(),m=new g.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...p?{Authorization:`Bearer ${p}`}:{}});return this.setLoading(!0),this.http.delete(`${this.updateDeleteApi}/${d}`,{headers:m}).pipe((0,b.T)(h=>h),(0,C.W)(h=>this.handleError(h)),(0,_.j)(()=>this.setLoading(!1)))}static \u0275fac=function(p){return new(p||y)(t.KVO(g.Qq),t.KVO(v.L))};static \u0275prov=t.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},1732:(w,x,l)=>{l.r(x),l.d(x,{SetupPaymentInfoModule:()=>be});var g=l(177),s=l(9417),f=l(2791),b=l(6781),C=l(8833),_=l(5098),t=l(4438),v=l(288),F=l(4412);let y=(()=>{class o{selectedCountryIdSubject=new F.t(null);selectedCountryId$=this.selectedCountryIdSubject.asObservable();setCountryId(e){this.selectedCountryIdSubject.next(e)}getCountryId(){return this.selectedCountryIdSubject.value}clearCountryId(){this.selectedCountryIdSubject.next(null)}static \u0275fac=function(r){return new(r||o)};static \u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var T=l(744),d=l(1626),p=l(9998),m=l(5779);let h=(()=>{class o extends _.${title="";subtitle="";static \u0275fac=(()=>{let e;return function(n){return(e||(e=t.xGo(o)))(n||o)}})();static \u0275cmp=t.VBU({type:o,selectors:[["app-payment-header"]],inputs:{title:"title",subtitle:"subtitle"},features:[t.Vt3],decls:11,vars:2,consts:[[1,"section-header","px-4","sm:px-6","lg:px-8","py-8","relative","overflow-hidden","rounded-lg"],["alt","Section background","src","https://res.cloudinary.com/dsiku9ipv/image/upload/v1737266454/breadcrumb-bg-2_anwto8.png",1,"object-cover","z-0","position-absolute","top-0","left-0","w-100","h-100",2,"object-fit","cover"],[1,"position-absolute","z-10","d-none","d-md-block",2,"left","28%","transform","translateX(-50%)","top","0","pointer-events","none"],["src","assets/media/misc/stripes-dark.svg","width","768","height","768","alt","Stripes",1,"opacity-50",2,"width","auto","height","auto","max-width","none"],[2,"padding-top","50px"],[1,"position-relative","z-10","max-w-6xl","mx-auto","mt-5","w-100"],[1,"text-center","mb-4"],[1,"display-4","fw-bolder","mb-3","text-info"],[1,"lead","mb-4","text-info"]],template:function(r,n){1&r&&(t.j41(0,"div",0),t.nrm(1,"img",1),t.j41(2,"div",2),t.nrm(3,"img",3),t.k0s(),t.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),t.EFF(8),t.k0s(),t.j41(9,"p",8),t.EFF(10),t.k0s()()()()()),2&r&&(t.R7$(8),t.SpI(" ",n.title," "),t.R7$(2),t.SpI(" ",n.subtitle," "))},styles:[".section-header[_ngcontent-%COMP%]{position:relative;min-height:175px}.section-header[_ngcontent-%COMP%]   .text-gradient-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#e0f2fe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent}.section-header[_ngcontent-%COMP%]   .backdrop-blur[_ngcontent-%COMP%]{backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{min-height:200px;padding:2rem 1rem!important}.section-header[_ngcontent-%COMP%]   .display-4[_ngcontent-%COMP%]{font-size:2rem}.section-header[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}return o})();const A=()=>({width:"90vw",maxWidth:"800px"}),j=()=>({width:"90vw",maxWidth:"500px"}),E=()=>({standalone:!0}),I=()=>["/app/insighter-dashboard/account-settings/payment-settings"];function R(o,u){if(1&o&&(t.j41(0,"div",16)(1,"div",17)(2,"span",18),t.EFF(3,"Loading..."),t.k0s()(),t.j41(4,"div",19)(5,"h5",20),t.EFF(6),t.k0s(),t.j41(7,"p",21),t.EFF(8),t.k0s()()()),2&o){const e=t.XpG();t.R7$(6),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062f\u0641\u0639...":"Loading payment information..."," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631":"Please wait"," ")}}function D(o,u){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit,r=t.XpG(2);t.R7$(),t.SpI(" ","ar"===r.lang?e.description.ar:e.description.en," ")}}function $(o,u){if(1&o&&(t.j41(0,"span",43),t.EFF(1),t.k0s()),2&o){const e=t.XpG(3);t.R7$(),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u062d\u0633\u0627\u0628 \u0645\u0648\u062c\u0648\u062f \u0628\u0627\u0644\u0641\u0639\u0644":"Account Already Exist"," ")}}function G(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",33)(1,"div",34)(2,"input",35),t.bIt("change",function(){const n=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.onPaymentTypeChange(n.id))}),t.k0s(),t.j41(3,"label",36)(4,"div",37),t.nrm(5,"img",38),t.k0s(),t.j41(6,"span",39)(7,"span",40),t.EFF(8),t.k0s(),t.j41(9,"span",41),t.DNE(10,D,2,1,"span",6)(11,$,2,1,"span",42),t.k0s()()()()()}if(2&o){const e=u.$implicit,r=t.XpG(2);t.R7$(2),t.Y8G("id",e.id)("value",e.id)("checked",r.selectedPaymentType===e.id)("disabled","manual"===e.id&&"active"===(null==r.existingManualAccount?null:r.existingManualAccount.status)||"provider"===e.id&&r.existingProviderAccount&&null!==r.existingProviderAccount.details_submitted_at),t.R7$(),t.xc7("cursor","manual"===e.id&&"active"===(null==r.existingManualAccount?null:r.existingManualAccount.status)||"provider"===e.id&&r.existingProviderAccount&&null!==r.existingProviderAccount.details_submitted_at?"not-allowed":"pointer"),t.AVh("disabled","manual"===e.id&&"active"===(null==r.existingManualAccount?null:r.existingManualAccount.status)||"provider"===e.id&&r.existingProviderAccount&&null!==r.existingProviderAccount.details_submitted_at),t.Y8G("for","manual"===e.id&&"active"===(null==r.existingManualAccount?null:r.existingManualAccount.status)||"provider"===e.id&&r.existingProviderAccount&&null!==r.existingProviderAccount.details_submitted_at?null:e.id),t.R7$(2),t.Y8G("src",e.imageUrl,t.B4B),t.R7$(3),t.SpI(" ","ar"===r.lang?e.name.ar:e.name.en," "),t.R7$(2),t.Y8G("ngIf",!("manual"===e.id&&"active"===(null==r.existingManualAccount?null:r.existingManualAccount.status)||"provider"===e.id&&r.existingProviderAccount&&null!==r.existingProviderAccount.details_submitted_at)),t.R7$(),t.Y8G("ngIf","manual"===e.id&&"active"===(null==r.existingManualAccount?null:r.existingManualAccount.status)||"provider"===e.id&&r.existingProviderAccount&&null!==r.existingProviderAccount.details_submitted_at)}}function N(o,u){if(1&o&&(t.j41(0,"div",44),t.nrm(1,"i",45),t.EFF(2),t.k0s()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639":"Please select a payment type"," ")}}function V(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",50)(1,"div",51)(2,"div",52)(3,"div",53)(4,"div",54),t.nrm(5,"img",55),t.j41(6,"span",56),t.EFF(7),t.k0s()(),t.j41(8,"button",57),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.unselectCountry())}),t.nrm(9,"i",58),t.k0s()()()()()}if(2&o){const e=t.XpG(3);t.R7$(5),t.FS9("alt",e.selectedCountry.name),t.Y8G("src",e.getFlagUrl(e.selectedCountry.flag),t.B4B),t.R7$(2),t.JRh(e.selectedCountry.name)}}function L(o,u){if(1&o&&t.nrm(0,"img",55),2&o){const e=t.XpG().$implicit,r=t.XpG(4);t.FS9("alt",e.name),t.Y8G("src",r.getFlagUrl(e.flag),t.B4B)}}function Y(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",66),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG(4);return t.Njj(i.selectCountry(n))}),t.j41(1,"div",54),t.DNE(2,L,1,2,"img",67),t.j41(3,"span"),t.EFF(4),t.k0s()()()}if(2&o){const e=u.$implicit;t.R7$(2),t.Y8G("ngIf",e.showFlag),t.R7$(2),t.JRh(e.name)}}function X(o,u){if(1&o&&(t.j41(0,"div",68),t.EFF(1),t.k0s()),2&o){const e=t.XpG(4);t.R7$(),t.SpI(" ","ar"===e.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0628\u0644\u062f\u0627\u0646":"No countries found"," ")}}function B(o,u){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",59)(2,"span",60),t.nrm(3,"i",61),t.k0s(),t.j41(4,"input",62),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG(3);return t.DH7(i.searchTerm,n)||(i.searchTerm=n),t.Njj(n)}),t.bIt("ngModelChange",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.filterCountries())}),t.k0s()(),t.j41(5,"div",63),t.DNE(6,Y,5,2,"div",64)(7,X,2,1,"div",65),t.k0s()()}if(2&o){const e=t.XpG(3);t.R7$(4),t.R50("ngModel",e.searchTerm),t.Y8G("ngModelOptions",t.lJ4(5,E))("placeholder","ar"===e.lang?"\u0627\u0628\u062d\u062b \u0639\u0646 \u0628\u0644\u062f...":"Search for a country..."),t.R7$(2),t.Y8G("ngForOf",e.filteredCountries),t.R7$(),t.Y8G("ngIf",0===e.filteredCountries.length)}}function U(o,u){if(1&o&&(t.j41(0,"div",69),t.nrm(1,"i",45),t.EFF(2),t.k0s()),2&o){const e=t.XpG(3);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0628\u0644\u062f":"Please select a country"," ")}}function W(o,u){if(1&o&&(t.j41(0,"div",23)(1,"div",24)(2,"span",25),t.EFF(3,"2"),t.k0s(),t.j41(4,"h4",26),t.EFF(5),t.k0s()(),t.j41(6,"p",27),t.EFF(7),t.k0s(),t.j41(8,"div",46)(9,"label",47),t.EFF(10),t.k0s(),t.DNE(11,V,10,3,"div",48)(12,B,8,6,"div",6)(13,U,3,1,"div",49),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(5),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0628\u0644\u062f":"Select Country"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0628\u0644\u062f \u0644\u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643":"Select the country for your Stripe account"," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0628\u0644\u062f":"Country"," "),t.R7$(),t.Y8G("ngIf",e.selectedCountry),t.R7$(),t.Y8G("ngIf",!e.selectedCountry),t.R7$(),t.Y8G("ngIf",e.showValidationErrors&&!e.selectedCountry&&"provider"===e.selectedPaymentType)}}function z(o,u){if(1&o){const e=t.RV6();t.j41(0,"span"),t.EFF(1," \u0623\u0648\u0627\u0641\u0642 \u0639\u0644\u0649 \u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 \u062f\u0641\u0639 \u0648\u0623\u0642\u0631\u0651 \u0623\u0646\u064a \u0642\u0631\u0623\u062a \u0648\u0641\u0647\u0645\u062a "),t.j41(2,"a",74),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.openTermsDialog())}),t.EFF(3,"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629"),t.k0s(),t.EFF(4,". "),t.k0s()}}function H(o,u){if(1&o){const e=t.RV6();t.j41(0,"span"),t.EFF(1," I agree to create a Payment Account and acknowledge that I have read and understood the "),t.j41(2,"a",74),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.openTermsDialog())}),t.EFF(3,"Terms & Conditions"),t.k0s(),t.EFF(4,". "),t.k0s()}}function J(o,u){if(1&o&&(t.j41(0,"div",69),t.nrm(1,"i",45),t.EFF(2),t.k0s()),2&o){const e=t.XpG(3);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u062c\u0628 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"You must agree to the Terms & Conditions"," ")}}function K(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",70)(1,"div",71)(2,"input",72),t.bIt("change",function(n){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onTermsChange(n))}),t.k0s(),t.j41(3,"label",73),t.DNE(4,z,5,0,"span",6)(5,H,5,0,"span",6),t.k0s()(),t.DNE(6,J,3,1,"div",49),t.k0s()}if(2&o){let e;const r=t.XpG(2);t.R7$(4),t.Y8G("ngIf","ar"===r.lang),t.R7$(),t.Y8G("ngIf","ar"!==r.lang),t.R7$(),t.Y8G("ngIf",r.showValidationErrors&&(null==(e=r.paymentForm.get("termsAgreed"))?null:e.invalid))}}function Z(o,u){1&o&&(t.j41(0,"span"),t.EFF(1," \u0644\u062f\u064a\u0643 \u0628\u0627\u0644\u0641\u0639\u0644 \u062c\u0645\u064a\u0639 \u0637\u0631\u0642 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u0645\u062a\u0627\u062d\u0629. \u064a\u0645\u0643\u0646\u0643 \u062d\u0630\u0641 \u0623\u0648 \u062a\u0639\u062f\u064a\u0644 \u0637\u0631\u0642 \u0627\u0644\u062f\u0641\u0639 \u0645\u0646 "),t.j41(2,"a",80),t.EFF(3," \u0635\u0641\u062d\u0629 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062f\u0641\u0639 "),t.k0s(),t.EFF(4,". "),t.k0s()),2&o&&(t.R7$(2),t.Y8G("routerLink",t.lJ4(1,I)))}function q(o,u){1&o&&(t.j41(0,"span"),t.EFF(1," You already have all available payment options. You can delete or edit payment methods from the "),t.j41(2,"a",80),t.EFF(3," payment settings page "),t.k0s(),t.EFF(4,". "),t.k0s()),2&o&&(t.R7$(2),t.Y8G("routerLink",t.lJ4(1,I)))}function Q(o,u){if(1&o&&(t.j41(0,"div",75)(1,"div",76),t.nrm(2,"i",77),t.j41(3,"div")(4,"h6",78),t.EFF(5),t.k0s(),t.j41(6,"p",79),t.DNE(7,Z,5,2,"span",6)(8,q,5,2,"span",6),t.k0s()()()()),2&o){const e=t.XpG(2);t.R7$(5),t.SpI(" ","ar"===e.lang?"\u062c\u0645\u064a\u0639 \u0637\u0631\u0642 \u0627\u0644\u062f\u0641\u0639 \u0645\u062a\u0648\u0641\u0631\u0629":"All Payment Options Available"," "),t.R7$(2),t.Y8G("ngIf","ar"===e.lang),t.R7$(),t.Y8G("ngIf","ar"!==e.lang)}}function tt(o,u){1&o&&t.nrm(0,"span",85)}function et(o,u){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG(3);t.R7$(),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u062a\u0627\u0644\u064a":"Next"," ")}}function nt(o,u){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG(3);t.R7$(),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 Stripe...":"Creating Stripe account..."," ")}}function ot(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",75)(1,"div",53)(2,"div",81),t.nrm(3,"i",82),t.EFF(4),t.k0s(),t.j41(5,"button",83),t.nI1(6,"async"),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onNext())}),t.DNE(7,tt,1,0,"span",84),t.nI1(8,"async"),t.DNE(9,et,2,1,"span",6)(10,nt,2,1,"span",6),t.k0s()()()}if(2&o){const e=t.XpG(2);t.R7$(4),t.SpI(" ","ar"===e.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u0643 \u0622\u0645\u0646\u0629 \u0648\u0645\u0634\u0641\u0631\u0629":"Your information is secure and encrypted"," "),t.R7$(),t.Y8G("disabled",t.bMT(6,5,e.paymentService.isLoading$)||e.isCreatingStripeAccount),t.R7$(2),t.Y8G("ngIf",t.bMT(8,7,e.paymentService.isLoading$)||e.isCreatingStripeAccount),t.R7$(2),t.Y8G("ngIf",!e.isCreatingStripeAccount),t.R7$(),t.Y8G("ngIf",e.isCreatingStripeAccount)}}function rt(o,u){if(1&o&&(t.j41(0,"div")(1,"form",22)(2,"div",23)(3,"div",24)(4,"span",25),t.EFF(5,"1"),t.k0s(),t.j41(6,"h4",26),t.EFF(7),t.k0s()(),t.j41(8,"p",27),t.EFF(9),t.k0s(),t.j41(10,"div",3),t.DNE(11,G,12,13,"div",28),t.k0s(),t.DNE(12,N,3,1,"div",29),t.k0s(),t.DNE(13,W,14,6,"div",30)(14,K,7,3,"div",31)(15,Q,9,3,"div",32)(16,ot,11,9,"div",32),t.k0s()()),2&o){const e=t.XpG();t.R7$(),t.Y8G("formGroup",e.paymentForm),t.R7$(6),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639":"Select Payment Type"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u0645\u0641\u0636\u0644\u0629 \u0644\u062f\u064a\u0643":"Choose your preferred payment method"," "),t.R7$(2),t.Y8G("ngForOf",e.paymentTypes),t.R7$(),t.Y8G("ngIf",e.showValidationErrors&&!e.selectedPaymentType),t.R7$(),t.Y8G("ngIf","provider"===e.selectedPaymentType),t.R7$(),t.Y8G("ngIf","provider"===e.selectedPaymentType),t.R7$(),t.Y8G("ngIf",e.allPaymentOptionsExist),t.R7$(),t.Y8G("ngIf",!e.allPaymentOptionsExist)}}function it(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",86)(1,"h5",87),t.EFF(2),t.k0s(),t.j41(3,"div",88)(4,"button",89),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.printTerms())}),t.nrm(5,"i",90),t.k0s(),t.j41(6,"button",91),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.saveTerms())}),t.nrm(7,"i",92),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(2),t.JRh("ar"===e.lang?"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"Terms & Conditions")}}function ut(o,u){if(1&o&&(t.j41(0,"div",93)(1,"div",94)(2,"span",18),t.EFF(3),t.k0s()()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"Loading...")}}function at(o,u){if(1&o&&t.nrm(0,"div",95),2&o){const e=t.XpG();t.Y8G("innerHTML",e.stripeTermsContent,t.npT)}}function st(o,u){if(1&o&&(t.j41(0,"div",96),t.nrm(1,"i",97),t.j41(2,"p"),t.EFF(3),t.k0s()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Unable to load Terms & Conditions")}}function ct(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",98)(1,"button",99),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.declineTerms())}),t.EFF(2),t.k0s(),t.j41(3,"button",100),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.acceptTerms())}),t.EFF(4),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0631\u0641\u0636":"Decline"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0642\u0628\u0648\u0644":"Accept"," ")}}function lt(o,u){if(1&o&&(t.j41(0,"div",16)(1,"div",17)(2,"span",18),t.EFF(3,"Loading..."),t.k0s()(),t.j41(4,"div",19)(5,"h5",20),t.EFF(6),t.k0s(),t.j41(7,"p",21),t.EFF(8),t.k0s()()()),2&o){const e=t.XpG();t.R7$(6),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u0648\u062c\u064a\u0647 \u0625\u0644\u0649 Stripe...":"Redirecting to Stripe..."," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631":"Please wait"," ")}}function dt(o,u){if(1&o){const e=t.RV6();t.j41(0,"span",110),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.resendOtp())}),t.nrm(1,"i",111),t.EFF(2),t.k0s()}if(2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0645\u0632":"Resend Code"," ")}}function pt(o,u){if(1&o&&(t.j41(0,"span",43),t.nrm(1,"span",112),t.EFF(2),t.k0s()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0631\u0633\u0627\u0644...":"Sending..."," ")}}function mt(o,u){if(1&o&&(t.j41(0,"span",21),t.nrm(1,"i",113),t.EFF(2),t.k0s()),2&o){const e=t.XpG(2);t.R7$(2),t.E5c(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0645\u062a\u0627\u062d\u0629 \u062e\u0644\u0627\u0644":"Resend available in"," ",e.resendCooldown,"","ar"===e.lang?"\u062b":"s"," ")}}function gt(o,u){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",101),t.nrm(2,"i",102),t.j41(3,"h5",103),t.EFF(4),t.k0s(),t.j41(5,"p",21),t.EFF(6),t.k0s()(),t.j41(7,"div",70)(8,"label",47),t.EFF(9),t.k0s(),t.j41(10,"input",104),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.otpCode,n)||(i.otpCode=n),t.Njj(n)}),t.k0s(),t.j41(11,"div",105),t.nrm(12,"i",106),t.EFF(13),t.k0s()(),t.j41(14,"div",107),t.DNE(15,dt,3,1,"span",108)(16,pt,3,1,"span",42)(17,mt,3,3,"span",109),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(4),t.SpI(" ","ar"===e.lang?"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Enter Verification Code"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0644\u0642\u062f \u0623\u0631\u0633\u0644\u0646\u0627 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"We sent a verification code to your email"," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Verification Code"," "),t.R7$(),t.R50("ngModel",e.otpCode),t.Y8G("ngModelOptions",t.lJ4(11,E))("placeholder","ar"===e.lang?"\u0623\u062f\u062e\u0644 \u0627\u0644\u0631\u0645\u0632":"Enter code")("disabled",e.isSubmittingOtp),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0648\u0645\u062c\u0644\u062f \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0645\u0632\u0639\u062c\u0629 (\u062a\u0646\u062a\u0647\u064a \u0641\u0639\u0627\u0644\u064a\u0629 \u0627\u0644\u0643\u0648\u062f \u0641\u064a 1 \u0633\u0627\u0639\u0629)":"Check your email and spam folder (Code expires in 1 hour)"," "),t.R7$(2),t.Y8G("ngIf",e.canResendOtp&&!e.isResendingOtp),t.R7$(),t.Y8G("ngIf",e.isResendingOtp),t.R7$(),t.Y8G("ngIf",!e.canResendOtp&&!e.isResendingOtp)}}function ht(o,u){1&o&&t.nrm(0,"span",112)}function ft(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",115)(1,"button",99),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.closeOtpDialog())}),t.EFF(2),t.k0s(),t.j41(3,"button",83),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.submitOtp())}),t.DNE(4,ht,1,0,"span",116),t.EFF(5),t.k0s()()}if(2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0644\u063a\u0627\u0621":"Cancel"," "),t.R7$(),t.Y8G("disabled",e.isSubmittingOtp||!e.otpCode.trim()),t.R7$(),t.Y8G("ngIf",e.isSubmittingOtp),t.R7$(),t.SpI(" ","ar"===e.lang?"\u062a\u0623\u0643\u064a\u062f":"Verify"," ")}}function _t(o,u){if(1&o&&t.DNE(0,ft,6,4,"div",114),2&o){const e=t.XpG();t.Y8G("ngIf",!e.isWaitingForRedirect)}}let bt=(()=>{class o extends _.${fb;router;paymentService;paymentCountryService;guidelinesService;http;paymentForm;paymentTypes=[{id:"manual",name:{en:"Bank Account Setup",ar:"\u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 \u0628\u0646\u0643\u064a"},description:{en:"Set up direct bank transfers with manual verification and processing",ar:"\u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062a\u062d\u0648\u064a\u0644\u0627\u062a \u0627\u0644\u0628\u0646\u0643\u064a\u0629 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u0629 \u0645\u0639 \u0627\u0644\u062a\u062d\u0642\u0642 \u0648\u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629 \u0627\u0644\u064a\u062f\u0648\u064a\u0629"},imageUrl:"https://res.cloudinary.com/dsiku9ipv/image/upload/v1755933067/bank-account_18410123_jbdogp.png"},{id:"provider",name:{en:"Stripe Provider",ar:"\u0645\u0632\u0648\u062f \u0633\u062a\u0631\u0627\u064a\u0628"},description:{en:"Automated payment processing with instant transfers via Stripe platform",ar:"\u0645\u0639\u0627\u0644\u062c\u0629 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0627\u0644\u0622\u0644\u064a\u0629 \u0645\u0639 \u0627\u0644\u062a\u062d\u0648\u064a\u0644\u0627\u062a \u0627\u0644\u0641\u0648\u0631\u064a\u0629 \u0639\u0628\u0631 \u0645\u0646\u0635\u0629 \u0633\u062a\u0631\u0627\u064a\u0628"},imageUrl:"https://res.cloudinary.com/dsiku9ipv/image/upload/v1754902439/New_Project_12_jmtvd6.png"}];selectedPaymentType="";selectedCountry=null;allCountries=[];stripeCountries=[];filteredCountries=[];searchTerm="";termsAgreed=!1;showValidationErrors=!1;stripeTermsContent="";isLoadingTerms=!1;paymentInfo=null;isEditing=!1;isLoadingPaymentInfo=!0;isCreatingStripeAccount=!1;existingManualAccount=null;existingProviderAccount=null;showManualEdit=!1;showProviderDelete=!1;isProviderUnderReview=!1;showTermsDialog=!1;showOtpDialog=!1;otpCode="";resendCooldown=0;canResendOtp=!0;isSubmittingOtp=!1;isOtpForLinkAccount=!1;isWaitingForRedirect=!1;isResendingOtp=!1;constructor(e,r,n,i,a,c,O){super(e),this.fb=r,this.router=n,this.paymentService=i,this.paymentCountryService=a,this.guidelinesService=c,this.http=O,this.paymentForm=this.fb.group({paymentType:["",s.k0.required],country:[""],termsAgreed:[!1]})}ngOnInit(){this.loadExistingPaymentInfo()}loadStripeCountries(){this.paymentService.getStripeCountries().subscribe({next:e=>{this.stripeCountries=e.map(r=>({...r,showFlag:!0})),this.filteredCountries=[...this.stripeCountries]},error:e=>{console.error("Error loading Stripe countries:",e)}})}onPaymentTypeChange(e){this.selectedPaymentType=e,this.paymentForm.patchValue({paymentType:e}),"provider"===e?(this.loadStripeCountries(),this.loadStripeTerms(),this.paymentForm.get("country")?.setValidators([s.k0.required]),this.paymentForm.get("termsAgreed")?.setValidators([s.k0.requiredTrue])):(this.selectedCountry=null,this.stripeCountries=[],this.filteredCountries=[],this.termsAgreed=!1,this.stripeTermsContent="",this.paymentForm.get("country")?.clearValidators(),this.paymentForm.get("termsAgreed")?.clearValidators(),this.paymentForm.patchValue({country:"",termsAgreed:!1})),this.paymentForm.get("country")?.updateValueAndValidity(),this.paymentForm.get("termsAgreed")?.updateValueAndValidity()}selectCountry(e){this.selectedCountry=e,this.paymentCountryService.setCountryId(e.id),this.paymentForm.patchValue({country:e.id})}unselectCountry(){this.selectedCountry=null,this.paymentForm.patchValue({country:""}),this.searchTerm="",this.filterCountries()}filterCountries(){this.filteredCountries=this.searchTerm?this.stripeCountries.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())):[...this.stripeCountries]}getCountryName(e){return e.name}getFlagUrl(e){return`assets/media/flags/${e}.svg`}onNext(){if(this.showValidationErrors=!0,this.paymentForm.get("paymentType")?.markAsTouched(),this.paymentForm.get("country")?.markAsTouched(),this.paymentForm.get("termsAgreed")?.markAsTouched(),this.selectedPaymentType){if("provider"===this.selectedPaymentType){if(!this.selectedCountry)return void this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Validation Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0628\u0644\u062f":"Please select a country");if(!this.paymentForm.get("termsAgreed")?.value)return void this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Validation Error","ar"===this.lang?"\u064a\u062c\u0628 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"You must agree to the Terms & Conditions")}this.paymentForm.invalid?this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Validation Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629":"Please fill in all required fields"):"manual"===this.selectedPaymentType&&"active"===this.existingManualAccount?.status||"provider"===this.selectedPaymentType&&this.existingProviderAccount&&null!==this.existingProviderAccount.details_submitted_at?this.showError("ar"===this.lang?"\u062e\u064a\u0627\u0631 \u063a\u064a\u0631 \u0645\u062a\u0627\u062d":"Option Not Available","ar"===this.lang?"\u0647\u0630\u0627 \u0627\u0644\u062e\u064a\u0627\u0631 \u063a\u064a\u0631 \u0645\u062a\u0627\u062d \u062d\u0627\u0644\u064a\u064b\u0627. \u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u062e\u064a\u0627\u0631 \u0622\u062e\u0631.":"This option is currently not available. Please choose another option."):"manual"===this.selectedPaymentType?this.router.navigate(["/app/setup-payment-info/manual-account"]):"provider"===this.selectedPaymentType&&(this.showOtpDialog=!0,this.generateOtp())}else this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Validation Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639":"Please select a payment type")}initiateStripeOnboarding(){this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{const r=this.paymentService.getProviderAccount(e.data);this.isOtpForLinkAccount="provider"===r?.type&&!0===r?.stripe_account&&!r.details_submitted_at,this.showOtpDialog=!0},error:e=>{this.isOtpForLinkAccount=!1,this.showOtpDialog=!0}})}createStripeAccountWithOtp(e){this.isSubmittingOtp=!0;const r=this.selectedCountry?.id;if(!r)return this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0628\u0644\u062f":"Please select a country"),void(this.isSubmittingOtp=!1);this.paymentService.createStripeAccount({country_id:r,code:e,accept_terms:!0}).subscribe({next:i=>{this.isSubmittingOtp=!1,this.showOtpDialog=!1,i.data.stripe_account_link.url?(this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642 \u0628\u0646\u062c\u0627\u062d":"Successfully Verified","ar"===this.lang?"\u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 Stripe \u0644\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f":"Redirecting to Stripe to complete setup"),this.isWaitingForRedirect=!0,window.location.href=i.data.stripe_account_link.url):this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 Stripe":"Stripe link not found")},error:i=>{if(this.isSubmittingOtp=!1,422===i.status&&i.error&&"Stripe account exists"===i.error.message)return this.showOtpDialog=!1,void this.router.navigate(["/app/setup-payment-info/stripe-callback/refresh"]);this.handleServerErrors(i)}})}linkStripeAccountWithOtp(e){this.isSubmittingOtp=!0;const r=this.existingProviderAccount?.country?.id;if(!r)return this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0628\u0644\u062f":"Country information not found"),void(this.isSubmittingOtp=!1);this.paymentService.linkStripeAccount({country_id:r,code:e,accept_terms:!0}).subscribe({next:i=>{this.isSubmittingOtp=!1,this.showOtpDialog=!1,i.data.stripe_account_link.url?(this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642 \u0628\u0646\u062c\u0627\u062d":"Successfully Verified","ar"===this.lang?"\u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 Stripe \u0644\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f":"Redirecting to Stripe to complete setup"),this.isWaitingForRedirect=!0,window.location.href=i.data.stripe_account_link.url):this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 Stripe":"Stripe link not found")},error:i=>{this.isSubmittingOtp=!1,this.handleServerErrors(i)}})}loadExistingPaymentInfo(){this.isLoadingPaymentInfo=!0,this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{const r=this.paymentService.getPrimaryAccount(e.data);r?(this.paymentInfo=r,this.existingManualAccount=this.paymentService.getManualAccount(e.data),this.existingProviderAccount=this.paymentService.getProviderAccount(e.data),this.showManualEdit=null!==this.existingManualAccount&&"active"===this.existingManualAccount.status,this.showProviderDelete=null!==this.existingProviderAccount,this.isProviderUnderReview="inactive"===this.existingProviderAccount?.status&&null!==this.existingProviderAccount?.details_submitted_at,this.preSelectExistingInfo()):(this.existingManualAccount=null,this.existingProviderAccount=null,this.showManualEdit=!1,this.showProviderDelete=!1,this.isProviderUnderReview=!1),this.isLoadingPaymentInfo=!1},error:e=>{this.existingManualAccount=null,this.existingProviderAccount=null,this.showManualEdit=!1,this.showProviderDelete=!1,this.isProviderUnderReview=!1,this.isLoadingPaymentInfo=!1}})}preSelectExistingInfo(){this.paymentInfo&&("manual"!==this.paymentInfo.type||"active"!==this.existingManualAccount?.status)&&("provider"!==this.paymentInfo.type||!this.existingProviderAccount||null===this.existingProviderAccount.details_submitted_at)&&(this.selectedPaymentType=this.paymentInfo.type,this.paymentForm.patchValue({paymentType:this.paymentInfo.type}))}handleServerErrors(e){if(e?.error)if(e.error.errors){const r=e.error.errors;for(const n in r)if(r.hasOwnProperty(n)){const i=r[n];this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",Array.isArray(i)?i.join(", "):i)}}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",e.error.message?e.error.message:"ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.");else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.")}generateOtp(){this.paymentService.generatePaymentOTP().subscribe({next:e=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"Verification code sent to your email")},error:e=>{this.handleServerErrors(e)}})}closeOtpDialog(){this.showOtpDialog=!1,this.otpCode=""}submitOtp(){this.otpCode.trim().length>=4?this.processStripeAccountWithOtp(this.otpCode.trim()):this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Verification Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Please enter the verification code")}processStripeAccountWithOtp(e){this.isSubmittingOtp=!0,this.paymentService.getPaymentAccountDetails().subscribe({next:r=>{const n=this.paymentService.getProviderAccount(r.data);n&&!0===n.stripe_account?this.linkStripeAccountWithOtp(e):this.createStripeAccountWithOtp(e)},error:r=>{this.createStripeAccountWithOtp(e)}})}resendOtp(){!this.canResendOtp||this.isResendingOtp||(this.isResendingOtp=!0,this.paymentService.generatePaymentOTP().subscribe({next:e=>{this.isResendingOtp=!1,this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062c\u062f\u064a\u062f \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"New verification code sent to your email"),this.startCooldown()},error:e=>{this.isResendingOtp=!1,this.handleServerErrors(e)}}))}startCooldown(){this.canResendOtp=!1,this.resendCooldown=30;const e=setInterval(()=>{this.resendCooldown--,this.resendCooldown<=0&&(this.canResendOtp=!0,clearInterval(e))},1e3)}navigateToManualAccount(){this.router.navigate(["/app/setup-payment-info/manual-account"])}deleteManualAccount(){confirm("ar"===this.lang?"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0627\u0644\u064a\u062f\u0648\u064a\u061f":"Are you sure you want to delete your manual bank account?")&&this.paymentService.deleteManualAccount().subscribe({next:()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d":"Successfully Deleted","ar"===this.lang?"\u062a\u0645 \u062d\u0630\u0641 \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0627\u0644\u064a\u062f\u0648\u064a \u0628\u0646\u062c\u0627\u062d":"Your manual bank account has been deleted successfully"),this.loadExistingPaymentInfo()},error:e=>{this.handleServerErrors(e)}})}deleteProviderAccount(){confirm("ar"===this.lang?"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643\u061f":"Are you sure you want to delete your Stripe account?")&&this.paymentService.deleteStripeAccount().subscribe({next:()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d":"Successfully Deleted","ar"===this.lang?"\u062a\u0645 \u062d\u0630\u0641 \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d":"Your Stripe account has been deleted successfully"),this.loadExistingPaymentInfo()},error:e=>{this.handleServerErrors(e)}})}openTermsDialog(){console.log("Opening Terms Dialog"),this.showTermsDialog=!0,this.loadTermsAndConditions()}closeTermsDialog(){this.showTermsDialog=!1}acceptTerms(){this.termsAgreed=!0,this.paymentForm.patchValue({termsAgreed:!0}),this.closeTermsDialog()}declineTerms(){this.termsAgreed=!1,this.paymentForm.patchValue({termsAgreed:!1}),this.closeTermsDialog()}onTermsChange(e){this.termsAgreed=e.target.checked}loadTermsAndConditions(){this.isLoadingTerms=!0,this.stripeTermsContent="";const e={"Content-Type":"application/json",Accept:"application/json","Accept-Language":this.lang||"en","X-Timezone":Intl.DateTimeFormat().resolvedOptions().timeZone};this.http.get("https://api.foresighta.co/api/common/setting/guideline/slug/stripe-payment-terms-and-conditions",{headers:e}).subscribe({next:r=>{this.isLoadingTerms=!1,r&&r.data&&r.data.guideline?this.stripeTermsContent=r.data.guideline:this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Unable to load Terms & Conditions")},error:r=>{this.isLoadingTerms=!1,this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0641\u0634\u0644 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Failed to load Terms & Conditions")}})}printTerms(){const e=window.open("","_blank");if(e){const r="ar"===this.lang?"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"Terms & Conditions",n=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>${r}</title>\n          <style>\n            body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }\n            h1 { color: #333; text-align: center; margin-bottom: 20px; }\n            .content { margin: 0 auto; max-width: 800px; }\n          </style>\n        </head>\n        <body>\n          <h1>${r}</h1>\n          <div class="content">${this.stripeTermsContent}</div>\n        </body>\n        </html>\n      `;e.document.open(),e.document.write(n),e.document.close(),setTimeout(()=>{e.print()},500)}else this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0627 \u064a\u0645\u0643\u0646 \u0641\u062a\u062d \u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u0637\u0628\u0627\u0639\u0629. \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0645\u062a\u0635\u0641\u062d.":"Could not open print window. Please check your browser settings.")}saveTerms(){if(this.stripeTermsContent){const e="ar"===this.lang?"\u0634\u0631\u0648\u0637-\u0648\u0623\u062d\u0643\u0627\u0645-\u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"Terms-and-Conditions",r=this.stripHtmlTags(this.stripeTermsContent),n=new Blob([r],{type:"text/plain"}),i=window.URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=`${e}.txt`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(i),document.body.removeChild(a)}}stripHtmlTags(e){const r=document.createElement("div");return r.innerHTML=e,r.textContent||r.innerText||""}loadStripeTerms(){this.isLoadingTerms=!0,this.paymentService.getStripePaymentTerms().subscribe({next:e=>{this.stripeTermsContent=e?.data?.guideline||"",this.isLoadingTerms=!1},error:e=>{console.error("Error loading Stripe terms:",e),this.isLoadingTerms=!1}})}get allPaymentOptionsExist(){return"active"===this.existingManualAccount?.status&&this.existingProviderAccount&&null!==this.existingProviderAccount.details_submitted_at}static \u0275fac=function(r){return new(r||o)(t.rXU(t.zZn),t.rXU(s.ok),t.rXU(f.Ix),t.rXU(v.W),t.rXU(y),t.rXU(T.N),t.rXU(d.Qq))};static \u0275cmp=t.VBU({type:o,selectors:[["app-setup-payment-info"]],features:[t.Vt3],decls:20,vars:26,consts:[[3,"title","subtitle"],[1,"gradient-background",2,"padding-top","50px"],[1,"container-fluid"],[1,"row"],[1,"col-12","mx-auto","col-md-6"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[3,"visibleChange","visible","modal","closable","draggable","resizable"],["pTemplate","header"],[1,"terms-content",2,"max-height","60vh","overflow-y","auto"],["class","text-center py-4",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["pTemplate","footer"],[3,"visibleChange","visible","modal","closable","draggable","resizable","header"],[1,"otp-content"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-info",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-3"],[1,"text-gray-700"],[1,"text-muted"],[3,"formGroup"],[1,"mb-8"],[1,"d-flex","align-items-center","mb-4"],[1,"badge","badge-circle","badge-info","me-3"],[1,"mb-0","text-gray-800","fw-bold"],[1,"text-muted","mb-4"],["class","col-lg-6 mb-4",4,"ngFor","ngForOf"],["class","text-danger mt-3 fs-7 d-flex align-items-center",4,"ngIf"],["class","mb-8",4,"ngIf"],["class","mb-4",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"col-lg-6","mb-4"],[1,"position-relative"],["name","paymentType","type","radio",1,"btn-check",3,"change","id","value","checked","disabled"],[1,"btn","btn-outline","btn-outline-dashed","btn-outline-default","p-7","d-flex","align-items-center","position-relative","hover-elevate-up","shadow-sm","rounded-3","transition",2,"height","140px",3,"for"],[1,"mx-5","my-5"],["alt","Payment method icon",2,"width","38px","height","38px","object-fit","contain",3,"src"],[1,"d-block","fw-bold","text-inline-start"],[1,"text-gray-900","fw-bolder","d-block","fs-4","mb-2"],[1,"text-gray-500","fw-bold","fs-6"],["class","text-info",4,"ngIf"],[1,"text-info"],[1,"text-danger","mt-3","fs-7","d-flex","align-items-center"],[1,"fas","fa-exclamation-circle","me-2"],[1,"form-group"],[1,"form-label","required"],["class","selected-country-card mb-3",4,"ngIf"],["class","text-danger mt-2 fs-7 d-flex align-items-center",4,"ngIf"],[1,"selected-country-card","mb-3"],[1,"card","border-info"],[1,"card-body","p-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"me-3",2,"width","24px","height","16px","object-fit","cover",3,"src","alt"],[1,"fw-semibold"],["type","button",1,"btn","btn-sm","btn-light-danger",3,"click"],[1,"fas","fa-times"],[1,"input-group","mb-3"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"country-list",2,"max-height","300px","overflow-y","auto","overflow-x","hidden"],["class","country-item p-3 hover-light-info cursor-pointer border-bottom",3,"click",4,"ngFor","ngForOf"],["class","p-3 text-center text-muted",4,"ngIf"],[1,"country-item","p-3","hover-light-info","cursor-pointer","border-bottom",3,"click"],["class","me-3","style","width: 24px; height: 16px; object-fit: cover;",3,"src","alt",4,"ngIf"],[1,"p-3","text-center","text-muted"],[1,"text-danger","mt-2","fs-7","d-flex","align-items-center"],[1,"mb-4"],[1,"form-check","d-flex","align-items-start"],["type","checkbox","id","termsAgreement","formControlName","termsAgreed",1,"form-check-input","me-3","mt-1",3,"change"],["for","termsAgreement",1,"form-check-label"],["href","javascript:void(0)",1,"text-decoration-underline","fw-bold","text-info",3,"click"],[1,"card-footer"],["role","alert",1,"alert","alert-info","d-flex","align-items-center","mb-0"],[1,"fas","fa-info-circle","me-3","fs-4"],[1,"mb-1","fw-bold"],[1,"mb-0"],[1,"text-decoration-underline","fw-bold","text-info",3,"routerLink"],[1,"text-muted","small"],[1,"fas","fa-shield-alt","text-info","me-1"],["type","button",1,"btn","btn-info",3,"click","disabled"],["class","spinner-border spinner-border-sm text-white me-2","role","status","aria-hidden","true","style","width: 1rem; height: 1rem;",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","text-white","me-2",2,"width","1rem","height","1rem"],[1,"d-flex","justify-content-between","align-items-center","w-100"],[1,"m-0"],[1,"d-flex"],[1,"btn","btn-sm","btn-icon","me-2",3,"click"],[1,"ki-outline","ki-printer","fs-3"],[1,"btn","btn-sm","btn-icon",3,"click"],[1,"ki-outline","ki-save-2","fs-3"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-info"],[3,"innerHTML"],[1,"text-center","py-4","text-muted"],[1,"fas","fa-exclamation-triangle","fs-2x","mb-3"],[1,"d-flex","justify-content-end","gap-3"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click"],[1,"text-center","mb-4"],[1,"fas","fa-shield-check","text-info","fs-2","mb-3"],[1,"mb-2"],["type","text","maxlength","10",1,"form-control","text-center",3,"ngModelChange","ngModel","ngModelOptions","placeholder","disabled"],[1,"form-text","text-muted","mt-2"],[1,"fas","fa-envelope","me-1"],[1,"text-center","mb-3"],["class","text-info text-decoration-underline","style","cursor: pointer;",3,"click",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"text-info","text-decoration-underline",2,"cursor","pointer",3,"click"],[1,"fas","fa-paper-plane","me-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-clock","me-1"],["class","d-flex justify-content-between",4,"ngIf"],[1,"d-flex","justify-content-between"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"]],template:function(r,n){1&r&&(t.nrm(0,"p-toast")(1,"app-payment-header",0),t.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t.DNE(6,R,9,2,"div",5)(7,rt,17,9,"div",6),t.k0s()()(),t.j41(8,"p-dialog",7),t.mxI("visibleChange",function(a){return t.DH7(n.showTermsDialog,a)||(n.showTermsDialog=a),a}),t.DNE(9,it,8,1,"ng-template",8),t.j41(10,"div",9),t.DNE(11,ut,4,1,"div",10)(12,at,1,1,"div",11)(13,st,4,1,"div",12),t.k0s(),t.DNE(14,ct,5,2,"ng-template",13),t.k0s(),t.j41(15,"p-dialog",14),t.mxI("visibleChange",function(a){return t.DH7(n.showOtpDialog,a)||(n.showOtpDialog=a),a}),t.j41(16,"div",15),t.DNE(17,lt,9,2,"div",5)(18,gt,18,12,"div",6),t.k0s(),t.DNE(19,_t,1,1,"ng-template",13),t.k0s()()),2&r&&(t.R7$(),t.Y8G("title","ar"===n.lang?"\u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 \u0627\u0644\u062f\u0641\u0639":"Setup Payment Account")("subtitle","ar"===n.lang?"\u0627\u062e\u062a\u0631 \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 \u0644\u0643 \u0648\u0642\u0645 \u0628\u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0628\u0633\u0647\u0648\u0644\u0629 \u0648\u0623\u0645\u0627\u0646":"Choose your preferred payment method and setup your digital wallet easily and securely"),t.R7$(5),t.Y8G("ngIf",n.isLoadingPaymentInfo),t.R7$(),t.Y8G("ngIf",!n.isLoadingPaymentInfo),t.R7$(),t.Aen(t.lJ4(24,A)),t.R50("visible",n.showTermsDialog),t.Y8G("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),t.R7$(3),t.Y8G("ngIf",n.isLoadingTerms),t.R7$(),t.Y8G("ngIf",!n.isLoadingTerms&&n.stripeTermsContent),t.R7$(),t.Y8G("ngIf",!n.isLoadingTerms&&!n.stripeTermsContent),t.R7$(2),t.Aen(t.lJ4(25,j)),t.FS9("header","ar"===n.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0647\u0648\u064a\u062a\u0643":"Verify Your Identity"),t.R50("visible",n.showOtpDialog),t.Y8G("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),t.R7$(2),t.Y8G("ngIf",n.isWaitingForRedirect),t.R7$(),t.Y8G("ngIf",!n.isWaitingForRedirect))},dependencies:[g.Sq,g.bT,s.qT,s.me,s.Zm,s.BC,s.cb,s.tU,s.vS,s.j4,s.JD,p.y8,m.Ei,b.l,f.Wk,h,g.Jj],styles:['.payment-warning-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4e6ef;border-radius:8px;padding:2rem}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem 1rem;border-radius:20px}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .status-dot.active[_ngcontent-%COMP%]{background-color:#28a745}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .status-dot.inactive[_ngcontent-%COMP%]{background-color:#dc3545}.payment-type-card[_ngcontent-%COMP%]{border:2px solid #e4e6ef;border-radius:1rem;padding:1.5rem;cursor:pointer;transition:all .3s ease;background-color:#fff;position:relative;height:200px;display:flex;align-items:center;justify-content:center;overflow:hidden}.payment-type-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#0978b908,#fff0 60%);opacity:0;transition:opacity .3s ease}.payment-type-card[_ngcontent-%COMP%]:hover{border-color:#0978b9;transform:translateY(-3px);box-shadow:0 .5rem 1.5rem #0978b926}.payment-type-card[_ngcontent-%COMP%]:hover:before{opacity:1}.payment-type-card.selected[_ngcontent-%COMP%]{border-color:#0978b9;background-color:#0978b90d;box-shadow:0 .5rem 1.5rem #0978b933}.payment-type-card.selected[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{color:#0978b9}.payment-type-card.selected[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{filter:grayscale(0%);opacity:1;transform:scale(1.05)}.payment-type-card.selected[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{color:#0978b9;font-weight:600}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]{text-align:center}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{margin-bottom:1.25rem;transition:all .3s ease;height:100px;display:flex;align-items:center;justify-content:center}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{max-height:100px;max-width:120px;object-fit:contain;filter:grayscale(80%);opacity:.8;transition:all .3s ease}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;color:#181c32;transition:color .3s ease;letter-spacing:.01em}.payment-type-card[_ngcontent-%COMP%]   .payment-type-check[_ngcontent-%COMP%]{position:absolute;top:12px;inset-inline-end:12px;font-size:1.4rem;background:#0978b9;color:#fff!important;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 6px #0978b933;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.payment-type-card[_ngcontent-%COMP%]   .payment-type-check[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.search-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.search-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:.75rem;border:1px solid #e4e6ef;padding:.85rem 1.25rem;font-size:1rem;transition:all .25s ease;background-color:#f9f9f9}.search-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#0978b9;box-shadow:0 0 0 .25rem #0978b926;background-color:#fff}.search-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#a1a5b7;font-style:italic}.countries-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;max-height:400px;overflow-y:auto;padding:.75rem;border:1px solid #e4e6ef;border-radius:.75rem;background-color:#f9f9f9;box-shadow:inset 0 2px 6px #00000008}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0978b9;border-radius:10px;opacity:.7}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0866a0}.country-card[_ngcontent-%COMP%]{border:1px solid #e4e6ef;border-radius:.75rem;padding:1rem 1.25rem;cursor:pointer;transition:all .3s ease;background-color:#fff;position:relative}.country-card[_ngcontent-%COMP%]:hover{border-color:#0978b9;transform:translateY(-2px);box-shadow:0 .3rem .8rem #0978b926}.country-card.selected[_ngcontent-%COMP%]{border-color:#0978b9;background-color:#0978b90d;box-shadow:0 .3rem .8rem #0978b933}.country-card.selected[_ngcontent-%COMP%]   .country-name[_ngcontent-%COMP%]{color:#0978b9;font-weight:600}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]   .country-flag-option[_ngcontent-%COMP%]{flex-shrink:0}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]   .country-flag-option[_ngcontent-%COMP%]   .flag-image[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:4px;object-fit:cover;border:1px solid #e4e6ef;box-shadow:0 2px 4px #0000000d;transition:all .3s ease}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]   .country-name[_ngcontent-%COMP%]{font-size:1.05rem;color:#181c32;font-weight:500;transition:color .3s ease;flex:1;min-width:0;word-wrap:break-word;letter-spacing:.01em}.country-card[_ngcontent-%COMP%]   .country-check[_ngcontent-%COMP%]{position:absolute;top:10px;inset-inline-end:10px;font-size:1rem;background:#0978b9;color:#fff!important;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0978b933;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.country-card[_ngcontent-%COMP%]   .country-check[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .5rem 2rem #00000014;border-radius:1rem;overflow:hidden}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e4e6ef;padding:1.75rem 2rem;position:relative}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:2rem;width:50px;height:3px;background:#0978b9;border-radius:3px}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:0;font-weight:700;color:#181c32;font-size:1.4rem;letter-spacing:.01em}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2.5rem 2rem}.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background-color:#fff;border-top:1px solid #e4e6ef;padding:1.5rem 2rem}.btn-info[_ngcontent-%COMP%]{background-color:#ebf3fe;border-color:#ebf3fe;color:#0978b9;border-radius:.75rem;padding:.75rem 2rem;font-weight:500;letter-spacing:.03em;transition:all .3s ease;position:relative;overflow:hidden}.btn-info[_ngcontent-%COMP%]:hover{background-color:#d4e8fc;border-color:#d4e8fc;transform:translateY(-2px)}.btn-info[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-info[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.btn-light-info[_ngcontent-%COMP%]{background-color:#ebf3fe;border-color:#ebf3fe;color:#0978b9}.btn-light-info[_ngcontent-%COMP%]:hover{background-color:#d4e8fc;border-color:#d4e8fc}.selected-country-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-color:#0978b9!important;border-width:2px}.country-item[_ngcontent-%COMP%]{border-radius:8px;transition:all .3s ease}.country-item[_ngcontent-%COMP%]:hover{background-color:#ebf3fe;transform:translate(4px)}.hover-light-info[_ngcontent-%COMP%]:hover{background-color:#ebf3fe!important}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.badge.badge-circle[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600}.badge.badge-circle.badge-info[_ngcontent-%COMP%]{background-color:#0978b9;color:#fff}.badge.badge-light-success[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#4caf50}.badge.badge-light-warning[_ngcontent-%COMP%]{background-color:#fff8e1;color:#ff9800}@media (max-width: 768px){.countries-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}.payment-type-card[_ngcontent-%COMP%]{height:150px;padding:1.5rem 1rem}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{margin-bottom:.75rem}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{max-height:80px}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{font-size:1.1rem}.card-body[_ngcontent-%COMP%]{padding:1.75rem 1.5rem}.card-header[_ngcontent-%COMP%]{padding:1.5rem 1.75rem}.card-header[_ngcontent-%COMP%]:after{left:1.75rem;width:40px}.card-footer[_ngcontent-%COMP%]{padding:1.25rem 1.75rem}}@media (max-width: 576px){.countries-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.payment-type-card[_ngcontent-%COMP%]{height:120px;padding:1rem}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{margin-bottom:.5rem;height:70px}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{max-height:70px;max-width:100px}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{font-size:1rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem 1.25rem}.card-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.25rem}.card-header[_ngcontent-%COMP%]:after{left:1.5rem;width:35px}.card-footer[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.btn-info[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem}}.border-gray-200[_ngcontent-%COMP%]{border:2px solid #e4e6ef!important}']})}return o})();var yt=l(2016),Ct=l(7112),vt=l(7415);const At=["phoneInput"],xt=()=>({width:"90vw",maxWidth:"800px"}),Pt=()=>({width:"90vw",maxWidth:"500px"});function Ft(o,u){if(1&o){const e=t.RV6();t.j41(0,"img",45),t.bIt("error",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG();return t.Njj(i.onFlagError(n))}),t.k0s()}if(2&o){const e=t.XpG().$implicit,r=t.XpG();t.Y8G("src",r.getFlagUrl(e.flag),t.B4B)("alt",e.name)}}function kt(o,u){if(1&o&&(t.j41(0,"div",27),t.DNE(1,Ft,1,2,"img",44),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&o){const e=u.$implicit;t.R7$(),t.Y8G("ngIf",e.showFlag),t.R7$(2),t.JRh(e.name)}}function St(o,u){if(1&o){const e=t.RV6();t.j41(0,"img",45),t.bIt("error",function(){t.eBV(e);const n=t.XpG(2).$implicit,i=t.XpG();return t.Njj(i.onFlagError(n))}),t.k0s()}if(2&o){const e=t.XpG(2).$implicit,r=t.XpG();t.Y8G("src",r.getFlagUrl(e.flag),t.B4B)("alt",e.name)}}function Ot(o,u){if(1&o&&(t.j41(0,"div",27),t.DNE(1,St,1,2,"img",44),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",e.showFlag),t.R7$(2),t.JRh(e.name)}}function Mt(o,u){1&o&&t.DNE(0,Ot,4,2,"div",46),2&o&&t.Y8G("ngIf",u.$implicit)}function Et(o,u){if(1&o&&(t.j41(0,"div",47),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("countryId")," ")}}function It(o,u){if(1&o&&(t.j41(0,"div",48),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("accountName")," ")}}function wt(o,u){if(1&o&&(t.j41(0,"div",48),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("iban")," ")}}function Tt(o,u){if(1&o&&(t.j41(0,"div",48),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("address")," ")}}function jt(o,u){if(1&o&&(t.j41(0,"div",48),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("swift_code")," ")}}function Rt(o,u){1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o&&(t.R7$(),t.SpI(" ","\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0631\u0645\u0632"," "))}function Dt(o,u){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Lme(" ",e.resendCooldown,"","\u062b"," ")}}function $t(o,u){if(1&o){const e=t.RV6();t.qex(0),t.nrm(1,"input",49),t.j41(2,"button",50),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.resendOtp())}),t.DNE(3,Rt,2,1,"span",23)(4,Dt,2,2,"span",23),t.k0s(),t.bVm()}if(2&o){const e=t.XpG();t.R7$(),t.AVh("is-invalid",e.getFieldError("code")),t.R7$(),t.AVh("border-danger",e.getFieldError("code")),t.Y8G("disabled",!e.canResendOtp),t.R7$(),t.Y8G("ngIf",e.canResendOtp),t.R7$(),t.Y8G("ngIf",!e.canResendOtp)}}function Gt(o,u){1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o&&(t.R7$(),t.SpI(" ","Get Code"," "))}function Nt(o,u){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Lme(" ",e.resendCooldown,"","s"," ")}}function Vt(o,u){if(1&o){const e=t.RV6();t.qex(0),t.nrm(1,"input",51),t.j41(2,"button",52),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.resendOtp())}),t.DNE(3,Gt,2,1,"span",23)(4,Nt,2,2,"span",23),t.k0s(),t.bVm()}if(2&o){const e=t.XpG();t.R7$(),t.AVh("is-invalid",e.getFieldError("code")),t.R7$(),t.AVh("border-danger",e.getFieldError("code")),t.Y8G("disabled",!e.canResendOtp),t.R7$(),t.Y8G("ngIf",e.canResendOtp),t.R7$(),t.Y8G("ngIf",!e.canResendOtp)}}function Lt(o,u){if(1&o&&(t.j41(0,"div",47),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("code")," ")}}function Yt(o,u){if(1&o&&(t.j41(0,"div",48),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.getFieldError("termsAccepted")," ")}}function Xt(o,u){if(1&o&&(t.j41(0,"div",58),t.nrm(1,"i",59),t.EFF(2),t.k0s()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0642\u0628\u0648\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Terms & Conditions accepted"," ")}}function Bt(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",6)(1,"div",53),t.nrm(2,"input",54),t.j41(3,"label",55),t.EFF(4),t.j41(5,"a",56),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.openTermsDialog())}),t.EFF(6),t.k0s()(),t.DNE(7,Yt,2,1,"div",13)(8,Xt,3,1,"div",57),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.AVh("is-invalid",e.getFieldError("termsAccepted")),t.Y8G("disabled",e.termsAccepted),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0623\u0648\u0627\u0641\u0642 \u0639\u0644\u0649":"I agree to the"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Terms & Conditions"," "),t.R7$(),t.Y8G("ngIf",e.getFieldError("termsAccepted")),t.R7$(),t.Y8G("ngIf",e.termsAccepted)}}function Ut(o,u){1&o&&t.nrm(0,"span",60)}function Wt(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",61)(1,"h5",62),t.EFF(2),t.k0s(),t.j41(3,"div",63)(4,"button",64),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.printTerms())}),t.nrm(5,"i",65),t.k0s(),t.j41(6,"button",66),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.saveTerms())}),t.nrm(7,"i",67),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(2),t.JRh("ar"===e.lang?"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0645\u062d\u0641\u0638\u0629 \u0627\u0644\u062f\u0641\u0639":"Wallet Payment Terms & Conditions"),t.R7$(2),t.Y8G("disabled",e.isLoadingTerms),t.R7$(2),t.Y8G("disabled",e.isLoadingTerms)}}function zt(o,u){if(1&o&&(t.j41(0,"div",68)(1,"div",69)(2,"span",70),t.EFF(3),t.k0s()()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"Loading...")}}function Ht(o,u){if(1&o&&t.nrm(0,"div",71),2&o){const e=t.XpG();t.Y8G("innerHTML",e.termsContent,t.npT)}}function Jt(o,u){if(1&o&&(t.j41(0,"div",72),t.nrm(1,"i",73),t.j41(2,"p"),t.EFF(3),t.k0s()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Unable to load Terms & Conditions")}}function Kt(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",74)(1,"button",75),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.declineTerms())}),t.EFF(2),t.k0s(),t.j41(3,"button",76),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.acceptTerms())}),t.EFF(4),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0631\u0641\u0636":"Decline"," "),t.R7$(),t.Y8G("disabled",e.isLoadingTerms),t.R7$(),t.SpI(" ","ar"===e.lang?"\u0623\u0648\u0627\u0641\u0642":"I Agree"," ")}}function Zt(o,u){if(1&o&&(t.j41(0,"div",27),t.nrm(1,"i",77),t.j41(2,"h5",62),t.EFF(3),t.k0s()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u062a\u063a\u064a\u064a\u0631\u0627\u062a \u063a\u064a\u0631 \u0645\u062d\u0641\u0648\u0638\u0629":"Unsaved Changes")}}function qt(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",74)(1,"button",32),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onStayOnPage())}),t.EFF(2),t.k0s(),t.j41(3,"button",78),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onDiscardChanges())}),t.EFF(4),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0628\u0642\u0627\u0621 \u0641\u064a \u0627\u0644\u0635\u0641\u062d\u0629":"Stay on Page"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u062c\u0627\u0647\u0644 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a":"Discard Changes"," ")}}let Qt=(()=>{class o extends _.${fb;router;paymentService;countriesService;profileService;manualAccountForm;showValidationErrors=!1;isEditing=!1;existingData=null;hasExistingManualAccount=!1;countries=[];userRoles=[];isCompanyAccount=!1;resendCooldown=0;canResendOtp=!0;formattedPhoneNumber="";selectedCountry=null;termsAccepted=!1;showTermsDialog=!1;termsContent="";isLoadingTerms=!1;initialFormValue=null;showUnsavedChangesDialog=!1;pendingNavigation=()=>{};isFormDirtyOnEdit=!1;phoneInput;constructor(e,r,n,i,a,c){super(e),this.fb=r,this.router=n,this.paymentService=i,this.countriesService=a,this.profileService=c,this.manualAccountForm=this.fb.group({countryId:["",[s.k0.required]],accountName:["",[s.k0.required,s.k0.minLength(2)]],iban:["",[s.k0.required,s.k0.minLength(10)]],address:["",[s.k0.required,s.k0.minLength(5)]],swift_code:[""],phoneCountryCode:["",[s.k0.required]],phoneNumber:["",[s.k0.required,s.k0.minLength(7)]],code:["",[s.k0.required,s.k0.minLength(4)]],termsAccepted:[!1,[s.k0.requiredTrue]]})}ngOnInit(){this.loadUserProfile(),this.loadCountries(),this.trackFormChanges()}ngAfterViewInit(){this.isEditing&&this.phoneInput&&setTimeout(()=>{this.updatePhoneInputDisplay()})}trackFormChanges(){this.manualAccountForm.valueChanges.subscribe(()=>{this.isEditing&&this.initialFormValue&&(this.isFormDirtyOnEdit=this.hasFormChanged())})}hasFormChanged(){if(!this.initialFormValue)return!1;const e=this.manualAccountForm.getRawValue(),r=["countryId","accountName","iban","address","swift_code","phoneCountryCode","phoneNumber"];for(const n of r)if(e[n]!==this.initialFormValue[n])return!0;return!1}canDeactivate(){return!this.isEditing||!this.hasFormChanged()||(this.showUnsavedChangesDialog=!0,!1)}unloadNotification(e){this.isEditing&&this.hasFormChanged()&&(e.returnValue=!0)}onStayOnPage(){this.showUnsavedChangesDialog=!1,this.canResendOtp&&this.resendOtp()}onDiscardChanges(){this.showUnsavedChangesDialog=!1,this.pendingNavigation&&(this.pendingNavigation(),this.pendingNavigation=()=>{})}loadUserProfile(){this.profileService.getProfile().subscribe({next:e=>{this.userRoles=e?.roles||[],this.isCompanyAccount=this.userRoles.includes("company")},error:e=>{console.error("Error loading user profile:",e)}})}loadCountries(){this.countriesService.getCountries().subscribe({next:e=>{this.countries=e.map(r=>({...r,showFlag:!0})),this.loadExistingData()},error:e=>{console.error("Error loading countries:",e),this.loadExistingData()}})}loadExistingData(){this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{const r=this.paymentService.getManualAccount(e.data);this.hasExistingManualAccount=null!==r;const i="true"===new URLSearchParams(window.location.search).get("edit");if(i&&r){this.isEditing=!0,this.existingData=r;let a="",c="";if(this.existingData.phone){const M=this.existingData.phone.match(/\(\+(\d+)\)(.+)/);M&&(a=M[1],c=M[2])}this.formattedPhoneNumber=this.existingData.phone||"",this.existingData.country&&this.setSelectedCountry(this.existingData.country);const O={countryId:this.existingData.country?.id||"",accountName:this.existingData.account_name||"",iban:this.existingData.iban||"",address:this.existingData.address||"",swift_code:this.existingData.swift_code||"",phoneCountryCode:a,phoneNumber:c.replace(/\D/g,""),termsAccepted:!0};this.manualAccountForm.patchValue(O),setTimeout(()=>{this.initialFormValue=this.manualAccountForm.getRawValue(),this.manualAccountForm.markAsPristine(),this.updatePhoneInputDisplay()})}else r?.country&&(this.setSelectedCountry(r.country),this.manualAccountForm.patchValue({countryId:r.country.id}));i||this.loadManualPaymentTerms()},error:()=>{console.log("No existing payment details"),this.hasExistingManualAccount=!1,this.isEditing=!1,this.loadManualPaymentTerms()}})}setSelectedCountry(e){const r=this.countries.find(n=>n.id===e.id);this.selectedCountry=r||{...e,region_id:0,iso2:"",iso3:"",nationality:"",nationalities:{en:"",ar:""},international_code:"",names:{en:e.name,ar:e.name},status:"active",showFlag:!0}}onCountryChange(e){const r=e.value;this.selectedCountry=r&&this.countries.find(n=>n.id===r)||null}onSubmit(){if(this.showValidationErrors=!0,this.markFormGroupTouched(),!this.isEditing||this.hasFormChanged()){if(this.manualAccountForm.valid){const e=this.selectedCountry?.id||this.manualAccountForm.value.countryId;if(!e)return void this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0628\u0644\u062f":"Please select a country");if(this.hasExistingManualAccount){const r={country_id:e,account_name:this.manualAccountForm.value.accountName,iban:this.manualAccountForm.value.iban.replace(/\s+/g,""),address:this.manualAccountForm.value.address,swift_code:this.manualAccountForm.value.swift_code,phone:this.formattedPhoneNumber||`${this.manualAccountForm.value.phoneCountryCode}${this.manualAccountForm.value.phoneNumber}`,code:this.manualAccountForm.value.code};this.paymentService.updateManualAccount(r).subscribe({next:()=>{this.initialFormValue=this.manualAccountForm.getRawValue(),this.manualAccountForm.markAsPristine(),this.isFormDirtyOnEdit=!1,this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0641\u0638":"Success","ar"===this.lang?"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062d\u0633\u0627\u0628 \u0628\u0646\u062c\u0627\u062d":"Account updated successfully"),this.router.navigate(["/app/insighter-dashboard/account-settings/payment-settings"])},error:n=>{this.handleServerErrors(n)}})}else{const r={country_id:e,account_name:this.manualAccountForm.value.accountName,iban:this.manualAccountForm.value.iban.replace(/\s+/g,""),address:this.manualAccountForm.value.address,swift_code:this.manualAccountForm.value.swift_code,phone:this.formattedPhoneNumber||`${this.manualAccountForm.value.phoneCountryCode}${this.manualAccountForm.value.phoneNumber}`,code:this.manualAccountForm.value.code,accept_terms:this.termsAccepted};this.paymentService.setManualAccount(r).subscribe({next:()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0641\u0638":"Success","ar"===this.lang?"\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062d\u0633\u0627\u0628 \u0628\u0646\u062c\u0627\u062d":"Account created successfully"),this.router.navigate(["/app/insighter-dashboard/account-settings/payment-settings"])},error:n=>{this.handleServerErrors(n)}})}}}else this.showInfo("ar"===this.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a":"Information","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0625\u062c\u0631\u0627\u0621 \u0623\u064a \u062a\u063a\u064a\u064a\u0631\u0627\u062a":"No changes were made")}markFormGroupTouched(){Object.keys(this.manualAccountForm.controls).forEach(e=>{const r=this.manualAccountForm.get(e);r?.markAsTouched(),r?.markAsDirty()})}goBack(){this.isEditing&&this.hasFormChanged()?(this.showUnsavedChangesDialog=!0,this.pendingNavigation=()=>{this.router.navigate(["/app/insighter-dashboard/account-settings/payment-settings"])}):this.router.navigate(this.isEditing?["/app/insighter-dashboard/account-settings/payment-settings"]:["/setup-payment-info"])}onCountryCodeChange(e){this.manualAccountForm.get("phoneCountryCode")?.setValue(e)}onPhoneNumberChange(e){this.manualAccountForm.get("phoneNumber")?.setValue(e)}onFormattedPhoneNumberChange(e){this.formattedPhoneNumber=e}updatePhoneInputDisplay(){if(this.phoneInput){const e=this.manualAccountForm.get("phoneCountryCode")?.value,r=this.manualAccountForm.get("phoneNumber")?.value;e&&(this.phoneInput.countryCode=e,this.phoneInput.updateMask(),this.phoneInput.updatePlaceholder()),r&&(this.phoneInput.value=r)}}onFlagError(e){e.showFlag=!1}resendOtp(){this.canResendOtp&&this.paymentService.generatePaymentOTP().subscribe({next:()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062c\u062f\u064a\u062f \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"New verification code sent to your email"),this.startCooldown()},error:e=>{this.handleServerErrors(e)}})}getFlagUrl(e){return`assets/media/flags/${e}.svg`}openTermsDialog(){this.showTermsDialog=!0}closeTermsDialog(){this.showTermsDialog=!1}acceptTerms(){this.termsAccepted=!0,this.manualAccountForm.patchValue({termsAccepted:!0}),this.closeTermsDialog()}declineTerms(){this.termsAccepted=!1,this.manualAccountForm.patchValue({termsAccepted:!1}),this.closeTermsDialog()}loadManualPaymentTerms(){this.isLoadingTerms=!0,this.paymentService.getManualPaymentTerms().subscribe({next:e=>{this.termsContent=e.data.guideline,this.isLoadingTerms=!1},error:()=>{this.isLoadingTerms=!1}})}printTerms(){const e=window.open("","_blank");if(e){const r="ar"===this.lang?"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0645\u062d\u0641\u0638\u0629 \u0627\u0644\u062f\u0641\u0639":"Wallet Payment Terms & Conditions",n=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>${r}</title>\n          <style>\n            body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }\n            h1 { color: #333; text-align: center; margin-bottom: 20px; }\n            .content { margin: 0 auto; max-width: 800px; }\n          </style>\n        </head>\n        <body>\n          <h1>${r}</h1>\n          <div class="content">${this.termsContent}</div>\n        </body>\n        </html>\n      `;e.document.open(),e.document.write(n),e.document.close(),setTimeout(()=>{e.print()},500)}}saveTerms(){if(this.termsContent){const e="ar"===this.lang?"\u0634\u0631\u0648\u0637-\u0648\u0623\u062d\u0643\u0627\u0645-\u0645\u062d\u0641\u0638\u0629-\u0627\u0644\u062f\u0641\u0639":"Wallet-Payment-Terms-and-Conditions",r=this.stripHtmlTags(this.termsContent),n=new Blob([r],{type:"text/plain"}),i=window.URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=`${e}.txt`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(i),document.body.removeChild(a)}}stripHtmlTags(e){const r=document.createElement("div");return r.innerHTML=e,r.textContent||r.innerText||""}startCooldown(){this.canResendOtp=!1,this.resendCooldown=30;const e=setInterval(()=>{this.resendCooldown--,this.resendCooldown<=0&&(this.canResendOtp=!0,clearInterval(e))},1e3)}getAccountNameLabel(){return this.isCompanyAccount?"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a \u0644\u0644\u0634\u0631\u0643\u0629":"Company Legal Name":"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644":"Full Name"}getFieldError(e){const r=this.manualAccountForm.get(e);if(r?.errors&&(r.dirty||r.touched||this.showValidationErrors)){if(r.errors.required||r.errors.requiredTrue)return"termsAccepted"===e?"ar"===this.lang?"\u064a\u062c\u0628 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"You must agree to the Terms & Conditions":"ar"===this.lang?`${this.getFieldLabel(e)} \u0645\u0637\u0644\u0648\u0628`:`${this.getFieldLabel(e)} is required`;if(r.errors.minlength){const n=r.errors.minlength.requiredLength;return"ar"===this.lang?`${this.getFieldLabel(e)} \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 ${n} \u0623\u062d\u0631\u0641`:`${this.getFieldLabel(e)} must be at least ${n} characters`}}return""}getFieldLabel(e){const r={countryId:{en:"Country",ar:"\u0627\u0644\u0628\u0644\u062f"},accountName:this.isCompanyAccount?{en:"Company Legal Name",ar:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a \u0644\u0644\u0634\u0631\u0643\u0629"}:{en:"Full Name",ar:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"},iban:{en:"IBAN",ar:"\u0631\u0642\u0645 \u0627\u0644\u0622\u064a\u0628\u0627\u0646"},address:{en:"Address",ar:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"},swift_code:{en:"SWIFT Code",ar:"\u0631\u0645\u0632 \u0627\u0644\u0633\u0648\u064a\u0641\u062a"},phoneCountryCode:{en:"Country Code",ar:"\u0631\u0645\u0632 \u0627\u0644\u0628\u0644\u062f"},phoneNumber:{en:"Phone Number",ar:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"},code:{en:"Verification Code",ar:"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642"},termsAccepted:{en:"Terms & Conditions",ar:"\u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645"}};return"ar"===this.lang?r[e].ar:r[e].en}handleServerErrors(e){if(e?.error)if(e.error.errors){const r=e.error.errors;for(const n in r)if(r.hasOwnProperty(n)){const i=r[n];this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",Array.isArray(i)?i.join(", "):i)}}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",e.error.message?e.error.message:"ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.");else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.")}static \u0275fac=function(r){return new(r||o)(t.rXU(t.zZn),t.rXU(s.ok),t.rXU(f.Ix),t.rXU(v.W),t.rXU(yt.C),t.rXU(Ct.p))};static \u0275cmp=t.VBU({type:o,selectors:[["app-manual-account"]],viewQuery:function(r,n){if(1&r&&t.GBs(At,5),2&r){let i;t.mGM(i=t.lsd())&&(n.phoneInput=i.first)}},hostBindings:function(r,n){1&r&&t.bIt("beforeunload",function(a){return n.unloadNotification(a)},!1,t.tSv)},features:[t.Vt3],decls:88,vars:84,consts:[["phoneInput",""],[3,"title","subtitle"],[1,"container-fluid","gradient-background",2,"padding-top","50px"],[1,"row","justify-content-center"],[1,"col-lg-6","col-xl-5"],[3,"ngSubmit","formGroup"],[1,"mb-6"],[1,"form-label","required"],["formControlName","countryId","optionLabel","name","optionValue","id","styleClass","w-100",3,"onChange","options","filter","filterBy","showClear","placeholder","filterPlaceholder"],["pTemplate","item"],["pTemplate","selectedItem"],["class","invalid-feedback d-block",4,"ngIf"],["type","text","formControlName","accountName",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"form-text","text-muted"],[1,"fas","fa-info-circle","me-1"],["type","text","formControlName","iban",1,"form-control",3,"placeholder"],["type","text","formControlName","address",1,"form-control",3,"placeholder"],[1,"form-label"],[1,"text-gray-500"],["type","text","formControlName","swift_code",1,"form-control",3,"placeholder"],[3,"countryCodeChange","phoneNumberChange","formattedPhoneNumberChange","flagError","countries","placeholder","searchPlaceholder","lang","isRequired","showValidationErrors","countryCodeError","phoneNumberError","initialCountryCode","initialPhoneNumber"],[1,"input-group"],[4,"ngIf"],[1,"fas","fa-envelope","me-1"],["class","mb-6",4,"ngIf"],[1,"alert","alert-light-info","mb-0"],[1,"d-flex","align-items-center"],[1,"fas","fa-info-circle","text-info","fs-2","me-3"],[1,"mb-1","fw-bold"],[1,"mb-0","text-muted"],[1,"d-flex","justify-content-between","pt-5"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-info",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[3,"visibleChange","visible","modal","closable","draggable","resizable"],["pTemplate","header"],[1,"terms-content",2,"max-height","60vh","overflow-y","auto"],["class","text-center py-4",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["pTemplate","footer"],[1,"py-3"],[1,"mb-0"],["class","me-3","style","width: 24px; height: 16px; object-fit: cover;",3,"src","alt","error",4,"ngIf"],[1,"me-3",2,"width","24px","height","16px","object-fit","cover",3,"error","src","alt"],["class","d-flex align-items-center",4,"ngIf"],[1,"invalid-feedback","d-block"],[1,"invalid-feedback"],["type","text","formControlName","code","placeholder","\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642","dir","rtl",1,"form-control","text-end",2,"border-radius","0 0.375rem 0.375rem 0"],["type","button",1,"btn","btn-outline-info",2,"border-radius","0.375rem 0 0 0.375rem",3,"click","disabled"],["type","text","formControlName","code","placeholder","Enter verification code","dir","ltr",1,"form-control",2,"border-radius","0.375rem 0 0 0.375rem"],["type","button",1,"btn","btn-info",2,"border-radius","0 0.375rem 0.375rem 0",3,"click","disabled"],[1,"form-check"],["type","checkbox","id","termsAccepted","formControlName","termsAccepted",1,"form-check-input",3,"disabled"],["for","termsAccepted",1,"form-check-label","required"],["href","javascript:void(0)",1,"text-info","text-decoration-underline",3,"click"],["class","form-text text-success mt-1",4,"ngIf"],[1,"form-text","text-success","mt-1"],[1,"fas","fa-check-circle","me-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"d-flex","justify-content-between","align-items-center","w-100"],[1,"m-0"],[1,"d-flex"],[1,"btn","btn-sm","btn-icon","me-2",3,"click","disabled"],[1,"ki-outline","ki-printer","fs-3"],[1,"btn","btn-sm","btn-icon",3,"click","disabled"],[1,"ki-outline","ki-save-2","fs-3"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-info"],[1,"visually-hidden"],[3,"innerHTML"],[1,"text-center","py-4","text-muted"],[1,"fas","fa-exclamation-triangle","fs-2x","mb-3"],[1,"d-flex","justify-content-end","gap-3"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-exclamation-triangle","text-warning","fs-2","me-3"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,n){if(1&r){const i=t.RV6();t.nrm(0,"p-toast")(1,"app-payment-header",1),t.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),t.bIt("ngSubmit",function(){return t.eBV(i),t.Njj(n.onSubmit())}),t.j41(6,"div",6)(7,"label",7),t.EFF(8),t.k0s(),t.j41(9,"p-dropdown",8),t.bIt("onChange",function(c){return t.eBV(i),t.Njj(n.onCountryChange(c))}),t.DNE(10,kt,4,2,"ng-template",9)(11,Mt,1,1,"ng-template",10),t.k0s(),t.DNE(12,Et,2,1,"div",11),t.k0s(),t.j41(13,"div",6)(14,"label",7),t.EFF(15),t.k0s(),t.nrm(16,"input",12),t.DNE(17,It,2,1,"div",13),t.j41(18,"div",14),t.nrm(19,"i",15),t.EFF(20),t.k0s()(),t.j41(21,"div",6)(22,"label",7),t.EFF(23),t.k0s(),t.nrm(24,"input",16),t.DNE(25,wt,2,1,"div",13),t.j41(26,"div",14),t.EFF(27),t.k0s()(),t.j41(28,"div",6)(29,"label",7),t.EFF(30),t.k0s(),t.nrm(31,"input",17),t.DNE(32,Tt,2,1,"div",13),t.j41(33,"div",14),t.nrm(34,"i",15),t.EFF(35),t.k0s()(),t.j41(36,"div",6)(37,"label",18),t.EFF(38),t.j41(39,"span",19),t.EFF(40),t.k0s()(),t.nrm(41,"input",20),t.DNE(42,jt,2,1,"div",13),t.k0s(),t.j41(43,"div",6)(44,"label",7),t.EFF(45),t.k0s(),t.j41(46,"app-phone-number-input",21,0),t.bIt("countryCodeChange",function(c){return t.eBV(i),t.Njj(n.onCountryCodeChange(c))})("phoneNumberChange",function(c){return t.eBV(i),t.Njj(n.onPhoneNumberChange(c))})("formattedPhoneNumberChange",function(c){return t.eBV(i),t.Njj(n.onFormattedPhoneNumberChange(c))})("flagError",function(c){return t.eBV(i),t.Njj(n.onFlagError(c))}),t.k0s()(),t.j41(48,"div",6)(49,"label",7),t.EFF(50),t.k0s(),t.j41(51,"div",22),t.DNE(52,$t,5,7,"ng-container",23)(53,Vt,5,7,"ng-container",23),t.k0s(),t.DNE(54,Lt,2,1,"div",11),t.j41(55,"div",14),t.nrm(56,"i",24),t.EFF(57),t.k0s()(),t.DNE(58,Bt,9,7,"div",25),t.j41(59,"div",26)(60,"div",27),t.nrm(61,"i",28),t.j41(62,"div")(63,"p",29),t.EFF(64),t.k0s(),t.j41(65,"p",30),t.EFF(66),t.k0s()()()(),t.j41(67,"div",31)(68,"button",32),t.bIt("click",function(){return t.eBV(i),t.Njj(n.goBack())}),t.EFF(69),t.k0s(),t.j41(70,"button",33),t.nI1(71,"async"),t.DNE(72,Ut,1,0,"span",34),t.nI1(73,"async"),t.EFF(74),t.k0s()()()()()(),t.j41(75,"p-dialog",35),t.mxI("visibleChange",function(c){return t.eBV(i),t.DH7(n.showTermsDialog,c)||(n.showTermsDialog=c),t.Njj(c)}),t.DNE(76,Wt,8,3,"ng-template",36),t.j41(77,"div",37),t.DNE(78,zt,4,1,"div",38)(79,Ht,1,1,"div",39)(80,Jt,4,1,"div",40),t.k0s(),t.DNE(81,Kt,5,3,"ng-template",41),t.k0s(),t.j41(82,"p-dialog",35),t.mxI("visibleChange",function(c){return t.eBV(i),t.DH7(n.showUnsavedChangesDialog,c)||(n.showUnsavedChangesDialog=c),t.Njj(c)}),t.DNE(83,Zt,4,1,"ng-template",36),t.j41(84,"div",42)(85,"p",43),t.EFF(86),t.k0s()(),t.DNE(87,qt,5,2,"ng-template",41),t.k0s()}if(2&r){let i,a;t.R7$(),t.Y8G("title","ar"===n.lang?"\u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a":"Bank Account Setup")("subtitle","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0644\u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a":"Enter your bank account details to receive payments"),t.R7$(4),t.Y8G("formGroup",n.manualAccountForm),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0627\u0644\u0628\u0644\u062f":"Country"," "),t.R7$(),t.AVh("p-invalid",n.getFieldError("countryId")),t.Y8G("options",n.countries)("filter",!0)("filterBy","name")("showClear",!0)("placeholder","ar"===n.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0628\u0644\u062f":"Select Country")("filterPlaceholder","ar"===n.lang?"\u0627\u0628\u062d\u062b \u0639\u0646 \u0628\u0644\u062f...":"Search for a country..."),t.R7$(3),t.Y8G("ngIf",n.getFieldError("countryId")),t.R7$(3),t.SpI(" ",n.getAccountNameLabel()," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("accountName")),t.Y8G("placeholder",n.isCompanyAccount?"ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a \u0644\u0644\u0634\u0631\u0643\u0629":"Enter company legal name":"ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644":"Enter full name"),t.R7$(),t.Y8G("ngIf",n.getFieldError("accountName")),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0627\u0628\u0642\u0627\u064b \u062a\u0645\u0627\u0645\u0627\u064b \u0644\u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u0628\u0646\u0643\u064a":"Should be exactly as the name of the bank account"," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0631\u0642\u0645 \u0627\u0644\u0622\u064a\u0628\u0627\u0646 (IBAN)":"IBAN Number"," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("iban")),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0631\u0642\u0645 \u0627\u0644\u0622\u064a\u0628\u0627\u0646":"Enter IBAN number"),t.R7$(),t.Y8G("ngIf",n.getFieldError("iban")),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0645\u062b\u0627\u0644: SA03 8000 0000 6080 1016 7519":"Example: SA03 8000 0000 6080 1016 7519"," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0627\u0644\u0639\u0646\u0648\u0627\u0646":"Address"," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("address")),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0627\u0644\u0639\u0646\u0648\u0627\u0646":"Enter address"),t.R7$(),t.Y8G("ngIf",n.getFieldError("address")),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0645\u0637\u0627\u0628\u0642\u0627\u064b \u062a\u0645\u0627\u0645\u0627\u064b \u0644\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0630\u0643\u0648\u0631 \u0641\u064a \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u0628\u0646\u0643\u064a":"Should be exactly as the address of the bank account"," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0631\u0645\u0632 \u0627\u0644\u0633\u0648\u064a\u0641\u062a (SWIFT)":"SWIFT Code"," "),t.R7$(2),t.JRh("ar"===n.lang?"(\u0627\u062e\u062a\u064a\u0627\u0631\u064a)":"(Optional)"),t.R7$(),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u0633\u0648\u064a\u0641\u062a":"Enter SWIFT code"),t.R7$(),t.Y8G("ngIf",n.getFieldError("swift_code")),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641":"Phone Number"," "),t.R7$(),t.Y8G("countries",n.countries)("placeholder","ar"===n.lang?"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641\u0643":"Your phone number")("searchPlaceholder","Search countries...")("lang",n.lang)("isRequired",!0)("showValidationErrors",!0)("countryCodeError",n.getFieldError("phoneCountryCode"))("phoneNumberError",n.getFieldError("phoneNumber"))("initialCountryCode",null==(i=n.manualAccountForm.get("phoneCountryCode"))?null:i.value)("initialPhoneNumber",null==(a=n.manualAccountForm.get("phoneNumber"))?null:a.value),t.R7$(4),t.SpI(" ","ar"===n.lang?"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Verification Code"," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("code")),t.R7$(),t.Y8G("ngIf","ar"===n.lang),t.R7$(),t.Y8G("ngIf","en"===n.lang),t.R7$(),t.Y8G("ngIf",n.getFieldError("code")),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0633\u064a\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0639\u0646\u0648\u0627\u0646 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"Verification code will be sent to your email address"," "),t.R7$(),t.Y8G("ngIf",!n.isEditing),t.R7$(6),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0647\u0627\u0645\u0629":"Important Information"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u062a\u0623\u0643\u062f \u0645\u0646 \u0635\u062d\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u062f\u062e\u0644\u0629. \u0633\u064a\u062a\u0645 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0644\u062a\u062d\u0648\u064a\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0625\u0644\u064a\u0643.":"Please ensure the information is correct. These details will be used to transfer payments to you."," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0627\u0644\u0633\u0627\u0628\u0642":"Back"," "),t.R7$(),t.Y8G("disabled",t.bMT(71,78,n.paymentService.isLoading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(73,80,n.paymentService.isLoading$)),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a":"Update Settings"," "),t.R7$(),t.Aen(t.lJ4(82,xt)),t.R50("visible",n.showTermsDialog),t.Y8G("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),t.R7$(3),t.Y8G("ngIf",n.isLoadingTerms),t.R7$(),t.Y8G("ngIf",!n.isLoadingTerms&&n.termsContent),t.R7$(),t.Y8G("ngIf",!n.isLoadingTerms&&!n.termsContent),t.R7$(2),t.Aen(t.lJ4(83,Pt)),t.R50("visible",n.showUnsavedChangesDialog),t.Y8G("modal",!0)("closable",!1)("draggable",!1)("resizable",!1),t.R7$(4),t.SpI(" ","ar"===n.lang?"\u0644\u062f\u064a\u0643 \u062a\u063a\u064a\u064a\u0631\u0627\u062a \u063a\u064a\u0631 \u0645\u062d\u0641\u0648\u0638\u0629. \u0647\u0644 \u062a\u0631\u064a\u062f \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629 \u0648\u0641\u0642\u062f\u0627\u0646 \u0647\u0630\u0647 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a\u061f":"You have unsaved changes. Do you want to continue and lose these changes?"," ")}},dependencies:[g.bT,s.qT,s.me,s.Zm,s.BC,s.cb,s.j4,s.JD,p.y8,m.Ei,b.l,C.ms,vt.D,h,g.Jj],styles:['.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .1rem 1rem #00000012}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e4e6ef;padding:1.5rem}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:0;font-weight:600;color:#181c32}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #e4e6ef;padding:1.5rem}.form-control[_ngcontent-%COMP%]{border-radius:.475rem;border:1px solid #e4e6ef;padding:.75rem 1rem;font-size:1rem;transition:border-color .15s ease,box-shadow .15s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#0978b9;box-shadow:0 0 0 .2rem #0978b940}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#f1416c}.form-control[_ngcontent-%COMP%]::placeholder{color:#a1a5b7}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#181c32;margin-bottom:.5rem}.form-label.required[_ngcontent-%COMP%]:after{content:"*";color:#f1416c;margin-left:.25rem}.invalid-feedback[_ngcontent-%COMP%]{font-size:.875rem;color:#f1416c}.form-text[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.25rem}.btn-info[_ngcontent-%COMP%]{background-color:#0978b9;border-color:#0978b9}.btn-info[_ngcontent-%COMP%]:hover{background-color:#085a8a;border-color:#085a8a}.btn-info[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-light[_ngcontent-%COMP%]{background-color:#f5f8fa;border-color:#e4e6ef;color:#7e8299}.btn-light[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#d3d6db;color:#5e6278}.alert-light-info[_ngcontent-%COMP%]{background-color:#0978b90d;border:1px solid rgba(9,120,185,.2);color:#0978b9}.alert-light-info[_ngcontent-%COMP%]   .text-info[_ngcontent-%COMP%]{color:#0978b9!important}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1.5rem}.card-footer[_ngcontent-%COMP%]{padding:1.25rem}.d-flex.justify-content-between[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.d-flex.justify-content-between[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.d-flex.justify-content-between[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{order:2}.d-flex.justify-content-between[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{order:1}}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}']})}return o})();const te=()=>({width:"90vw",maxWidth:"500px"});function ee(o,u){if(1&o&&(t.j41(0,"div")(1,"h4",27),t.EFF(2),t.k0s(),t.j41(3,"p",28),t.EFF(4),t.k0s(),t.j41(5,"p",12),t.EFF(6),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe...":"Setting up Stripe account..."," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"Verification code sent to your email"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631 \u0642\u0644\u064a\u0644\u0627\u064b":"Please wait a moment"," ")}}function ne(o,u){if(1&o&&(t.j41(0,"div")(1,"h4",27),t.EFF(2),t.k0s(),t.j41(3,"p",12),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0633\u0627\u0628...":"Checking account status..."," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631 \u0642\u0644\u064a\u0644\u0627\u064b":"Please wait a moment"," ")}}function oe(o,u){if(1&o&&(t.j41(0,"div",22)(1,"div",23)(2,"div",24)(3,"span",25),t.EFF(4,"Loading..."),t.k0s()(),t.DNE(5,ee,7,3,"div",26)(6,ne,5,2,"div",26),t.k0s()()),2&o){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","refresh"===e.action),t.R7$(),t.Y8G("ngIf","refresh"!==e.action)}}function re(o,u){if(1&o&&(t.j41(0,"div",22)(1,"div",29)(2,"div",30),t.nrm(3,"i",31),t.k0s(),t.j41(4,"h4",32),t.EFF(5),t.k0s(),t.j41(6,"p",33),t.EFF(7),t.k0s(),t.j41(8,"div",34)(9,"span",25),t.EFF(10,"Loading..."),t.k0s()()()()),2&o){const e=t.XpG();t.R7$(5),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628 \u0628\u0646\u062c\u0627\u062d!":"Account Setup Complete!"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 \u0627\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629.":"Your Stripe account has been successfully set up. You will be redirected shortly."," ")}}function ie(o,u){1&o&&t.nrm(0,"span",45)}function ue(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",35)(1,"div",36)(2,"div",37),t.nrm(3,"i",38),t.k0s(),t.j41(4,"h4",39),t.EFF(5),t.k0s(),t.j41(6,"p",40),t.EFF(7),t.k0s(),t.j41(8,"div",41)(9,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goToSetup())}),t.EFF(10),t.k0s(),t.j41(11,"button",43),t.nI1(12,"async"),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.completeAccount())}),t.DNE(13,ie,1,0,"span",44),t.nI1(14,"async"),t.EFF(15),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(5),t.SpI(" ","ar"===e.lang?"\u064a\u062d\u062a\u0627\u062c \u0627\u0644\u062d\u0633\u0627\u0628 \u0625\u0644\u0649 \u0627\u0644\u0625\u0643\u0645\u0627\u0644":"Account Needs Completion"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0625\u0643\u0645\u0627\u0644 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0627\u0644\u0643\u0627\u0645\u0644. \u064a\u0631\u062c\u0649 \u0627\u0644\u0646\u0642\u0631 \u0639\u0644\u0649 \u0627\u0644\u0632\u0631 \u0623\u062f\u0646\u0627\u0647 \u0644\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0639\u0645\u0644\u064a\u0629.":"Your Stripe account setup is not fully complete. Please click the button below to complete the process."," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a":"Back to Setup"," "),t.R7$(),t.Y8G("disabled",t.bMT(12,6,e.paymentService.isLoading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(14,8,e.paymentService.isLoading$)),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u062d\u0633\u0627\u0628":"Complete Account"," ")}}function ae(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",35)(1,"div",46)(2,"div",47),t.nrm(3,"i",48),t.k0s(),t.j41(4,"h4",49),t.EFF(5),t.k0s(),t.j41(6,"p",40),t.EFF(7),t.k0s(),t.j41(8,"div",41)(9,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goToSetup())}),t.EFF(10),t.k0s(),t.j41(11,"button",50),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.checkStripeStatus())}),t.EFF(12),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(5),t.SpI(" ","ar"===e.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error Occurred"," "),t.R7$(2),t.SpI(" ",e.error," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a":"Back to Setup"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629":"Try Again"," ")}}function se(o,u){if(1&o){const e=t.RV6();t.j41(0,"span",51),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.resendOtp())}),t.nrm(1,"i",52),t.EFF(2),t.k0s()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0645\u0632":"Resend Code"," ")}}function ce(o,u){if(1&o&&(t.j41(0,"span",12),t.nrm(1,"i",53),t.EFF(2),t.k0s()),2&o){const e=t.XpG();t.R7$(2),t.E5c(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0645\u062a\u0627\u062d\u0629 \u062e\u0644\u0627\u0644":"Resend available in"," ",e.resendCooldown,"","ar"===e.lang?"\u062b":"s"," ")}}function le(o,u){1&o&&t.nrm(0,"span",45)}function de(o,u){if(1&o){const e=t.RV6();t.j41(0,"div",54)(1,"button",55),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeOtpDialog())}),t.EFF(2),t.k0s(),t.j41(3,"button",43),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submitOtp())}),t.DNE(4,le,1,0,"span",44),t.EFF(5),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0644\u063a\u0627\u0621":"Cancel"," "),t.R7$(),t.Y8G("disabled",e.isSubmittingOtp||!e.otpCode.trim()),t.R7$(),t.Y8G("ngIf",e.isSubmittingOtp),t.R7$(),t.SpI(" ","ar"===e.lang?"\u062a\u0623\u0643\u064a\u062f":"Verify"," ")}}let k=(()=>{class o extends _.${router;route;paymentService;paymentCountryService;isLoading=!0;isCompleted=!1;needsCompletion=!1;error="";action="";stripeAccountExists=null;isRefreshScenario=!1;showOtpDialog=!1;otpCode="";resendCooldown=0;canResendOtp=!0;isSubmittingOtp=!1;constructor(e,r,n,i,a){super(e),this.router=r,this.route=n,this.paymentService=i,this.paymentCountryService=a}ngOnInit(){this.action=this.route.snapshot.data.action||"","return"===this.action?this.performReturn():"refresh"===this.action?this.performRefresh():this.performStripeStatusCheck()}checkStripeStatus(){this.isLoading=!0,this.error="",this.performStripeStatusCheck()}performStripeStatusCheck(){this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{this.isLoading=!1;const r=this.paymentService.getProviderAccount(e.data);this.stripeAccountExists=r?.stripe_account||!1,r?.details_submitted_at?this.completeStripeOnboarding():this.needsCompletion=!0},error:e=>{this.isLoading=!1,this.error="ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0633\u0627\u0628":"Error checking account status",this.handleServerErrors(e)}})}completeStripeOnboarding(){this.isLoading=!0,this.paymentService.completeStripeAccount().subscribe({next:e=>{this.isLoading=!1,this.isCompleted=!0,this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0643\u0645\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Completed","ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0628\u0646\u062c\u0627\u062d \u0648\u0647\u0648 \u062c\u0627\u0647\u0632 \u0644\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645":"Stripe account setup completed successfully and ready to use"),setTimeout(()=>{this.router.navigate(["/app/setup-payment-info/success"],{queryParams:{type:"provider"}})},2e3)},error:e=>{this.isLoading=!1,this.needsCompletion=!0,this.error="ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0643\u0645\u0627\u0644 \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628":"Error completing account setup",this.handleServerErrors(e)}})}completeAccount(){null!==this.stripeAccountExists?(this.showOtpDialog=!0,this.isRefreshScenario&&setTimeout(()=>{this.autoResendOtp()},500)):this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{const r=this.paymentService.getProviderAccount(e.data);this.stripeAccountExists=r?.stripe_account||!1,this.showOtpDialog=!0,this.isRefreshScenario&&setTimeout(()=>{this.autoResendOtp()},500)},error:e=>{this.showOtpDialog=!0,this.isRefreshScenario&&setTimeout(()=>{this.autoResendOtp()},500)}})}completeAccountWithOtp(e){this.isSubmittingOtp=!0;let r=148;this.paymentService.getPaymentAccountDetails().subscribe({next:n=>{const i=this.paymentService.getProviderAccount(n.data);i?.country?.id&&(r=i.country.id);const a={country_id:r,code:e,accept_terms:!0};!0===this.stripeAccountExists?this.paymentService.linkStripeAccount(a).subscribe({next:c=>{this.handleStripeResponse(c)},error:c=>{this.isSubmittingOtp=!1,this.handleServerErrors(c)}}):this.paymentService.createStripeAccount(a).subscribe({next:c=>{this.handleStripeResponse(c)},error:c=>{this.isSubmittingOtp=!1,this.handleServerErrors(c)}})},error:()=>{this.paymentService.createStripeAccount({country_id:r,code:e,accept_terms:!0}).subscribe({next:i=>{this.handleStripeResponse(i)},error:i=>{this.isSubmittingOtp=!1,this.handleServerErrors(i)}})}})}handleStripeResponse(e){this.isSubmittingOtp=!1,this.showOtpDialog=!1,e?.data?.stripe_account_link?.url?(this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642 \u0628\u0646\u062c\u0627\u062d":"Successfully Verified","ar"===this.lang?"\u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 Stripe \u0644\u0625\u0643\u0645\u0627\u0644 \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628":"Redirecting to Stripe to complete account setup"),window.location.href=e.data.stripe_account_link.url):this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 \u0627\u0644\u062d\u0633\u0627\u0628":"Account link not found")}performReturn(){this.isLoading=!0,this.error="",this.completeStripeOnboarding()}performRefresh(){this.isLoading=!0,this.error="",this.isRefreshScenario=!0,this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{this.isLoading=!1;const r=this.paymentService.getProviderAccount(e.data);this.stripeAccountExists=r?.stripe_account||!1;const n=r?.details_submitted_at,i=r?.charges_enable_at;null===n&&null===i?this.needsCompletion=!0:n?this.completeStripeOnboarding():this.needsCompletion=!0},error:e=>{this.isLoading=!1,this.error="ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0633\u0627\u0628":"Error checking account status",this.handleServerErrors(e)}})}autoResendOtp(){this.paymentService.generatePaymentOTP().subscribe({next:e=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062c\u062f\u064a\u062f \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"New verification code sent to your email")},error:e=>{console.warn("Auto-resend OTP failed:",e)}})}goToSetup(){this.router.navigate(["/app/setup-payment-info"])}closeOtpDialog(){this.showOtpDialog=!1,this.otpCode=""}submitOtp(){this.otpCode.trim().length>=4?this.completeAccountWithOtp(this.otpCode.trim()):this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Verification Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Please enter the verification code")}resendOtp(){this.canResendOtp&&this.paymentService.generatePaymentOTP().subscribe({next:e=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062c\u062f\u064a\u062f \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"New verification code sent to your email"),this.startCooldown()},error:e=>{this.handleServerErrors(e)}})}startCooldown(){this.canResendOtp=!1,this.resendCooldown=30;const e=setInterval(()=>{this.resendCooldown--,this.resendCooldown<=0&&(this.canResendOtp=!0,clearInterval(e))},1e3)}handleServerErrors(e){if(e?.error)if(e.error.errors){const r=e.error.errors;for(const n in r)if(r.hasOwnProperty(n)){const i=r[n];this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",Array.isArray(i)?i.join(", "):i)}}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",e.error.message?e.error.message:"ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.");else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.")}static \u0275fac=function(r){return new(r||o)(t.rXU(t.zZn),t.rXU(f.Ix),t.rXU(f.nX),t.rXU(v.W),t.rXU(y))};static \u0275cmp=t.VBU({type:o,selectors:[["app-stripe-callback"]],features:[t.Vt3],decls:29,vars:23,consts:[[3,"title","subtitle"],[1,"container-fluid","gradient-background",2,"padding-top","50px"],[1,"row","justify-content-center"],[1,"col-lg-6","col-xl-5"],[1,"card"],["class","card-body text-center py-10",4,"ngIf"],["class","card-body text-center py-8",4,"ngIf"],[3,"visibleChange","visible","modal","closable","draggable","resizable","header"],[1,"otp-content"],[1,"text-center","mb-4"],[1,"fas","fa-shield-check","text-info","fs-2","mb-3"],[1,"mb-2"],[1,"text-muted"],[1,"mb-4"],[1,"form-label","required"],["type","text","maxlength","10",1,"form-control","text-center",3,"ngModelChange","ngModel","placeholder"],[1,"form-text","text-muted","mt-2"],[1,"fas","fa-envelope","me-1"],[1,"text-center","mb-3"],["class","text-info text-decoration-underline","style","cursor: pointer;",3,"click",4,"ngIf"],["class","text-muted",4,"ngIf"],["pTemplate","footer"],[1,"card-body","text-center","py-10"],[1,"loading-container"],["role","status",1,"spinner-border","text-info","mb-4",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[4,"ngIf"],[1,"mb-3"],[1,"text-muted","mb-2"],[1,"success-container"],[1,"success-icon","mb-4"],[1,"fas","fa-check-circle","text-success"],[1,"text-success","mb-3"],[1,"text-muted","mb-4"],["role","status",1,"spinner-border","spinner-border-sm","text-info"],[1,"card-body","text-center","py-8"],[1,"completion-container"],[1,"warning-icon","mb-4"],[1,"fas","fa-exclamation-triangle","text-warning"],[1,"text-warning","mb-3"],[1,"text-muted","mb-6"],[1,"d-flex","justify-content-center","gap-3"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-info",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"error-container"],[1,"error-icon","mb-4"],[1,"fas","fa-times-circle","text-danger"],[1,"text-danger","mb-3"],["type","button",1,"btn","btn-info",3,"click"],[1,"text-info","text-decoration-underline",2,"cursor","pointer",3,"click"],[1,"fas","fa-paper-plane","me-1"],[1,"fas","fa-clock","me-1"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(r,n){1&r&&(t.nrm(0,"p-toast")(1,"app-payment-header",0),t.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t.DNE(6,oe,7,2,"div",5)(7,re,11,2,"div",5)(8,ue,16,10,"div",6)(9,ae,13,4,"div",6),t.k0s()()()(),t.j41(10,"p-dialog",7),t.mxI("visibleChange",function(a){return t.DH7(n.showOtpDialog,a)||(n.showOtpDialog=a),a}),t.j41(11,"div",8)(12,"div",9),t.nrm(13,"i",10),t.j41(14,"h5",11),t.EFF(15),t.k0s(),t.j41(16,"p",12),t.EFF(17),t.k0s()(),t.j41(18,"div",13)(19,"label",14),t.EFF(20),t.k0s(),t.j41(21,"input",15),t.mxI("ngModelChange",function(a){return t.DH7(n.otpCode,a)||(n.otpCode=a),a}),t.k0s(),t.j41(22,"div",16),t.nrm(23,"i",17),t.EFF(24),t.k0s()(),t.j41(25,"div",18),t.DNE(26,se,3,1,"span",19)(27,ce,3,3,"span",20),t.k0s()(),t.DNE(28,de,6,4,"ng-template",21),t.k0s()),2&r&&(t.R7$(),t.Y8G("title","ar"===n.lang?"\u0645\u0639\u0627\u0644\u062c Stripe":"Stripe Processing")("subtitle","ar"===n.lang?"\u062c\u0627\u0631\u064a \u0645\u0639\u0627\u0644\u062c\u0629 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643":"Processing your Stripe account setup"),t.R7$(5),t.Y8G("ngIf",n.isLoading),t.R7$(),t.Y8G("ngIf",n.isCompleted&&!n.isLoading),t.R7$(),t.Y8G("ngIf",n.needsCompletion&&!n.isLoading),t.R7$(),t.Y8G("ngIf",n.error&&!n.isLoading),t.R7$(),t.Aen(t.lJ4(22,te)),t.FS9("header","ar"===n.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0647\u0648\u064a\u062a\u0643":"Verify Your Identity"),t.R50("visible",n.showOtpDialog),t.Y8G("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),t.R7$(5),t.SpI(" ","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Enter Verification Code"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0644\u0642\u062f \u0623\u0631\u0633\u0644\u0646\u0627 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"We sent a verification code to your email"," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Verification Code"," "),t.R7$(),t.R50("ngModel",n.otpCode),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0627\u0644\u0631\u0645\u0632":"Enter code"),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0648\u0645\u062c\u0644\u062f \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0645\u0632\u0639\u062c\u0629 (\u062a\u0646\u062a\u0647\u064a \u0641\u0639\u0627\u0644\u064a\u0629 \u0627\u0644\u0643\u0648\u062f \u0641\u064a 1 \u0633\u0627\u0639\u0629)":"Check your email and spam folder (Code expires in 1 hour)"," "),t.R7$(2),t.Y8G("ngIf",n.canResendOtp),t.R7$(),t.Y8G("ngIf",!n.canResendOtp))},dependencies:[g.bT,s.me,s.BC,s.tU,s.vS,p.y8,m.Ei,b.l,h,g.Jj],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .1rem 1rem #00000012}.loading-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.loading-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#181c32;font-weight:600}.success-container[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#50cd89!important}.success-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#50cd89!important;font-weight:600}.completion-container[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ffc700!important}.completion-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#ffc700!important;font-weight:600}.error-container[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#f1416c!important}.error-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#f1416c!important;font-weight:600}.btn-info[_ngcontent-%COMP%]{background-color:#0978b9;border-color:#0978b9}.btn-info[_ngcontent-%COMP%]:hover{background-color:#085a8a;border-color:#085a8a}.btn-info[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-light[_ngcontent-%COMP%]{background-color:#f5f8fa;border-color:#e4e6ef;color:#7e8299}.btn-light[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#d3d6db;color:#5e6278}@media (max-width: 768px){.d-flex.justify-content-center.gap-3[_ngcontent-%COMP%]{flex-direction:column;gap:1rem!important}.d-flex.justify-content-center.gap-3[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.loading-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%], .success-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%], .completion-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}.loading-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .success-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .completion-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem!important}.loading-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .success-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .completion-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem}}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.visually-hidden[_ngcontent-%COMP%]{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}.text-muted[_ngcontent-%COMP%]{color:#a1a5b7!important}.text-success[_ngcontent-%COMP%]{color:#50cd89!important}.text-warning[_ngcontent-%COMP%]{color:#ffc700!important}.text-danger[_ngcontent-%COMP%]{color:#f1416c!important}.text-info[_ngcontent-%COMP%]{color:#0978b9!important}"]})}return o})();function pe(o,u){if(1&o&&(t.j41(0,"div",31),t.nrm(1,"i",32),t.j41(2,"div",33),t.EFF(3),t.k0s()()),2&o){const e=t.XpG();t.R7$(3),t.SpI(" ",e.getVerificationMessage()," ")}}let me=(()=>{class o extends _.${route;router;paymentType="";countdown=5;countdownInterval;constructor(e,r,n){super(e),this.route=r,this.router=n}ngOnInit(){this.route.queryParams.subscribe(e=>{this.paymentType=e.type||"manual"})}ngOnDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval),super.ngOnDestroy()}navigateToAddKnowledge(){this.countdownInterval&&clearInterval(this.countdownInterval),this.router.navigate(["/app/add-knowledge/stepper"])}navigateToLibrary(){this.countdownInterval&&clearInterval(this.countdownInterval),this.router.navigate(["/app/insighter-dashboard/my-knowledge/general"])}getSuccessMessage(){return"provider"===this.paymentType?{title:"ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0628\u0646\u062c\u0627\u062d!":"Stripe Account Setup Complete!",subtitle:"ar"===this.lang?"\u0645\u0628\u0631\u0648\u0643! \u062a\u0645 \u0631\u0628\u0637 \u062d\u0633\u0627\u0628\u0643 \u0628\u0646\u062c\u0627\u062d":"Congratulations! Your account has been successfully linked",description:"ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0622\u0646 \u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0645\u0646 \u0627\u0644\u0639\u0645\u0644\u0627\u0621 \u0628\u0637\u0631\u064a\u0642\u0629 \u0622\u0645\u0646\u0629 \u0648\u0645\u0636\u0645\u0648\u0646\u0629.":"Your Stripe account has been successfully set up. You can now receive payments from clients securely and reliably."}:{title:"ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0628\u0646\u062c\u0627\u062d!":"Bank Account Setup Complete!",subtitle:"ar"===this.lang?"\u0645\u0628\u0631\u0648\u0643! \u062a\u0645 \u062d\u0641\u0638 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u062d\u0633\u0627\u0628\u0643":"Congratulations! Your account information has been saved",description:"ar"===this.lang?"\u062a\u0645 \u062d\u0641\u0638 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u064a\u062f\u0648\u064a \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u0633\u064a\u062a\u0645 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0644\u062a\u062d\u0648\u064a\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0625\u0644\u064a\u0643.":"Your manual account information has been successfully saved. This information will be used to transfer payments to you."}}getVerificationMessage(){return"provider"===this.paymentType?"ar"===this.lang?"\u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0622\u0646 \u0642\u064a\u062f \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0645\u0646 \u0642\u0628\u0644 \u0645\u0642\u062f\u0645 \u0627\u0644\u062e\u062f\u0645\u0629. \u0642\u062f \u062a\u0633\u062a\u063a\u0631\u0642 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 1-7 \u0623\u064a\u0627\u0645 \u0639\u0645\u0644 \u0644\u062a\u0641\u0639\u064a\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u064a\u0632\u0627\u062a.":"Your account is now under verification by the provider. The verification process may take 1-7 business days to activate all features.":""}getPaymentTypeIcon(){return"provider"===this.paymentType?"fab fa-stripe-s":"fas fa-university"}showVerificationMessage(){return"provider"===this.paymentType}getPaymentTypeColor(){return"provider"===this.paymentType?"text-primary":"text-info"}getCountdownText(){return"ar"===this.lang?`\u0633\u064a\u062a\u0645 \u0627\u0644\u062a\u0648\u062c\u064a\u0647 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u062e\u0644\u0627\u0644 ${this.countdown} \u062b\u0648\u0627\u0646`:`Auto redirecting in ${this.countdown} seconds`}static \u0275fac=function(r){return new(r||o)(t.rXU(t.zZn),t.rXU(f.nX),t.rXU(f.Ix))};static \u0275cmp=t.VBU({type:o,selectors:[["app-payment-success"]],features:[t.Vt3],decls:54,vars:15,consts:[[3,"title","subtitle"],[1,"container-fluid","gradient-background",2,"padding-top","50px"],[1,"row","justify-content-center"],[1,"col-lg-7","col-xl-6"],[1,"card","success-card"],[1,"card-body","text-center","py-10"],[1,"success-animation","mb-6"],["src","https://lottie.host/fe2c060d-6387-4674-a21f-55d6e9a8f0c0/9Aun5jI4fu.json","background","transparent","speed","1","autoplay","","direction","1","mode","normal",2,"width","160px","height","160px"],[1,"payment-type-badge","mb-4"],[1,"badge","badge-light-success","fs-6","px-4","py-2"],[1,"mx-2"],[1,"success-content","mb-8"],[1,"text-success","mb-3","fw-bold"],[1,"text-gray-600","mb-4"],[1,"text-muted","fs-6","mb-4","px-4"],["class","alert alert-warning d-flex align-items-center mb-0 mx-4","role","alert",4,"ngIf"],[1,"features-list","mb-8"],[1,"row","g-4"],[1,"col-md-4"],[1,"feature-item"],[1,"feature-icon","mb-3"],[1,"fas","fa-shield-alt","text-success"],[1,"mb-2"],[1,"text-muted","fs-7","mb-0"],[1,"fas","fa-bolt","text-warning"],[1,"fas","fa-headset","text-info"],[1,"action-buttons"],["type","button",1,"btn","btn-success","btn-lg","me-3","mb-3",3,"click"],[1,"fas","fa-plus","me-2"],["type","button",1,"btn","btn-info","btn-lg","mb-3",3,"click"],[1,"fas","fa-book","me-2"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center","mb-0","mx-4"],[1,"fas","fa-clock","me-2","text-warning"],[1,"fs-7"]],template:function(r,n){1&r&&(t.nrm(0,"p-toast")(1,"app-payment-header",0),t.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),t.nrm(8,"lottie-player",7),t.k0s(),t.j41(9,"div",8)(10,"span",9)(11,"span",10),t.EFF(12),t.k0s()()(),t.j41(13,"div",11)(14,"h2",12),t.EFF(15),t.k0s(),t.j41(16,"h5",13),t.EFF(17),t.k0s(),t.j41(18,"p",14),t.EFF(19),t.k0s(),t.DNE(20,pe,4,1,"div",15),t.k0s(),t.j41(21,"div",16)(22,"div",17)(23,"div",18)(24,"div",19)(25,"div",20),t.nrm(26,"i",21),t.k0s(),t.j41(27,"h6",22),t.EFF(28),t.k0s(),t.j41(29,"p",23),t.EFF(30),t.k0s()()(),t.j41(31,"div",18)(32,"div",19)(33,"div",20),t.nrm(34,"i",24),t.k0s(),t.j41(35,"h6",22),t.EFF(36),t.k0s(),t.j41(37,"p",23),t.EFF(38),t.k0s()()(),t.j41(39,"div",18)(40,"div",19)(41,"div",20),t.nrm(42,"i",25),t.k0s(),t.j41(43,"h6",22),t.EFF(44),t.k0s(),t.j41(45,"p",23),t.EFF(46),t.k0s()()()()(),t.j41(47,"div",26)(48,"button",27),t.bIt("click",function(){return n.navigateToAddKnowledge()}),t.nrm(49,"i",28),t.EFF(50),t.k0s(),t.j41(51,"button",29),t.bIt("click",function(){return n.navigateToLibrary()}),t.nrm(52,"i",30),t.EFF(53),t.k0s()()()()()()()),2&r&&(t.R7$(),t.Y8G("title","ar"===n.lang?"\u062a\u0645 \u0627\u0644\u0625\u0639\u062f\u0627\u062f \u0628\u0646\u062c\u0627\u062d!":"Setup Complete!")("subtitle","ar"===n.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u0645\u062d\u0641\u0638\u0629 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d":"Your payment wallet has been successfully set up"),t.R7$(11),t.SpI(" ","provider"===n.paymentType?"Provider":"ar"===n.lang?"\u062d\u0633\u0627\u0628 \u064a\u062f\u0648\u064a":"Manual Account"," "),t.R7$(3),t.SpI(" ",n.getSuccessMessage().title," "),t.R7$(2),t.SpI(" ",n.getSuccessMessage().subtitle," "),t.R7$(2),t.SpI(" ",n.getSuccessMessage().description," "),t.R7$(),t.Y8G("ngIf",n.showVerificationMessage()),t.R7$(8),t.SpI(" ","ar"===n.lang?"\u0622\u0645\u0646 \u0648\u0645\u0636\u0645\u0648\u0646":"Secure & Safe"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u0643 \u0645\u062d\u0645\u064a\u0629":"Your information is protected"," "),t.R7$(6),t.SpI(" ","ar"===n.lang?"\u0633\u0631\u064a\u0639 \u0648\u0641\u0639\u0627\u0644":"Fast & Efficient"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0627\u0644\u062c\u0629 \u0633\u0631\u064a\u0639\u0629":"Quick processing"," "),t.R7$(6),t.SpI(" ","ar"===n.lang?"\u062f\u0639\u0645 \u0639\u0644\u0649 \u0645\u062f\u0627\u0631 \u0627\u0644\u0633\u0627\u0639\u0629":"24/7 Support"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0646\u062d\u0646 \u0647\u0646\u0627 \u0644\u0645\u0633\u0627\u0639\u062f\u062a\u0643":"We are here to help"," "),t.R7$(4),t.SpI(" ","ar"===n.lang?"\u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0631\u0641\u0629 \u062c\u062f\u064a\u062f\u0629":"Add Knowledge"," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0627\u0644\u062a\u0648\u062c\u0647 \u0644\u0645\u0643\u062a\u0628\u062a\u064a":"Go to Library"," "))},dependencies:[g.bT,p.y8,h],styles:[".success-card[_ngcontent-%COMP%]{border:none;box-shadow:0 .2rem 2rem #50cd8926;border-top:4px solid #50cd89}.success-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:3rem 2rem}@keyframes _ngcontent-%COMP%_fadeUp{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}.success-animation[_ngcontent-%COMP%]{position:relative;display:inline-block;animation:_ngcontent-%COMP%_fadeUp .6s ease-out both}.success-animation[_ngcontent-%COMP%]   lottie-player[_ngcontent-%COMP%]{margin:0 auto;display:block}.payment-type-badge[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{border:1px solid rgba(80,205,137,.3)}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.success-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:500}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{padding:1rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:600;color:#181c32}.action-buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background-color:#50cd89;border-color:#50cd89;padding:.75rem 2rem}.action-buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover{background-color:#47b881;border-color:#47b881}.action-buttons[_ngcontent-%COMP%]   .countdown-text[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 768px){.success-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem 1.5rem}.success-animation[_ngcontent-%COMP%]   lottie-player[_ngcontent-%COMP%]{width:120px!important;height:120px!important}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{margin-bottom:1rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.action-buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{width:100%;margin-right:0!important}}.text-success[_ngcontent-%COMP%]{color:#50cd89!important}.text-gray-600[_ngcontent-%COMP%]{color:#7e8299!important}.text-muted[_ngcontent-%COMP%]{color:#a1a5b7!important}.text-primary[_ngcontent-%COMP%]{color:#635bff!important}.text-info[_ngcontent-%COMP%]{color:#0978b9!important}.text-warning[_ngcontent-%COMP%]{color:#ffc700!important}"]})}return o})();var S=l(7673),ge=l(6354),he=l(9437);let P=(()=>{class o{paymentService;router;constructor(e,r){this.paymentService=e,this.router=r}canActivate(e,r){const n=this.getExpectedTypeFromRoute(r.url);return n&&"provider"!==n?this.paymentService.getPaymentAccountDetails().pipe((0,ge.T)(i=>i.data.find(c=>c.primary)?.type===n||(this.router.navigate(["/app/setup-payment-info"]),!1)),(0,he.W)(()=>(this.router.navigate(["/app/setup-payment-info"]),(0,S.of)(!1)))):(0,S.of)(!0)}getExpectedTypeFromRoute(e){return e.includes("manual-account")?"manual":e.includes("stripe-callback")?"provider":null}static \u0275fac=function(r){return new(r||o)(t.KVO(v.W),t.KVO(f.Ix))};static \u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var fe=l(4185),_e=l(8870);let be=(()=>{class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=t.$C({type:o});static \u0275inj=t.G2t({imports:[g.MD,s.YN,s.X1,p.MB,b.P,C.kr,_e.W,f.iI.forChild([{path:"",component:bt},{path:"manual-account",component:Qt,canActivate:[P],canDeactivate:[fe.y]},{path:"stripe-callback",component:k,canActivate:[P]},{path:"stripe-callback/return",component:k,canActivate:[P],data:{action:"return"}},{path:"stripe-callback/refresh",component:k,canActivate:[P],data:{action:"refresh"}},{path:"success",component:me}])]})}return o})()}}]);