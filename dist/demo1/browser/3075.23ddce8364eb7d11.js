"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[3075],{3075:(z,g,a)=>{a.r(g),a.d(g,{MyOrdersModule:()=>J});var d=a(177),c=a(2791),_=a(5098),l=a(7673),p=a(9437),e=a(4438),f=a(1626),O=a(4412),y=a(8810),x=a(6354),F=a(980),m=a(4133);let $=(()=>{class n{http;translationService;API_URL="https://api.foresighta.co/api/account/order/knowledge";isLoadingSubject=new O.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(t,r){this.http=t,this.translationService=r,this.currentLang=this.normalizeLanguage(this.translationService.getSelectedLanguage()||"en"),this.translationService.onLanguageChange().subscribe(o=>{this.currentLang=this.normalizeLanguage(o||"en")})}normalizeLanguage(t){return t&&"ar"===t.toLowerCase().split(/[-_,;]/)[0]?"ar":"en"}setLoading(t){this.isLoadingSubject.next(t)}getHeaders(){return new f.Lr({"Content-Type":"application/json",Accept:"application/json","Accept-Language":this.currentLang,"X-Timezone":Intl.DateTimeFormat().resolvedOptions().timeZone})}handleError(t){return console.error("MyOrdersService error:",t),(0,y.$)(()=>t)}getOrders(t=1){const r=`${this.API_URL}?page=${t}&per_page=5`,o=this.getHeaders();return this.setLoading(!0),this.http.get(r,{headers:o}).pipe((0,x.T)(i=>i),(0,p.W)(i=>this.handleError(i)),(0,F.j)(()=>this.setLoading(!1)))}static \u0275fac=function(r){return new(r||n)(e.KVO(f.Qq),e.KVO(m.L))};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var v=a(6781),h=a(6627),b=a(8542);const R=()=>({width:"50vw",minWidth:"300px"}),C=()=>({"max-height":"70vh","overflow-y":"auto"});function w(n,s){if(1&n&&(e.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"span",10),e.EFF(4),e.k0s()()()()),2&n){const t=e.XpG();e.R7$(4),e.JRh("ar"===t.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"Loading...")}}function E(n,s){if(1&n&&(e.j41(0,"div",14)(1,"span",35),e.EFF(2),e.k0s(),e.nrm(3,"img",36),e.k0s()),2&n){const t=s.$implicit,r=e.XpG(3).$implicit,o=e.XpG(2);e.R7$(2),e.SpI("(",o.getDocumentCountByExtension(r,t),")"),e.R7$(),e.Y8G("src",o.getFileIconByExtension(t),e.B4B)("alt",t)}}function k(n,s){if(1&n&&(e.j41(0,"div",32)(1,"div",33),e.DNE(2,E,4,3,"div",34),e.k0s()()),2&n){const t=e.XpG(2).$implicit,r=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",r.getUniqueExtensions(t))}}function j(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",29)(1,"div",14)(2,"div")(3,"a",30),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG(3);return e.Njj(i.navigateToDownloads(o.title))}),e.EFF(4),e.k0s()()(),e.DNE(5,k,3,1,"div",31),e.k0s()}if(2&n){const t=s.$implicit,r=e.XpG().$implicit,o=e.XpG(2);e.R7$(3),e.Y8G("pTooltip","ar"===o.lang?"\u0639\u0631\u0636 \u0641\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644\u0627\u062a":"View in downloads"),e.R7$(),e.SpI(" ",t.title," "),e.R7$(),e.Y8G("ngIf",r.knowledge_documents&&r.knowledge_documents.length>0)}}function M(n,s){if(1&n&&(e.j41(0,"div",27),e.DNE(1,j,6,3,"div",28),e.k0s()),2&n){const t=s.$implicit;e.R7$(),e.Y8G("ngForOf",t.knowledge)}}function G(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",7)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15)(6,"div",16),e.nrm(7,"i",17),e.k0s()(),e.j41(8,"div")(9,"div",18)(10,"h6",19),e.EFF(11),e.k0s(),e.j41(12,"button",20),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.copyOrderUuid(o.uuid))}),e.nrm(13,"i",21),e.k0s()(),e.j41(14,"div",22),e.EFF(15),e.k0s()()(),e.j41(16,"div",23)(17,"button",24),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.openOrderDetails(o))}),e.EFF(18),e.k0s()()(),e.DNE(19,M,2,1,"div",25),e.j41(20,"div",26)(21,"div",22),e.EFF(22),e.nI1(23,"date"),e.k0s()()()()()}if(2&n){const t=s.$implicit,r=e.XpG();e.R7$(11),e.Lme(" ","ar"===r.lang?"\u0637\u0644\u0628 \u0631\u0642\u0645":"Order no"," #",t.uuid," "),e.R7$(),e.Y8G("title","ar"===r.lang?"\u0646\u0633\u062e \u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628":"Copy Order UUID"),e.R7$(3),e.JRh(0===t.amount?"ar"===r.lang?"\u0645\u062c\u0627\u0646\u064a":"Free":"$"+t.amount),e.R7$(3),e.SpI(" ","ar"===r.lang?"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0637\u0644\u0628":"Order Details"," "),e.R7$(),e.Y8G("ngForOf",t.suborders),e.R7$(3),e.Lme(" ","ar"===r.lang?"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628":"Ordered"," ",e.i5U(23,8,t.date,"short")," ")}}function I(n,s){if(1&n&&(e.j41(0,"div",7)(1,"div",37)(2,"div",38)(3,"div",16),e.nrm(4,"i",39),e.k0s()(),e.j41(5,"h5",27),e.EFF(6),e.k0s(),e.j41(7,"p",40),e.EFF(8),e.k0s()()()),2&n){const t=e.XpG();e.R7$(6),e.JRh("ar"===t.lang?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0637\u0644\u0628\u0627\u062a":"No Orders Found"),e.R7$(2),e.SpI(" ","ar"===t.lang?"\u0644\u0645 \u062a\u0642\u0645 \u0628\u0623\u064a \u0637\u0644\u0628\u0627\u062a \u0628\u0639\u062f":"You haven't placed any orders yet."," ")}}function D(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",41)(1,"p-paginator",42),e.nI1(2,"async"),e.bIt("onPageChange",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.onPageChange((o.page||0)+1))}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("rows",10)("totalRecords",10*e.bMT(2,5,t.totalPages$))("first",10*(t.currentPage-1))("showCurrentPageReport",!0)("currentPageReportTemplate","ar"===t.lang?"\u0639\u0631\u0636 {first} \u0625\u0644\u0649 {last} \u0645\u0646 {totalRecords} \u0637\u0644\u0628":"Showing {first} to {last} of {totalRecords} orders")}}function T(n,s){if(1&n&&(e.j41(0,"div",60)(1,"div",61)(2,"div",62)(3,"div",14),e.nrm(4,"img",63),e.j41(5,"div",64)(6,"div",65),e.EFF(7),e.k0s(),e.j41(8,"div",22),e.EFF(9),e.k0s()(),e.j41(10,"div",66)(11,"div",67),e.EFF(12),e.k0s()()()()()()),2&n){const t=s.$implicit,r=e.XpG(6);e.R7$(4),e.Y8G("src",r.getFileIconByExtension(t.file_extension),e.B4B)("alt",t.file_extension),e.R7$(3),e.JRh(t.file_name),e.R7$(2),e.JRh(t.file_extension.toUpperCase()),e.R7$(3),e.JRh(0===t.price?"ar"===r.lang?"\u0645\u062c\u0627\u0646\u064a":"Free":"$"+t.price)}}function L(n,s){if(1&n&&(e.qex(0),e.DNE(1,T,13,5,"div",59),e.bVm()),2&n){const t=s.$implicit;e.R7$(),e.Y8G("ngForOf",t)}}function A(n,s){if(1&n&&(e.j41(0,"div")(1,"h6",56),e.EFF(2),e.k0s(),e.j41(3,"div",57),e.DNE(4,L,2,1,"ng-container",58),e.k0s()()),2&n){const t=e.XpG(2).$implicit,r=e.XpG(2);e.R7$(2),e.JRh("ar"===r.lang?"\u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a:":"Documents:"),e.R7$(2),e.Y8G("ngForOf",t.knowledge_documents)}}function P(n,s){if(1&n&&(e.j41(0,"div",52)(1,"h6",53)(2,"a",54),e.EFF(3),e.k0s()(),e.DNE(4,A,5,2,"div",55),e.k0s()),2&n){const t=s.$implicit,r=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.Y8G("href",o.getKnowledgeUrl(t),e.B4B),e.R7$(),e.SpI(" ",t.title," "),e.R7$(),e.Y8G("ngIf",r.knowledge_documents&&r.knowledge_documents.length>0)}}function S(n,s){if(1&n&&(e.j41(0,"div",44),e.DNE(1,P,5,3,"div",51),e.k0s()),2&n){const t=s.$implicit;e.R7$(),e.Y8G("ngForOf",t.knowledge)}}function X(n,s){if(1&n&&(e.j41(0,"div",43)(1,"div",44)(2,"h6",45),e.EFF(3),e.k0s(),e.j41(4,"div",46)(5,"span",40),e.EFF(6),e.k0s(),e.j41(7,"span",47),e.EFF(8),e.k0s()(),e.j41(9,"div",46)(10,"span",40),e.EFF(11),e.k0s(),e.j41(12,"span",48),e.EFF(13),e.k0s()(),e.j41(14,"div",49)(15,"span",40),e.EFF(16),e.k0s(),e.j41(17,"span"),e.EFF(18),e.nI1(19,"date"),e.k0s()()(),e.DNE(20,S,2,1,"div",50),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.Lme(" ","ar"===t.lang?"\u0637\u0644\u0628 \u0631\u0642\u0645":"Order"," #",t.selectedOrder.uuid," "),e.R7$(3),e.JRh("ar"===t.lang?"\u0627\u0644\u0645\u0628\u0644\u063a:":"Amount:"),e.R7$(2),e.JRh(0===t.selectedOrder.amount?"ar"===t.lang?"\u0645\u062c\u0627\u0646\u064a":"Free":"$"+t.selectedOrder.amount),e.R7$(3),e.JRh("ar"===t.lang?"\u0627\u0644\u062d\u0627\u0644\u0629:":"Status:"),e.R7$(),e.HbH(t.getStatusBadgeClass(t.selectedOrder.status)),e.R7$(),e.JRh(t.selectedOrder.status),e.R7$(3),e.JRh("ar"===t.lang?"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:":"Date:"),e.R7$(2),e.JRh(e.i5U(19,11,t.selectedOrder.date,"medium")),e.R7$(2),e.Y8G("ngForOf",t.selectedOrder.suborders)}}const Y=[{path:"",component:(()=>{class n extends _.${myOrdersService;router;orders$=(0,l.of)([]);totalPages$=(0,l.of)(0);currentPage=1;selectedOrder=null;showOrderDetails=!1;constructor(t,r,o){super(t),this.myOrdersService=r,this.router=o}get isLoading$(){return this.myOrdersService.isLoading$}ngOnInit(){this.loadOrders()}loadOrders(t=1){this.currentPage=t,this.myOrdersService.getOrders(t).pipe((0,p.W)(r=>(this.handleServerErrors(r),(0,l.of)({data:[],links:{first:"",last:"",prev:null,next:null},meta:{current_page:1,from:0,last_page:1,links:[],path:"",per_page:10,to:0,total:0}})))).subscribe(r=>{this.orders$=(0,l.of)(r.data),this.totalPages$=(0,l.of)(r.meta.last_page)})}onPageChange(t){this.loadOrders(t)}openOrderDetails(t){this.selectedOrder=t,this.showOrderDetails=!0}copyOrderUuid(t){navigator.clipboard.writeText(t).then(()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0646\u0633\u062e":"Copied","ar"===this.lang?"\u062a\u0645 \u0646\u0633\u062e \u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628":"Order UUID copied to clipboard")}).catch(()=>{this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0641\u0634\u0644 \u0641\u064a \u0646\u0633\u062e \u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628":"Failed to copy order UUID")})}getFileIconByExtension(t){return{pdf:"./assets/media/svg/new-files/pdf.svg",doc:"./assets/media/svg/new-files/doc.svg",docx:"./assets/media/svg/new-files/docx.svg",xls:"./assets/media/svg/new-files/xls.svg",xlsx:"./assets/media/svg/new-files/xlsx.svg",ppt:"./assets/media/svg/new-files/ppt.svg",pptx:"./assets/media/svg/new-files/pptx.svg",txt:"./assets/media/svg/new-files/txt.svg",zip:"./assets/media/svg/new-files/zip.svg",rar:"./assets/media/svg/new-files/zip.svg"}[t.toLowerCase()]||"./assets/media/svg/new-files/file.svg"}getKnowledgeUrl(t){return t.slug?`https://knoldg.com/en/knowledge/data/${t.slug}`:"#"}getStatusBadgeClass(t){switch(t.toLowerCase()){case"paid":return"badge badge-light-success";case"pending":return"badge badge-light-warning";case"failed":return"badge badge-light-danger";default:return"badge badge-light-info"}}getDocumentCountByExtension(t,r){let o=0;return t.knowledge_documents?.forEach(i=>{i.forEach(u=>{u.file_extension.toLowerCase()===r.toLowerCase()&&o++})}),o}getUniqueExtensions(t){const r=new Set;return t.knowledge_documents?.forEach(o=>{o.forEach(i=>{r.add(i.file_extension.toLowerCase())})}),Array.from(r)}navigateToDownloads(t){this.router.navigate(["/app/insighter-dashboard/my-downloads"],{queryParams:{search:t}})}handleServerErrors(t){if(t.error&&t.error.errors){const r=t.error.errors;for(const o in r)r.hasOwnProperty(o)&&this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",r[o].join(", "))}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An unexpected error occurred.")}static \u0275fac=function(r){return new(r||n)(e.rXU(e.zZn),e.rXU($),e.rXU(c.Ix))};static \u0275cmp=e.VBU({type:n,selectors:[["app-my-orders"]],features:[e.Vt3],decls:13,vars:25,consts:[[1,"container-fluid"],[1,"row","g-4"],["class","col-12",4,"ngIf"],["class","col-12",4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-6",4,"ngIf"],["appendTo","body",3,"visibleChange","visible","header","modal","draggable","resizable","contentStyle"],["class","order-details",4,"ngIf"],[1,"col-12"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","200px"],["role","status",1,"spinner-border","text-info",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"card","card-custom","gutter-b"],[1,"card-body","p-6"],[1,"d-flex","justify-content-between","align-items-start","mb-4"],[1,"d-flex","align-items-center"],[1,"symbol","symbol-40px","me-3"],[1,"symbol-label","bg-light-info"],[1,"pi","pi-shopping-bag","text-info","fs-2"],[1,"d-flex","align-items-center","mb-1"],[1,"mb-0","fw-bold","me-2"],["type","button",1,"btn","btn-sm","btn-light-info","p-1",3,"click","title"],[1,"ki-outline","ki-copy","fs-6"],[1,"text-muted","fs-7"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-info","btn-sm",3,"click"],["class","mb-3",4,"ngFor","ngForOf"],[1,"border-top","pt-3","mt-3"],[1,"mb-3"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],["target","_blank",1,"text-info","text-decoration-none","fw-bold","fs-6","cursor-pointer",3,"click","pTooltip"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"d-flex","flex-wrap","gap-2"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"badge","badge-light-secondary","me-1"],["onerror","this.style.display='none'",1,"me-2",2,"width","24px","height","24px",3,"src","alt"],[1,"text-center","py-10"],[1,"symbol","symbol-100px","mx-auto","mb-4"],[1,"pi","pi-shopping-bag","text-info","fs-1"],[1,"text-muted"],[1,"d-flex","justify-content-center","mt-6"],[3,"onPageChange","rows","totalRecords","first","showCurrentPageReport","currentPageReportTemplate"],[1,"order-details"],[1,"mb-4"],[1,"fw-bold","mb-2"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"fw-bold"],[1,"text-uppercase"],[1,"d-flex","justify-content-between","align-items-center"],["class","mb-4",4,"ngFor","ngForOf"],["class","border rounded p-3 mb-3",4,"ngFor","ngForOf"],[1,"border","rounded","p-3","mb-3"],[1,"mb-3","text-info"],["target","_blank",1,"text-info","text-decoration-none",3,"href"],[4,"ngIf"],[1,"fs-7","text-muted","mb-2"],[1,"row","g-2"],[4,"ngFor","ngForOf"],["class","col-md-12",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"card","card-flush","border","border-gray-300"],[1,"card-body","p-3"],["onerror","this.style.display='none'",1,"me-3",2,"width","32px","height","32px",3,"src","alt"],[1,"flex-grow-1"],[1,"fw-bold","fs-6"],[1,"text-end"],[1,"fw-bold","text-info"]],template:function(r,o){if(1&r&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,w,5,1,"div",2),e.nI1(3,"async"),e.DNE(4,G,24,11,"div",3),e.nI1(5,"async"),e.DNE(6,I,9,2,"div",2),e.nI1(7,"async"),e.nI1(8,"async"),e.k0s(),e.DNE(9,D,3,7,"div",4),e.nI1(10,"async"),e.k0s(),e.j41(11,"p-dialog",5),e.mxI("visibleChange",function(u){return e.DH7(o.showOrderDetails,u)||(o.showOrderDetails=u),u}),e.DNE(12,X,21,14,"div",6),e.k0s()),2&r){let i;e.R7$(2),e.Y8G("ngIf",e.bMT(3,13,o.isLoading$)),e.R7$(2),e.Y8G("ngForOf",e.bMT(5,15,o.orders$)),e.R7$(2),e.Y8G("ngIf",0===(null==(i=e.bMT(7,17,o.orders$))?null:i.length)&&!e.bMT(8,19,o.isLoading$)),e.R7$(3),e.Y8G("ngIf",e.bMT(10,21,o.totalPages$)>1),e.R7$(2),e.Aen(e.lJ4(23,R)),e.R50("visible",o.showOrderDetails),e.Y8G("header","ar"===o.lang?"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0637\u0644\u0628":"Order Details")("modal",!0)("draggable",!1)("resizable",!1)("contentStyle",e.lJ4(24,C)),e.R7$(),e.Y8G("ngIf",o.selectedOrder)}},dependencies:[d.Sq,d.bT,v.l,h.m,b.m,d.Jj,d.vh],styles:[".order-card[_ngcontent-%COMP%]{transition:all .3s ease;border:1px solid #f1f1f2}.order-card[_ngcontent-%COMP%]:hover{border-color:#3799ff;transform:translateY(-2px)}.order-details[_ngcontent-%COMP%]   .card-flush[_ngcontent-%COMP%]{border:1px solid #e1e3ea!important}.symbol-label[_ngcontent-%COMP%]{background-color:#3799ff1a}.text-info[_ngcontent-%COMP%]{color:#3799ff!important}.bg-light-info[_ngcontent-%COMP%]{background-color:#3799ff1a!important}.btn-light-info[_ngcontent-%COMP%]{background-color:#3799ff1a;border-color:transparent;color:#3799ff}.btn-light-info[_ngcontent-%COMP%]:hover{background-color:#3799ff33;color:#3799ff}.btn-info[_ngcontent-%COMP%]{background-color:#3799ff;border-color:#3799ff}.btn-info[_ngcontent-%COMP%]:hover{background-color:#2d7ae0;border-color:#2d7ae0}"],changeDetection:0})}return n})()}];let U=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[c.iI.forChild(Y),c.iI]})}return n})();var B=a(7515),N=a(1141);let J=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[d.MD,U,m.E,B.d,v.P,h.I,N.tm,b.S]})}return n})()}}]);