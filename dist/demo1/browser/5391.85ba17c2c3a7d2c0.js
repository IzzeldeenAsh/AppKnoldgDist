"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[5391],{8011:(v,u,a)=>{a.r(u),a.d(u,{WebsiteSettingsModule:()=>L});var o=a(177),g=a(4582),m=a(1141),c=a(2242),b=a(9998),s=a(9417),p=a(491),r=a(5779),C=a(2791),t=a(4438),h=a(1626),S=a(8810),_=a(9437);let y=(()=>{class n{http;baseUrl="https://api.foresighta.co/api/admin/setting";authLocalStorageKey="foresighta-creds";currentLang="en";constructor(e){this.http=e}getAuthToken(){try{const e=localStorage.getItem(this.authLocalStorageKey);if(e)return JSON.parse(e).authToken||null}catch(e){console.error("Error parsing auth data from localStorage:",e)}return null}handleError(e){return(0,S.$)(e)}getConfiguration(){const e=this.getAuthToken(),i=new h.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...e?{Authorization:`Bearer ${e}`}:{}});return this.http.get(`${this.baseUrl}/configuration`,{headers:i}).pipe((0,_.W)(l=>this.handleError(l)))}updateConfiguration(e,i){const l=this.getAuthToken(),f=new h.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang,...l?{Authorization:`Bearer ${l}`}:{}});return this.http.put(`${this.baseUrl}/configuration/${e}`,i,{headers:f}).pipe((0,_.W)(B=>this.handleError(B)))}static \u0275fac=function(i){return new(i||n)(t.KVO(h.Qq))};static \u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function k(n,d){1&n&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"Name"),t.k0s(),t.j41(3,"th"),t.EFF(4,"URL/Value"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Actions"),t.k0s()())}function I(n,d){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.value)}}function E(n,d){if(1&n){const e=t.RV6();t.j41(0,"form",10),t.bIt("ngSubmit",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.saveSocial())}),t.j41(1,"div",11),t.nrm(2,"input",12),t.k0s()()}if(2&n){const e=t.XpG(2);t.Y8G("formGroup",e.editForm)}}function j(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",13)(1,"button",14),t.bIt("click",function(){t.eBV(e);const l=t.XpG().$implicit,f=t.XpG();return t.Njj(f.editSocial(l))}),t.k0s()()}}function T(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",13)(1,"button",15),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.saveSocial())}),t.k0s(),t.j41(2,"button",16),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.cancelEdit())}),t.k0s()()}}function F(n,d){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"titlecase"),t.k0s(),t.j41(4,"td"),t.DNE(5,I,2,1,"span",7)(6,E,3,1,"form",8),t.k0s(),t.j41(7,"td"),t.DNE(8,j,2,0,"div",9)(9,T,3,0,"div",9),t.k0s()()),2&n){const e=d.$implicit,i=t.XpG();t.R7$(2),t.JRh(t.bMT(3,5,e.key)),t.R7$(3),t.Y8G("ngIf",i.editingId!==e.id),t.R7$(),t.Y8G("ngIf",i.editingId===e.id),t.R7$(2),t.Y8G("ngIf",i.editingId!==e.id),t.R7$(),t.Y8G("ngIf",i.editingId===e.id)}}function x(n,d){1&n&&(t.j41(0,"tr")(1,"td",17),t.EFF(2,"No social media links found"),t.k0s()())}const M=[{path:"",redirectTo:"socials",pathMatch:"full"},{path:"socials",component:(()=>{class n{websiteSettingsService;fb;messageService;socials=[];loading=!1;editForm;editingId=null;constructor(e,i,l){this.websiteSettingsService=e,this.fb=i,this.messageService=l,this.editForm=this.fb.group({value:["",s.k0.required],type:["social"]})}ngOnInit(){this.loadSocials()}loadSocials(){this.loading=!0,this.websiteSettingsService.getConfiguration().subscribe({next:e=>{e&&e.data&&(this.socials=e.data.filter(i=>"facebook"===i.key||"x"===i.key||"instagram"===i.key||"phone"===i.key||"email"===i.key||"postal"===i.key)),this.loading=!1},error:e=>{console.error("Error loading socials:",e),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load social media links"}),this.loading=!1}})}editSocial(e){this.editingId=e.id,this.editForm.patchValue({value:e.value,type:"social"})}saveSocial(){this.editForm.valid&&this.editingId&&(this.loading=!0,this.websiteSettingsService.updateConfiguration(this.editingId,this.editForm.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Social media link updated successfully"}),this.loadSocials(),this.cancelEdit()},error:e=>{console.error("Error updating social:",e),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update social media link"}),this.loading=!1}}))}cancelEdit(){this.editingId=null,this.editForm.reset({type:"social"})}static \u0275fac=function(i){return new(i||n)(t.rXU(y),t.rXU(s.ok),t.rXU(r.bg))};static \u0275cmp=t.VBU({type:n,selectors:[["app-socials"]],decls:7,vars:2,consts:[[1,"container","mt-4"],["header","Website Social Media Links","styleClass","p-shadow-5"],[1,"card-body"],["styleClass","p-datatable-striped",3,"value","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","btn-group",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"p-inputgroup"],["type","text","pInputText","","formControlName","value","placeholder","Enter URL or value"],[1,"btn-group"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-primary","mr-2",3,"click"],["pButton","","type","button","icon","pi pi-check",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","3",1,"text-center"]],template:function(i,l){1&i&&(t.j41(0,"div",0)(1,"p-card",1)(2,"div",2)(3,"p-table",3),t.DNE(4,k,7,0,"ng-template",4)(5,F,10,7,"ng-template",5)(6,x,3,0,"ng-template",6),t.k0s()()()()),2&i&&(t.R7$(3),t.Y8G("value",l.socials)("loading",l.loading))},dependencies:[o.bT,g.XI,r.Ei,m._f,c.S,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,p.Z,o.PV],styles:[".mr-2[_ngcontent-%COMP%]{margin-right:.5rem}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem}.p-button-rounded[_ngcontent-%COMP%]{margin-right:.25rem}[_nghost-%COMP%]     .p-card{box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px}"]})}return n})()}];let D=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=t.$C({type:n});static \u0275inj=t.G2t({imports:[C.iI.forChild(M),C.iI]})}return n})(),L=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=t.$C({type:n});static \u0275inj=t.G2t({providers:[r.bg],imports:[o.MD,D,g.bG,m.tm,c.u,b.MB,s.YN,s.X1,p.D]})}return n})()},8439:(v,u,a)=>{a.d(u,{R:()=>m});var o=a(4438),g=a(461);let m=(()=>{class c extends g.h{static \u0275fac=(()=>{let s;return function(r){return(s||(s=o.xGo(c)))(r||c)}})();static \u0275cmp=o.VBU({type:c,selectors:[["AngleDownIcon"]],standalone:!0,features:[o.Vt3,o.aNF],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z","fill","currentColor"]],template:function(p,r){1&p&&(o.qSk(),o.j41(0,"svg",0),o.nrm(1,"path",1),o.k0s()),2&p&&(o.HbH(r.getClassNames()),o.BMQ("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return c})()},8263:(v,u,a)=>{a.d(u,{D:()=>m});var o=a(4438),g=a(461);let m=(()=>{class c extends g.h{static \u0275fac=(()=>{let s;return function(r){return(s||(s=o.xGo(c)))(r||c)}})();static \u0275cmp=o.VBU({type:c,selectors:[["AngleRightIcon"]],standalone:!0,features:[o.Vt3,o.aNF],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z","fill","currentColor"]],template:function(p,r){1&p&&(o.qSk(),o.j41(0,"svg",0),o.nrm(1,"path",1),o.k0s()),2&p&&(o.HbH(r.getClassNames()),o.BMQ("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return c})()}}]);